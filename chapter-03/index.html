<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Jouer avec JavaScript</title>
<style>
#header,
#content,
#footer {
  margin: 2rem auto;
  max-width: 46rem;
}

#header {
  margin-top: 0;
}

.title,
#toctitle {
  color: var(--dark-accent);
}

a {
  /* white-space: nowrap; */
}

img, iframe, video, audio {
  max-width: 100%;
}

p {
  font-weight: normal;
}

/* Taken out from book.css */
dl dt {
  margin-bottom: 0.3125em;
  font-weight: bold;
}
dl dd {
  margin-bottom: 1.25em;
}

dt,
th.tableblock,
td.content,
div.footnote {
  text-rendering: optimizeLegibility;
}

.literalblock pre,
.literalblock pre[class],
.listingblock pre,
.listingblock pre[class] {
  overflow: auto;
  word-wrap: break-word;
}
.literalblock pre.nowrap,
.literalblock pre[class].nowrap,
.listingblock pre.nowrap,
.listingblock pre[class].nowrap {
  overflow-x: auto;
  white-space: pre;
  word-wrap: normal;
}

.listingblock {
  margin: 0 0 2em;
}
.listingblock > .content {
  position: relative;
}
.listingblock > .title {
  font-weight: bold;
}
.listingblock code[data-lang]::before {
  display: none;
  content: attr(data-lang);
  position: absolute;
  font-size: 0.75em;
  top: 1em;
  right: 1em;
  line-height: 1;
  text-transform: uppercase;
  color: #999;
}
.listingblock:hover code[data-lang]::before {
  display: block;
}
.listingblock.terminal pre .command::before {
  content: attr(data-prompt);
  padding-right: 0.5em;
  color: #999;
}

td.hdlist1,
td.hdlist2 {
  vertical-align: top;
  padding-right: 0.625em;
}
td.hdlist1 {
  font-weight: bold;
}
.literalblock + .colist,
.listingblock + .colist {
  margin-top: -1.5em;
}
.colist td:not([class]):first-child {
  padding: 0.4em 0.75em 0 0.75em;
  line-height: 1;
  vertical-align: top;
}
.colist td:not([class]):first-child img {
  max-width: none;
}
.colist td:not([class]):last-child {
  padding: 0.25em 0;
}

/* Custom classes */

.line-through {
  text-decoration: line-through;
}

.RemarquePreTitre,
#toctitle {
  font-style: normal;
  font-weight: bold;
}
  .RemarquePreTitre::after {
    content: "‚Ä¢";
    padding-left: 5px;
  }
.admonitionblock {
}
.admonitionblock > table,
.exampleblock {
  --commented: rgba(17, 17, 68, .65);
  --border-radius-base: 8px;

  background-color: #fafafa;
  border: 1px solid var(--dark-shade);
  border-left: none;
  border-right: none;
  margin: 1.5em 0;
  padding: 1em;
}
.exampleblock .title {
  font-weight: bold;
}
.icon .title {
  font-size: 2em;
}
  .admonitionblock > table td.icon {
    display: none;
  }

  @media screen and (min-width: 769px) {
    .admonitionblock > table td.icon {
      display: table-cell;
    }
  }

  .admonitionblock > table td.icon {
    padding-right: 1em;
  }
  .admonitionblock > table td.icon img {
    max-width: none;
  }

.colist ol {
  margin-left: 1.5em;  /* aligns with the listing edge */
  padding-left: 0;
  font-weight: bold;   /* makes it stand out more */
}
  .colist ol p {
    margin: 0 0 .5em;
  }
.listingblock:not(.prismjs) pre,
.language-bash.hljs {
  background: #323232;
  color: wheat;
  margin: 0;
  padding: 1rem;
}
.language-bash.hljs .hljs-built_in,
.language-bash.hljs .hljs-builtin-name {
  color: white;
}
.language-bash.hljs .hljs-string {
  color: lightgreen;
}
.language-bash.hljs .hljs-variable {
  color: lightskyblue;
}
.keyseq {
  font-weight: normal;
  white-space: nowrap;
}
.language-bash.hljs .keyseq {
  color: white;
}
.language-bash.hljs kbd {
  background: transparent;
  box-shadow: none;
  color: white;
  font-size: 0.8em;
  font-weight: bold;
  padding: 0.1em 0.4em;
}
.listingblock pre.highlightjs,
.listingblock.prismjs pre {
  background-color: transparent;
  margin: 0;
  padding: 0;
}
.listingblock pre.highlightjs > code,
.listingblock.prismjs .highlight {
  border-left: 4px solid var(--dark-accent);
  padding-left: 1em;
  font-size: .8em;
}
.listingblock pre.highlightjs > code.language-bash {
  border-left-color: limegreen;
}

.hdlist .hdlist1 {
  text-align: right;
  white-space: nowrap;
}

td > p:first-child {
  margin-top: 0;
}

.hljs-comment {
  font-style: normal !important;
}

#toc.toc2 a {
  text-decoration: none;
  white-space: normal;
}
  #toc.toc2 a:hover,
  #toc.toc2 a:focus {
    text-decoration: underline;
  }

#toc.toc2 ul {
  list-style: none;
}

  #toc.toc2 > ul {
    padding-left: 0;
  }

  #toc.toc2 ul ul {
    padding-left: 1em;
  }

@media screen and (min-width: 769px) {
  body {
    padding-left: 25vw !important;
  }

  #header,
  #content,
  #footer {
    margin-left: 0;
  }

  #toc.toc2 {
    height: 100%;
    left: 0;
    max-width: 20vw;
    overflow: auto;
    padding: 1rem;
    position: fixed;
    top: 0;
    z-index: 1000;
  }

  #toc.toc2 > ul {
    font-size: 0.85em;
  }

  #toc li.active > a[href^="#"],
  [id]:target {
    background: #ffc;
  }
}

.admonitionblock.context-callout > table {
  border-width: 5px;
  border-color: var(--brand-color);
}

</style>
<link rel="stylesheet" href="https://oncletom.io/styles/blog.css?v=v3.3.2">
<!-- WebMentions -->
<link rel="pingback" href="https://webmention.io/oncletom.io/xmlrpc">
<link rel="webmention" href="https://webmention.io/oncletom.io/webmention">
<!-- Open Graph -->
<meta property="og:type" content="book">
<meta property="og:book:author" content="Thomas Parisot">
<meta property="og:book:isbn" content="978-2212139938">
<meta property="og:book:release_date" content="978-2212139938">
<meta property="og:book:tag" content="Node.js">
<meta property="og:book:tag" content="JavaScript">
<meta property="og:book:tag" content="npm">
<meta property="og:book:tag" content="D√©veloppement front-end">
<meta property="og:book:tag" content="D√©veloppement back-end">
<meta property="og:locale" content="fr_FR">
<meta property="og:site_name" content="Node.js ‚Ä¢¬†Apprendre par la pratique">
<!-- Twitter OpenGraph -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@oncletom">
<meta name="twitter:creator" content="@oncletom">
<style type="text/css" class="prism-theme">/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>
<style type="text/css" class="extension-interactive-runner">[data-interactive-runtime="loaded"] .interactive--javascript code[data-lang]:before {
  background-color: #fcfcfc;
  border: 1px solid #0c2;
  border-radius: 1px;
  color: #0c2;
  cursor: pointer;
  display: inline-block;
  font-weight: bold;
  padding: .5em 1em;
  top: -2em;
}

  [lang="en"] [data-interactive-runtime="loaded"] .interactive--javascript code[data-lang]:before {
    content: "‚ñ∂ run code";
  }
  [lang="fr"] [data-interactive-runtime="loaded"] .interactive--javascript code[data-lang]:before {
    content: "‚ñ∂ voir le r√©sultat";
  }
  .interactive--javascript code[data-label]:before {
    content: attr(data-label);
  }

.interactive iframe {
  position: absolute;
  visibility: hidden;
}

.interactive.status--loaded iframe {
  position: inherit;
  visibility: visible;
}

.interactive.status--loading {
  opacity: .5;
}
</style>
<script class="extension-interactive-runner">
(function(d){
  document.addEventListener('DOMContentLoaded', function(){
    const script = d.createElement('script');
    script.src = 'https://embed.runkit.com/';
    script.async = true;
    script.onload = function(){
      function makeListingInteractive (element){
  if (element.classList.contains('interactive--installed') || element.classList.contains('status--loading')) {
    return;
  }

  const code = element.querySelector('code');
  const nodeVersion = /interactive--runtime--node-([^\s]+)/.exec(element.className)[1];
  const isEndpoint = element.classList.contains('interactive--endpoint');
  const mode = isEndpoint ? 'endpoint' : null;
  let preamble = '';

  const source = code
    .textContent
    .replace(/\/\/\s*\(\d+\)$/gm, '')
    .replace(/^["']?use strict["'][; ]*\n/, '');

  if (isEndpoint) {
    preamble = `process.nextTick(() => {
      if (typeof module.exports === 'function') {
        exports.endpoint = module.exports;
      }
      else if (typeof server !== 'undefined') {
        exports.endpoint = server.listeners("request").pop();
      }
});`
  }

  element.classList.add('status--loading');

  // eslint-disable-next-line no-undef
  RunKit.createNotebook({
    nodeVersion,
    element,
    source,
    mode,
    preamble,
    onLoad: function(ntbk) {
      element.classList.add('interactive--installed');
      element.classList.remove('status--loading');
      element.classList.add('status--loaded');
      code.parentNode.setAttribute('hidden', true);

      ntbk.evaluate();
    }
  });
}
function installEvents () {
  function getParent(el, condition) {
    let parent = el;

    while(parent = parent.parentNode) {
      if (condition(parent)) {
        return parent;
      }
    }
  }

  function hasClass(className) {
    return function check(el) {
      return el.classList.contains(className);
    }
  }

  document.querySelector('body').addEventListener('click', function(el) {
    if (el.target.classList.contains('language-javascript') || el.target.classList.contains('language-js')) {
      const parentNode = getParent(
        el.target,
        hasClass('interactive--javascript')
      );

      makeListingInteractive(parentNode);
    }
  });
}
      installEvents();
      document.body.dataset.interactiveRuntime = 'loaded';
    };
    document.body.appendChild(script);
  });
})(document);</script>
<style type="text/css">
.listingblock [data-bash-subs]::before {
  content: attr(data-bash-subs) " ";
  opacity: .5; }

.listingblock [data-bash-conum]::before {
  content: "(" attr(data-bash-conum) ")";
  font-weight: bold;
  opacity: .7;
}</style>
<script>
(function(d){
  d.addEventListener('DOMContentLoaded', function(){
    const script = d.createElement('script');
    script.src = 'https://unpkg.com/menuspy@1.3.0/dist/menuspy.js';
    script.async = true;
    script.onload = () => new MenuSpy(document.querySelector('#toc'), {enableLocationHash: false});
    d.body.appendChild(script);
  });
})(document);</script>
<style type="text/css">
#toc li.active > a[href^="#"] {
  font-weight: bold;
}
#toc li.active > a[href^="#"]::before {
  content: "‚ñ∂ ";
  display: inline-block;
  position: absolute;
  margin-left: -1.2em;
  font-size: .8em;
  margin-top: 3px;
}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jouer avec JavaScript</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table des mati√®res</div>
<ul class="sectlevel1">
<li><a href="#definition">1. Qu&#8217;est-ce que JavaScript ?</a>
<ul class="sectlevel2">
<li><a href="#ecmascript5_aka_es5">1.1. ECMAScript&#160;5 (aka ES5)</a></li>
<li><a href="#ecmascript_2015_akaes6_puises2015">1.2. ECMAScript 2015 (aka&#160;ES6 puis&#160;ES2015)</a></li>
<li><a href="#ecmascript_2016_etc_akaes2016">1.3. ECMAScript 2016, etc. (aka&#160;ES2016)</a></li>
</ul>
</li>
<li><a href="#primitives">2. √âl√©ments de base du langage</a>
<ul class="sectlevel2">
<li><a href="#les_types_de_donn√©es">2.1. Les types de donn√©es</a></li>
<li><a href="#les_variables">2.2. Les variables</a></li>
<li><a href="#les_instructions">2.3. Les instructions</a></li>
<li><a href="#scope">2.4. La port√©e (scope)</a></li>
</ul>
</li>
<li><a href="#string">3. Jongler avec du texte (cha√Ænes de caract√®res)</a>
<ul class="sectlevel2">
<li><a href="#regexp">3.1. Expressions r√©guli√®res (RegExp)</a></li>
</ul>
</li>
<li><a href="#boolean">4. Jongler avec des valeurs vraies ou fausses (bool√©ens)</a></li>
<li><a href="#number">5. Jongler avec des valeurs num√©riques (Number, Math)</a>
<ul class="sectlevel2">
<li><a href="#op√©rations_math√©matiques">5.1. Op√©rations math√©matiques</a></li>
<li><a href="#nan">5.2. Les nombres qui n&#8217;en sont pas (<em>NaN</em>)</a></li>
<li><a href="#convertir_en_nombre">5.3. Convertir en nombre</a></li>
<li><a href="#formater_et_arrondir_des_nombres">5.4. Formater et arrondir des nombres</a></li>
</ul>
</li>
<li><a href="#functions">6. Cr√©er et r√©utiliser des blocs de code (fonctions)</a>
<ul class="sectlevel2">
<li><a href="#anonymous-function">6.1. Les fonctions anonymes</a></li>
<li><a href="#callback">6.2. Les fonctions de rappel (callback)</a></li>
<li><a href="#rest-parameters">6.3. Param√®tres du reste (rest parameters)</a></li>
</ul>
</li>
<li><a href="#array">7. Lister, filtrer et trier des √©l√©ments (Array)</a>
<ul class="sectlevel2">
<li><a href="#cr√©er_des_tableaux_√†_partir_dautres_valeurs">7.1. Cr√©er des tableaux √† partir d&#8217;autres valeurs</a></li>
<li><a href="#array.concat">7.2. Combiner des tableaux</a></li>
<li><a href="#array.forEach">7.3. It√©rer sur les valeurs avec des boucles</a></li>
<li><a href="#array.sort">7.4. Trier les valeurs</a></li>
<li><a href="#array.map">7.5. Transformer les valeurs</a></li>
<li><a href="#array.filter">7.6. Filtrer les valeurs</a></li>
<li><a href="#array.find">7.7. Identifier des valeurs</a></li>
<li><a href="#array-destructuring">7.8. D√©composition de tableau (destructuring)</a></li>
</ul>
</li>
<li><a href="#object">8. Repr√©senter des structures d&#8217;objet et y acc√©der</a>
<ul class="sectlevel2">
<li><a href="#object-destructuring">8.1. D√©composition d&#8217;objet (<em>destructuring</em>)</a></li>
<li><a href="#object.assign">8.2. Combiner des objets</a></li>
<li><a href="#it√©rer_sur_des_objets">8.3. It√©rer sur des objets</a></li>
<li><a href="#identifier_des_valeurs">8.4. Identifier des valeurs</a></li>
</ul>
</li>
<li><a href="#json">9. Lire et √©crire des donn√©es au format JSON</a></li>
<li><a href="#date">10. Interagir avec des dates</a>
<ul class="sectlevel2">
<li><a href="#intl.datetimeformat">10.1. Formatage internationalis√© (Intl.DateTimeFormat)</a></li>
</ul>
</li>
<li><a href="#class">11. Partager une logique avec des objets de m√™me nature (Class)</a>
<ul class="sectlevel2">
<li><a href="#class.method">11.1. M√©thodes d&#8217;instance</a></li>
<li><a href="#class.static">11.2. M√©thodes statiques</a></li>
<li><a href="#object-getset">11.3. Accesseurs et mutateurs</a></li>
<li><a href="#class.extends">11.4. H√©ritage</a></li>
</ul>
</li>
<li><a href="#promise">12. Coordonner des actions asynchrones (Promise)</a>
<ul class="sectlevel2">
<li><a href="#promise.all">12.1. Collection de promesses</a></li>
<li><a href="#async-await">12.2. async/await</a></li>
</ul>
</li>
<li><a href="#conclusion">13. Conclusion</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock tip context-callout">
<table>
<tr>
<td class="icon">
<div class="title">üí°</div>
</td>
<td class="content">
<div class="paragraph">
<p>Vous √™tes en train de lire le
<a href="https://oncletom.io/node.js/">livre &#8220;Node.js&#8221;</a>, √©crit par
<a href="https://oncletom.io">Thomas Parisot</a> et publi√© par les
<a href="https://www.eyrolles.com/Informatique/Livre/node-js-9782212139938/">√âditions Eyrolles</a>.</p>
</div>
<div class="paragraph">
<p>Il vous pla√Æt&#160;? Achetez-le en ligne sur
<a href="https://amzn.to/2E58PEw">Amazon</a>,
<a href="https://www.eyrolles.com/Informatique/Livre/node-js-9782212139938/">Eyrolles</a> ou
<a href="https://www.placedeslibraires.fr/livre/9782212139938">Place des Libraires</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Passons en revue les variables et structures ECMAScript pour mieux comprendre
ce qui en fait un langage √©l√©gant et moderne.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<div class="title">Sommaire</div>
<ul>
<li>
<p>Qu&#8217;est-ce que JavaScript&#160;?</p>
</li>
<li>
<p>Comprendre l&#8217;√©volution de la sp√©cification ECMAScript</p>
</li>
<li>
<p>Jongler avec les diff√©rentes structures du langage</p>
</li>
<li>
<p>En savoir plus sur des √©l√©ments avanc√©s du langage</p>
</li>
</ul>
</div>
</div>
</div>
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>JavaScript est souvent raill√©.
Parce que ce n&#8217;est pas un vrai langage.
Parce qu&#8217;il a √©t√© cr√©√© en 6 jours.
Parce qu&#8217;il n&#8217;est pas orient√© objet.</p>
</div>
<div class="paragraph">
<p>JavaScript est un langage expressif qui a √©norm√©ment gagn√© en maturit√©
depuis les ann√©es 2010.
Il se r√©v√®le parfaitement op√©rationnel d√®s lors que l&#8217;on s&#8217;int√©resse
√† ses fonctionnalit√©s, sans faire de hors-piste.</p>
</div>
<div class="paragraph">
<p>Les types de donn√©es et les m√©thodes de manipulations qu&#8217;elles nous offrent
permettent d&#8217;√©crire un code plus simple, √† lire et √† produire.
Certaines structures de donn√©es nous aident √† mieux organiser nos donn√©es
ainsi qu&#8217;√† mieux les traiter.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="definition">1. Qu&#8217;est-ce que JavaScript ?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Je vais vous pr√©senter plusieurs exemples de code.
Ils ont en commun d&#8217;√™tre tous √©crits en JavaScript.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">intro/ecmascript.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> baseUrl <span class="token operator">=</span> <span class="token string">'https://oncletom.io/node.js'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> filePath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/package.json`</span></span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet exemple illustrait la cr√©ation de variables, de cha√Ænes de caract√®res.
Ce sont des fonctionnalit√©s de base de la sp√©cification ECMAScript.</p>
</div>
<div class="listingblock prismjs highlight-prismjs">
<div class="title">intro/web.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://oncletom.io/node.js/package.json'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">pkg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pkg<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pkg<span class="token punctuation">.</span>version<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>fetch()</code> ne fait pas partie de la sp√©cification ECMAScript.
C&#8217;est un ajout des navigateurs web.
On parle alors d'<strong>API JavaScript pour le Web</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Glossaire</span> API (Interface de programmation)</div>
<div class="paragraph">
<p>Les API sont des interfaces pour dialoguer avec un programme ou une
ressource informatique.
Elles d√©finissent des vocabulaires pour ex√©cuter des actions sp√©cifiques.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock prismjs highlight-prismjs">
<div class="title">intro/dom.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> docBody <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
docBody<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La variable <code>document</code> et les m√©thodes <code>querySelector</code> et <code>addEventListener</code>
font aussi partie des API JavaScript pour le Web.
En l&#8217;occurrence, elles font partie de l&#8217;API DOM (<em>Document Object Model</em>),
un m√©canisme pour interagir avec une page web gr√¢ce √† ECMAScript.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">intro/node.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>homedir<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token function">homedir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  err <span class="token operator">?</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce dernier exemple est sp√©cifique √† Node.
Ce dernier propose la fonction <code>require()</code> pour charger des modules et interagir
avec le syst√®me d&#8217;exploitation.
</p>
</div>
<div class="paragraph">
<p>Autrement dit,
<strong>ECMAScript est un langage, une grammaire avec des fonctionnalit√©s de base</strong>.
Chaque environnement&#160;‚Äì les navigateurs web, Node&#160;‚Äì le comprend et lui ajoute
de nouvelles expressions, contextuelles √† cet environnement d&#8217;ex√©cution.
<strong>JavaScript est le grand ensemble des technologies qui reposent sur ECMAScript</strong>
pour fonctionner.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Histoire</span> √Ä propos de JavaScript</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>JavaScript est invent√© en 1995 par Brendan&#160;Eich alors qu&#8217;il est employ√© de
la soci√©t√© Netscape Communications.
Microsoft lui embo√Æte le pas en incluant JavaScript dans son logiciel
Internet&#160;Explorer, alors en version&#160;3.
Pour des raisons de droits de marque, il y est d√©nomm√© JScript.</p>
</div>
<div class="paragraph">
<p>La sp√©cification est ensuite valid√©e par l&#8217;organisme <em>Ecma International</em>
en juin 1997 sous le nom d&#8217;ECMAScript, standard ECMA-262.</p>
</div>
<div class="paragraph">
<p>Le terme JavaScript est rest√© dans le vocabulaire courant, mais, en fait,
il s&#8217;agit bien d&#8217;ECMAScript.</p>
</div>
<div class="paragraph">
<p>Adobe Flash utilise un d√©riv√© d&#8217;ECMAScript&#160;: ActionScript.
Bien des machines virtuelles sont capables d&#8217;interpr√©ter partiellement ou
int√©gralement ECMAScript&#160;: Rhino, Konq, BESEN en Object Pascal ou encore
Esprima, qui est elle-m√™me √©crite dans ce langage.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Si d&#8217;autres langages de programmation se cantonnent
soit au c√¥t√© client (VBScript, ActionScript, Elm),
soit au c√¥t√© serveur (Ruby, Python, Haskell),
JavaScript a d√©but√© c√¥t√© client pour s&#8217;√©tendre aussi c√¥t√© serveur.
Un d√©veloppeur ou une d√©veloppeuse dite <em>full&#160;stack</em> programme des applications
sur les deux fronts.
Node a cet avantage d&#8217;unifier le langage de programmation entre les environnements
client et serveur.</p>
</div>
<div class="paragraph">
<p>Le langage ECMAScript&#160;‚Äì appelons-le ainsi √† partir de maintenant&#160;‚Äì
a √©volu√© au fil du temps.
Il s&#8217;est enrichi de nouvelles fonctionnalit√©s au fil des versions, mais aussi
de sucres syntaxiques (raccourcis d&#8217;√©criture)
et de rigueur aussi, pour corriger des d√©fauts de <em>design</em>.</p>
</div>
<div class="paragraph">
<p>Le comit√© de travail TC39 (<em>Technical Committee</em>,
<span class="URL"><a href="https://github.com/tc39" class="bare">github.com/tc39</a></span>) est en charge de l&#8217;√©volution
du langage, standardis√© sous le doux sobriquet de <em>standard ECMA-262</em>,
√† charge ensuite aux diff√©rents impl√©menteurs de suivre les changements
et de les incorporer dans leurs machines virtuelles.

</p>
</div>
<div class="paragraph">
<p>Node se base sur la machine virtuelle&#160;<a href="../chapter-01/index.html#v8">V8 de Google</a>
pour interpr√©ter les expressions ECMAScript.
De fait, Node comprend les m√™mes expressions ECMAScript que&#160;V8.
</p>
</div>
<div class="paragraph">
<p>Nous verrons un peu plus tard dans ce chapitre comment suivre la
compatibilit√© de Node avec ECMAScript.
Int√©ressons-nous √† l&#8217;√©volution du langage et √† ce que √ßa nous apporte.</p>
</div>
<div class="sect2">
<h3 id="ecmascript5_aka_es5">1.1. ECMAScript&#160;5 (aka ES5)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>ECMAScript a √©t√© standardis√© dans sa version&#160;5 en d√©cembre&#160;2009.
La r√©vision&#160;5.1 de juin&#160;2011 est une correction mineure de la sp√©cification.</p>
</div>
<div class="paragraph">
<p>Il s&#8217;agit d&#8217;une √©volution majeure dans l&#8217;histoire du langage.
La pr√©c√©dente version&#160;‚Äì ECMAScript&#160;3&#160;‚Äì √©tait √¢g√©e de dix&#160;ans.</p>
</div>
<div class="paragraph">
<p>ECMAScript&#160;5 limite drastiquement certains effets ind√©sirables du langage
gr√¢ce au <em>mode strict</em>.
De nouvelles m√©thodes de manipulation de tableaux et d&#8217;objets voient le jour,
ainsi qu&#8217;une prise en charge native du format de donn√©es&#160;<a href="#json">JSON</a>.</p>
</div>
<div class="paragraph">
<p>La standardisation de cette version d&#8217;ECMAScript a contribu√© √† redorer
l&#8217;image du langage, mais aussi √† faire √©merger de nouvelles pratiques
de programmation.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Table de compatibilit√©
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://kangax.github.io/compat-table/es5/" class="bare">kangax.github.io/compat-table/es5/</a></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Sp√©cification
</td>
<td class="hdlist2">
<p>  <span class="URL"><a href="https://www.ecma-international.org/ecma-262/5.1/" class="bare">www.ecma-international.org/ecma-262/5.1/</a></span>

</p>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/compat-table.png" alt="compat table" width="85%">
</div>
<div class="title">Figure 1. Table de compatibilit√©</div>
</div>
</div>
<div class="sect2">
<h3 id="ecmascript_2015_akaes6_puises2015">1.2. ECMAScript 2015 (aka&#160;ES6 puis&#160;ES2015)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>La sp√©cification ECMAScript&#160;2015 (ES2015) a √©t√© publi√©e en juin&#160;2015.
Elle succ√®de √† ECMAScript&#160;5 apr√®s six ann√©es de gestation.
Cette version a successivement √©t√© appel√©e ECMAScript Harmony, ECMAScript&#160;6,
puis ECMAScript&#160;2015.</p>
</div>
<div class="paragraph">
<p>De nombreuses id√©es ont √©t√© pioch√©es dans le langage
CoffeeScript (<span class="URL"><a href="http://coffeescript.org" class="bare">coffeescript.org</a></span>).
Et surtout, un nouveau type d&#8217;outillage s&#8217;est form√© pour commencer
√† utiliser ce JavaScript du futur avec le compilateur
<em>traceur</em> de Google d√®s&#160;2011 (<span class="URL"><a href="https://github.com/google/traceur-compiler" class="bare">github.com/google/traceur-compiler</a></span>),
puis avec le projet ind√©pendant <em>6to5</em> d√®s&#160;2014.
Ce dernier a √©t√© renomm√© en Babel (<span class="URL"><a href="https://babeljs.io" class="bare">babeljs.io</a></span>)
et son instigateur a par la suite √©t√© embauch√© par Facebook.</p>
</div>
<div class="paragraph">
<p>La pratique de compiler du JavaScript en JavaScript √©tait en rupture
avec ce qui se faisait pr√©c√©demment&#160;:
attendre qu&#8217;une fonctionnalit√© soit adopt√©e par un d√©nominateur commun
de navigateurs web pour s&#8217;en servir.
Cette fois-ci, on pouvait se servir du futur, d√®s aujourd&#8217;hui.</p>
</div>
<div class="paragraph">
<p>De fait, il n&#8217;y a pas eu √† attendre six ans et les diff√©rentes impl√©mentations
pour profiter de ce qu&#8217;il y avait de meilleur.</p>
</div>
<div class="paragraph">
<p>Le prix √† payer&#160;? Un ticket d&#8217;entr√©e plus √©lev√© li√© √† la ma√Ætrise
de l&#8217;outillage associ√©.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Table de compatibilit√© (navigateurs&#160;web)
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://kangax.github.io/compat-table/es6/" class="bare">kangax.github.io/compat-table/es6/</a></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Table de compatibilit√© (Node.js)
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://node.green/" class="bare">node.green/</a></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Sp√©cification
</td>
<td class="hdlist2">
<p>  <span class="URL"><a href="https://www.ecma-international.org/ecma-262/6.0/" class="bare">www.ecma-international.org/ecma-262/6.0/</a></span>
</p>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/node-green.png" alt="node green" width="85%">
</div>
<div class="title">Figure 2. Illustration de l&#8217;√©volution de la compatibilit√© ECMAScript au fil des versions de&#160;Node</div>
</div>
</div>
<div class="sect2">
<h3 id="ecmascript_2016_etc_akaes2016">1.3. ECMAScript 2016, etc. (aka&#160;ES2016)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Depuis la sortie d&#8217;ECMAScript&#160;2015, l&#8217;intention est de publier une
nouvelle sp√©cification par an, de travailler les fonctionnalit√©s une par une
pour ne pas attendre trop longtemps avant de les ratifier.
En cons√©quence, les nouvelles versions annuelles sont beaucoup plus
incr√©mentales.
Elles se font moins attendre et contiennent moins de grands bouleversements.</p>
</div>
<div class="paragraph">
<p>Les fonctionnalit√©s en cours de pr√©paration sont list√©es
dans le d√©p√¥t GitHub suivant&#160;: <span class="URL"><a href="https://github.com/tc39/proposals" class="bare">github.com/tc39/proposals</a></span>.
Le dernier stade avant la validation est le <em>stage&#160;3</em>.
D√®s qu&#8217;une fonctionnalit√© passe en <em>stage&#160;4</em>, elle est incluse
dans la prochaine version d&#8217;ECMAScript
‚Äì ECMAScript&#160;2019 une fois l&#8217;ann√©e 2019 termin√©e.</p>
</div>
<div class="paragraph">
<p>Les fonctionnalit√©s approuv√©es sont consign√©es dans un document&#160;:
<span class="URL"><a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md" class="bare">github.com/tc39/proposals/blob/master/finished-proposals.md</a></span>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="primitives">2. √âl√©ments de base du langage</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Cette section d√©crit les notions n√©cessaires
pour s&#8217;approprier le reste des exemples de l&#8217;ouvrage.
On apprendra notamment √† cr√©er des variables, √† naviguer dans
des listes d&#8217;√©l√©ments et √† faire la diff√©rence
entre un objet et une fonction.</p>
</div>
<div class="sect2">
<h3 id="les_types_de_donn√©es">2.1. Les types de donn√©es</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Qu&#8217;entend-on par <em>type de donn√©es</em>&#160;?
Faisons-nous notre propre id√©e avec une suite d&#8217;exemples.
Ces notions seront d√©velopp√©es dans le reste du chapitre,
pour mieux comprendre ce que l&#8217;on peut en faire.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/string.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'Node.js'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Une valeur entour√©e de guillemets est consid√©r√©e
par l&#8217;interpr√©teur ECMAScript comme une cha√Æne de caract√®res, du texte.

</p>
</div>
<div class="paragraph">
<p>Ces guillemets sont selon les cas des guillemets simples&#160;('),
doubles (") ou obliques (`).</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations d&#8217;identification ou d&#8217;assemblage avec une
valeur de type <strong>cha√Æne de caract√®res</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/number.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token number">3</span>

<span class="token number">12.3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ECMAScript consid√®re les entiers (<code>3</code>&#160;dans cet exemple)
et les r√©els (<code>12.3</code>&#160;dans cet exemple) comme des nombres.
Il ne fait <em>pas</em> de distinction entre les&#160;deux.

</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations math√©matiques entre plusieurs
valeurs de type <strong>nombre</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/boolean.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token boolean">true</span>

<span class="token boolean">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ECMAScript consid√®re deux valeurs pour signifier <em>vrai</em> ou <em>faux</em>&#160;:
respectivement <code>true</code> et <code>false</code>.

</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations logiques avec une
valeur de type <strong>bool√©en</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/null.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">null</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise <code>null</code> pour signifier l'<strong>absence de valeur</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/undefined.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">undefined</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La valeur <code>undefined</code> est utilis√©e pour signifier
qu&#8217;une <strong>valeur</strong> est <strong>inconnue</strong>.
Rares sont les cas o√π on choisira ce type de donn√©es par nous-m√™me.

</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Primitives</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur primitives.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Data_structures" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Data_structures</a>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Il existe trois autres types de donn√©es qui se basent sur ces types
dits <em>primitifs</em>.
Ils sont destin√©s √† ranger, √† classer et √† exprimer de nouvelles valeurs
en fonction d&#8217;autres.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/array.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Un tableau se d√©clare en encadrant une suite de valeurs entre crochets.
Il est capable de contenir n&#8217;importe quel type de valeurs et autant que n√©cessaire.
L&#8217;ordre des valeurs a g√©n√©ralement une importance.

</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations de tri et de s√©lection avec un
<strong>tableau de valeurs</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/object.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  isbn<span class="token punctuation">:</span> <span class="token string">'978-2212139938'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Un objet se d√©clare en encadrant une suite de <em>paires cl√©/valeur</em>
entre accolades.
Il fonctionne comme un <em>dictionnaire</em>&#160;: on associe une valeur (type au choix)
√† une cl√© (un intitul√©, un label).
L&#8217;ordre des paires n&#8217;a g√©n√©ralement pas d&#8217;importance.

</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations de s√©lection avec un
<strong>objet de valeurs</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/function.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">function</span> <span class="token function">double</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">double</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fonction accepte des <em>arguments</em>, de n&#8217;importe quel type et
autant que n√©cessaire.
Elle doit √™tre <em>d√©clar√©e</em> pour √™tre <em>ex√©cut√©e</em>
(derni√®re ligne de l&#8217;exemple pr√©c√©dent).

</p>
</div>
<div class="paragraph">
<p>Une fonction <em>retourne</em> un r√©sultat explicite avec le
mot-cl√© <code>return</code>.
Dans le cas contraire, ECMAScript consid√®re
que la valeur retourn√©e √©quivaut implicitement √† <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>On peut effectuer des op√©rations de transformation avec une fonction.</p>
</div>
<div class="paragraph">
<p>Les fonctions sont destin√©es √† √™tre <em>appel√©es</em>, pour effectuer
des traitements r√©p√©titifs.
D√®s que l&#8217;on doit √©crire deux fois la m√™me chose,
on l&#8217;√©crit dans une fonction qu&#8217;on appelle deux&#160;fois.</p>
</div>
</div>
<div class="sect2">
<h3 id="les_variables">2.2. Les variables</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Les variables servent √† ranger des valeurs.
On peut ainsi les r√©utiliser plus tard, les transmettre et prendre
des d√©cisions en fonction de ce qu&#8217;elles contiennent.</p>
</div>
<div class="paragraph">
<p>Les variables nous aident √† <em>donner du sens</em> √† notre code,
√† le rendre intelligible par d&#8217;autres personnes
ainsi qu&#8217;√† nommer des choses comme on le ferait dans notre quotidien.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/variables.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  isbn<span class="token punctuation">:</span> <span class="token string">'978-2212139938'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> base_price <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">double</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

book<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token function">double</span><span class="token punctuation">(</span>base_price<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>√Ä votre avis, quel est le prix du livre calcul√© dans
l&#8217;exemple pr√©c√©dent&#160;?
Il suffit de suivre le chemin que prend la nouvelle valeur
rang√©e dans la cl√© <code>price</code> de l&#8217;objet <code>book</code>, calcul√©e par la fonction
<code>double</code> √† laquelle on passe la valeur contenue dans la variable <code>base_price</code>.</p>
</div>
<div class="paragraph">
<p>Le mot-cl√© <code>const</code> nous a servi √† <em>d√©clarer</em> une variable.
On ne peut √©tiqueter ainsi une variable avec le m√™me nom qu&#8217;une seule fois.
L&#8217;exemple suivant g√©n√©rera une erreur lors de la deuxi√®me affectation&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">variables/const.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> base_price <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> base_price <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Question</span> Une variable constante ?</div>
<div class="paragraph">
<p><code>const</code> est un type de variable qui ne peut √™tre ni red√©clar√© ni √™tre r√©affect√©&#160;:
c&#8217;est en √ßa qu&#8217;il est <em>constant</em>.</p>
</div>
<div class="paragraph">
<p>Une variable <code>const</code> n&#8217;emp√™che pas la modification de son contenu, dans le cas
d&#8217;un tableau ou d&#8217;un objet.
La fonction <code>Object.freeze()</code> est une r√©ponse adapt√©e pour garantir son immuabilit√©.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">variables/const-freeze.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> table <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

table<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(1)</b></span>

Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>
table<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[ 'a', 'b', 'c' ]</code>.</p>
</li>
<li>
<p>L&#8217;objet <code>table</code> est gel√© gr√¢ce √† la fonction <code>Object.freeze()</code>.</p>
</li>
<li>
<p>Cette ligne lance une erreur car nous tentons de modifier un objet gel√©.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
</div>
<div class="sect2">
<h3 id="les_instructions">2.3. Les instructions</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Des <em>instructions</em> nous servent √† suivre, √©viter ou r√©p√©ter
des chemins dans notre code.</p>
</div>
<div class="paragraph">
<p>L&#8217;instruction&#160;<code>if</code> ex√©cute du code s&#8217;il remplit une condition.
Cette derni√®re peut √™tre une <em>valeur</em> ou une <em>expression</em> interpr√©t√©e
pour savoir √† quel <em>bool√©en</em> elle correspond.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">instructions/if.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span>published <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span> book<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le livre est publi√© (et a un titre)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent v√©rifie que les deux conditions sont remplies
(op√©rateur <code>&amp;&amp;</code>) pour afficher un message en cons√©quence.
</p>
</div>
<div class="paragraph">
<p>On notera au passage que <code>book.title</code> n&#8217;est pas un bool√©en.
ECMAScript regarde dans ce cas que la cha√Æne de caract√®res
contient <em>au moins un caract√®re</em>.
On expliquera ce comportement plus en d√©tail dans la section
&#8220;<a href="#boolean">Jongler avec des valeurs vraies ou fausses</a>&#8221;.</p>
</div>
<div class="paragraph">
<p>L&#8217;instruction&#160;<code>if</code> peut √™tre compl√©t√©e avec l&#8217;instruction <code>else</code>
pour ex√©cuter du code qui r√©pondrait au cas contraire.
Il est possible d&#8217;imbriquer plusieurs <code>else if</code> √† la suite.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">instructions/else-if.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span>published <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span> book<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le livre est publi√© avec un titre.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span>published<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le livre est publi√© (sans titre).'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le livre n\'est pas publi√©.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre exemple n&#8217;empruntera qu&#8217;un seul des chemins, mais on constate
qu&#8217;on pourrait en emprunter un autre
en modifiant la valeur des cl√©s <code>title</code> et <code>published</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="scope">2.4. La port√©e (scope)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>La <em>port√©e</em> est un concept tr√®s pr√©sent dans ECMAScript.
On y fait souvent r√©f√©rence en parlant de <em>variable globale</em>&#160;et
de <em>variable locale</em>.
C&#8217;est une sorte de fronti√®re d&#8217;acc√®s √† la valeur
d&#8217;une variable.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">scopes/local.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">function</span> <span class="token function">secret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'devinette'</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token string">'None shall pass'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">secret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans cet exemple, la variable <code>secret</code> de type fonction a une port√©e globale au script.
En revanche, la variable <code>mot</code> est d√©finie dans la fonction <code>secret</code>
et n&#8217;est donc pas accessible en dehors de la port√©e de la fonction.
√Ä l&#8217;inverse, ce qui est d√©fini <em>en dehors</em> d&#8217;une fonction
est accessible <em>√† l&#8217;int√©rieur</em> d&#8217;une fonction.</p>
</div>
<div class="paragraph">
<p>La port√©e de la variable <code>mot</code> est locale √† la fonction <code>secret</code>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">scopes/global.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> year <span class="token operator">=</span> <span class="token number">2018</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">nextYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">nextYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, nous illustrons la port√©e globale de la variable
<code>year</code>.
Elle est d√©finie un cran au-dessus des fonctions <code>next</code> et <code>nextYear</code>.
On peut y acc√©der, comme en atteste le code de la fonction <code>nextYear</code>.</p>
</div>
<div class="paragraph">
<p>√Ä l&#8217;inverse, la variable <code>value</code> a une port√©e locale
‚Äì elle est pass√©e en param√®tre de la fonction <code>next</code>.
ECMAScript g√©n√®rera une erreur si on tente
d&#8217;y acc√©der en dehors de sa port√©e.</p>
</div>
<div class="paragraph">
<p><strong>La port√©e est d√©limit√©e par les fonctions</strong>.
En l&#8217;absence de fonction, la port√©e maximale est celle du module (script)
dans lequel la variable est d√©clar√©e.</p>
</div>
<div class="paragraph">
<p>Il existe un deuxi√®me type de port√©e&#160;: la <em>port√©e lexicale</em>.
L&#8217;exemple suivant servira √† illustrer la nature de sa d√©limitation.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">scopes/lexical.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span>published<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> price <span class="token operator">=</span> <span class="token number">32</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Le livre </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> co√ªte </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>price<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">‚Ç¨.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Le livre </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> co√ªte </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>price<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">‚Ç¨.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le mot-cl√© <code>const</code> cr√©e une variable certes,
mais une variable dont la port√©e est <em>lexicale</em>.
<strong>La port√©e lexicale est d√©limit√©e par le bloc d&#8217;instructions</strong>
dans lequel la variable est d√©clar√©e.
</p>
</div>
<div class="paragraph">
<p>Ainsi, la variable <code>price</code> n&#8217;existe que dans le cadre du bloc <code>if</code>.</p>
</div>
<div class="paragraph">
<p>La port√©e lexicale sert √† d√©clarer des variables sans "polluer" le reste du script,
pour que son existence soit oubli√©e aussit√¥t le bloc ex√©cut√©.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="string">3. Jongler avec du texte (cha√Ænes de caract√®res)</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Il est commun d&#8217;avoir √† travailler avec des cha√Ænes de caract√®res.
Elles servent √† stocker des URL, des titres, des identifiants,
des tweets, des messages et des textes longs, entre autres.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token comment">// Utilisation de guillemets simples</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'L\'apr√®s-midi\nLe soir'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token comment">// Utilisation de guillemets doubles</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"L'apr√®s-midi\nLe soir"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token comment">// Utilisation de guillemets obliques</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`L'apr√®s-midi
Le soir`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>                              <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Utilisation de guillemets simples (<code>\n</code> sert √† revenir √† la ligne).</p>
</li>
<li>
<p>Utilisation de guillemets doubles&#160;: √©vite d&#8217;√©chapper le guillemet simple.</p>
</li>
<li>
<p>Utilisation de guillemets obliques&#160;: autorise l&#8217;√©criture sur plusieurs lignes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Tous les caract√®res sont utilisables&#160;: lettres, chiffres,
caract√®res accentu√©s, √©mojis et m√™me des sinogrammes ou des kanjis.
Autrement dit, il n&#8217;y a pas de limite.
Les environnements d&#8217;ex√©cution se repr√©sentent les caract√®res au format
UTF-16 (tables de stockage Unicode sur 16&#160;bits de donn√©es).</p>
</div>
<div class="paragraph">
<p>Il est fr√©quent d&#8217;avoir √† <em>concat√©ner</em> des cha√Ænes de caract√®res,
ou √† les composer √† partir d&#8217;une autre variable.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/concat.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'pot'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mot<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> de colle`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mot<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> de fleur`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Toute cha√Æne de caract√®res offre un ensemble
d'<em>attributs</em> (<code>.quelque-chose</code>)
et de <em>m√©thodes</em> (<code>.autre-chose()</code>) pour en savoir plus
sur la cha√Æne mais aussi pour la transformer.</p>
</div>
<div class="paragraph">
<p>Par exemple, on conna√Æt la longueur d&#8217;une cha√Æne via son attribut <code>length</code>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/length.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ‚ô• JavaScript'</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>14</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>0</code>.
</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On acc√®de √† un caract√®re sp√©cifique en utilisant
la cha√Æne comme un tableau, ou √† l&#8217;aide d&#8217;une m√©thode d√©di√©e&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/char-at.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'Node.js'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>N</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>o</code>.
</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">üö®</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Attention</span></div>
<div class="paragraph">
<p>Le premier caract√®re d&#8217;une cha√Æne est √† l&#8217;index&#160;0 et non pas √†&#160;1.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Deux autres fonctions transforment
un texte en lettres minuscules ou majuscules&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/lower-upper-case.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'Node.js'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">toLocaleUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>node.js</code>.</p>
</li>
<li>
<p>Affiche <code>NODE.JS</code>.

</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>D&#8217;autres fonctions nettoient ou compl√®tent les espaces autour,
au d√©but ou √† la fin d&#8217;une cha√Æne de caract√®res&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/trim-pad.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'  Node.js  '</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">trimLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">trimRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span>

<span class="token keyword">const</span> swiftCode <span class="token operator">=</span> <span class="token string">'BARCGB22'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>swiftCode<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>Node.js</code>.</p>
</li>
<li>
<p>Affiche <code>Node.js&#160;&#160;</code>.</p>
</li>
<li>
<p>Affiche <code>&#160;&#160;Node.js</code>.</p>
</li>
<li>
<p>Affiche <code>BARCGB22XXX</code>.
</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Dans cet exemple, la m√©thode <code>padEnd</code> compl√®te jusqu&#8217;√† <code>11</code>&#160;caract√®res,
avec la lettre <code>X</code>.
La m√©thode <code>padStart</code> fait la m√™me chose mais avec le d√©but de la cha√Æne.

</p>
</div>
<div class="paragraph">
<p><code>indexOf</code> retourne la position de la <em>premi√®re occurrence</em> dans une cha√Æne
d&#8217;une sous-cha√Æne pass√©e en param√®tre.
Si la valeur n&#8217;est pas trouv√©e, la m√©thode renvoie la valeur&#160;<code>-1</code>.
√Ä l&#8217;inverse, <code>lastIndexOf</code> retournera la derni√®re occurrence trouv√©e&#160;:

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/index-of.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ‚ô• JavaScript'</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'JavaScript'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ‚ô• JavaScript'</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ‚ô• JavaScript'</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ‚ô• JavaScript'</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Retourne&#160;<code>4</code>.</p>
</li>
<li>
<p>Retourne&#160;<code>-1</code>&#160;‚Äì aucune occurrence n&#8217;a √©t√© trouv√©e.</p>
</li>
<li>
<p>Retourne&#160;<code>5</code>&#160;‚Äì premi√®re occurrence de la lettre&#160;<code>a</code>.</p>
</li>
<li>
<p>Retourne&#160;<code>7</code>&#160;‚Äì derni√®re occurrence de la lettre&#160;<code>a</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="regexp">3.1. Expressions r√©guli√®res (RegExp)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Si <code>indexOf</code> et <code>lastIndexOf</code> identifient des caract√®res exacts,
comment faire lorsque l&#8217;on souhaite chercher de mani√®re approximative,
plusieurs fois et selon certaines conditions&#160;?</p>
</div>
<div class="paragraph">
<p>Les <em>expressions r√©guli√®res</em> (<em>RegExp</em>, pour <em>Regular Expressions</em>)
entrent en jeu dans ces cas plus avanc√©s.
Leur m√©canisme d√©crit des <em>motifs</em> √† identifier.
Plusieurs <em>m√©thodes</em> servent ensuite √† tester, identifier et remplacer
ces motifs au sein d&#8217;une cha√Æne de caract√®res.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">üí°</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Anecdote</span> RegExp et Perl</div>
<div class="paragraph">
<p>La syntaxe d&#8217;expressions r√©guli√®res est inspir√©e de celle du langage
de programmation Perl (<span class="URL"><a href="https://www.perl.org" class="bare">www.perl.org</a></span>) dans sa version&#160;5.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une expression r√©guli√®re est d√©crite le plus souvent en tant que motif
encadr√© par des barres obliques, suffix√© d'<em>options</em> exprim√©es sous forme de lettres&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token regex">/[a-z]+.js/i</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet exemple utilise l&#8217;option&#160;<code>i</code> mais il en existe plusieurs&#160;:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Insensible √† la casse&#160;(<code>i</code>)
</td>
<td class="hdlist2">
<p>On souhaite identifier du contenu, peu importe s&#8217;il est en majuscules ou non.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Multiligne&#160;(<code>m</code>)
</td>
<td class="hdlist2">
<p>La recherche s&#8217;effectue sur <em>toutes</em> les lignes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Global&#160;(<code>g</code>)
</td>
<td class="hdlist2">
<p>La recherche identifie <em>tous</em> les r√©sultats&#160;‚Äì au lieu du seul premier.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Unicode&#160;(<code>u</code>)
</td>
<td class="hdlist2">
<p>S&#8217;utilise si le motif de recherche exprime des s√©quences de caract√®res
Unicode sous la forme&#160;<code>\u{&#8230;&#8203;}</code> (voir les <em>classes de caract√®res</em> ci-apr√®s).</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Illustrons leur utilisation en <em>identifiant du texte</em> r√©pondant (<code>match</code>)
√† une <em>expression r√©guli√®re</em>&#160;(<code>/&#8230;&#8203;/</code>)&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/flags.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">'I ‚ô• Node.js &amp;amp; Anode'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/node/i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/ode/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/node/ig</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Identifie et affiche <code>Node</code>, l&#8217;occurrence contenue dans le mot <code>Node.js</code>.</p>
</li>
<li>
<p>Affiche deux fois <code>ode</code>&#160;‚Äì les occurrences contenues dans les mots <code>Node.js</code> et <code>Anode</code>.</p>
</li>
<li>
<p>Affiche <code>Node</code> et <code>node</code> en combinant les deux options&#160;<code>i</code> et&#160;<code>g</code>&#160;‚Äì les occurrences contenues dans les mots <code>Node.js</code> et <code>Anode</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Des √©l√©ments de syntaxe compl√®tent les options pour
identifier des motifs au sein de cha√Ænes de caract√®res&#160;:
</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ensemble de caract√®res (entre&#160;<code>[</code>&#160;et&#160;<code>]</code>)</dt>
<dd>
<p>Liste l&#8217;ensemble des caract√®res recherch√©s.
Le caract√®re&#160;<code>-</code> indique une plage de caract√®res.
(ex. <code>[a-d]</code> correspond √† <code>[abcd]</code>, donc <em>a</em> ou&#160;_b_ ou&#160;_c_&#160;ou&#160;_d_).</p>
</dd>
<dt class="hdlist1">Nombre de caract√®res (entre&#160;<code>{</code>&#160;et&#160;<code>}</code>)</dt>
<dd>
<p>R√©p√®te un caract√®re ou une sous-cha√Æne&#160;;
<em>exactement</em> (<code>{2}</code>&#160;‚Äì exactement deux fois),
<em>au moins</em> (<code>{2,}</code>&#160;‚Äì au moins deux fois)
ou <em>entre</em> (<code>{1,2}</code>&#160;‚Äì entre une et deux fois).</p>
</dd>
<dt class="hdlist1">Nombre de caract√®res (<code>?</code>,&#160;<code>+</code>&#160;et&#160;<code>*</code>)</dt>
<dd>
<p>Version raccourcie du nombre de caract√®res pour des besoins usuels&#160;:
0&#160;ou&#160;1 caract√®re avec&#160;<code>?</code>,
1 caract√®re et plus avec&#160;<code>+</code> et
0 caract√®re et plus avec&#160;<code>*</code>.</p>
</dd>
</dl>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/syntax.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> paris15 <span class="token operator">=</span> <span class="token string">'75015 Paris'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> avray <span class="token operator">=</span> <span class="token string">'92410 Ville-d\'Avray'</span><span class="token punctuation">;</span>

<span class="token comment">// test du code postal uniquement</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paris15<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{2}/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paris15<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{2,5}/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token comment">// test du code postal et de la ville</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paris15<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{5} [a-zA-Z]+/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paris15<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{5} [a-z]+/i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(4)</b></span>

<span class="token comment">// test sur un nom de ville compos√©</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>avray<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{5} [a-z]+/i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>avray<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{5} [a-z'-]+/i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["75"]</code>&#160;‚Äì les 2&#160;premiers caract√®res num√©riques de la cha√Æne.</p>
</li>
<li>
<p>Affiche <code>["75015"]</code>&#160;‚Äì les 5&#160;premiers caract√®res num√©riques (satisfait la condition&#160;<code>5</code> de&#160;<code>{2,5}</code>).</p>
</li>
<li>
<p>Affiche <code>["75015 Paris"]</code>.</p>
</li>
<li>
<p>Affiche <code>["75015 Paris"]</code>&#160;‚Äì l&#8217;option&#160;<code>i</code> √©vite de pr√©ciser l&#8217;ensemble&#160;<code>A-Z</code>.</p>
</li>
<li>
<p>Affiche <code>["92410 Ville"]</code>&#160;‚Äì capture les caract√®res jusqu&#8217;√† ce que la condition ne soit plus remplie en rencontrant le trait d&#8217;union&#160;(<code>-</code>).</p>
</li>
<li>
<p>Affiche <code>["92410 Ville-d&#8217;Avray"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>D&#8217;autres op√©rateurs d√©limitent notre recherche&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">D√©but et fin de cha√Æne (<code>^</code>&#160;et&#160;<code>$</code>)</dt>
<dd>
<p>Quand l&#8217;option multiligne (<code>m</code>) est utilis√©e, les notions de d√©but
et de fin s&#8217;appliquent au niveau de la ligne.</p>
</dd>
<dt class="hdlist1">Limite de mot&#160;(<code>\b</code>)</dt>
<dd>
<p>Symbolise tout caract√®re ne faisant pas partie d&#8217;un mot, y compris le d√©but
ou la fin d&#8217;une cha√Æne.</p>
</dd>
<dt class="hdlist1">Ou&#160;(<code>|</code>)</dt>
<dd>
<p>S√©pare deux choix (ex. <code>/noir|blanc/</code>).</p>
</dd>
<dt class="hdlist1">Groupe de capture (entre&#160;<code>(</code>&#160;et&#160;<code>)</code>)</dt>
<dd>
<p>  D√©limite un groupe de caract√®res.
  Les groupes peuvent par la suite √™tre <em>identifi√©s</em> et <em>remplac√©s</em>.<br>
  On notera √©galement que l&#8217;emploi des <em>groupes</em> change
  la structure des r√©sultats en un tableau de plusieurs √©l√©ments,
  de la forme <code>["cha√Æne identifi√©e", "groupe 1", "groupe 2" &#8230;&#8203;]</code>.
</p>
</dd>
</dl>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/limits.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> postcode <span class="token operator">=</span> <span class="token string">'75015 Paris'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cedex <span class="token operator">=</span> <span class="token template-string"><span class="token string">`CODEPOSTAL VILLE CEDEX
33900 Bordeaux Cedex 9
33074 BORDEAUX CEDEX
33700 MERIGNAC Cidex 40`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nogroup <span class="token operator">=</span> <span class="token regex">/^[0-9]{5} [a-z0-9' -]+/i</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> group <span class="token operator">=</span> <span class="token regex">/^([0-9]{5}) [a-z0-9' -]+/i</span><span class="token punctuation">;</span>

<span class="token comment">// avec ou sans groupe de capture</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>postcode<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>nogroup<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>postcode<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token comment">// mode multiligne avec ou sans option globale</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cedex<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^([0-9]{5})/im</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cedex<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^([0-9]{5})/gim</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["75015 Paris"]</code>.</p>
</li>
<li>
<p>Affiche <code>["75015 Paris", "75015"]</code>&#160;‚Äì le premier √©l√©ment correspond √† la cha√Æne identifi√©e tandis que le second correspond au <em>premier</em> groupe de capture.</p>
</li>
<li>
<p>Affiche <code>["33900", "33900"]</code>&#160;‚Äì l&#8217;option multiligne it√®re de ligne en ligne jusqu&#8217;√† trouver un motif.</p>
</li>
<li>
<p>Affiche <code>["33900", "33074", "33700"]</code>&#160;‚Äì l&#8217;option multiligne globale retourne tous les groupes de capture.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On notera qu&#8217;il faut faire attention √† ce que l&#8217;on regarde&#160;:
le format de r√©sultat varie selon qu&#8217;on utilise ou non des groupes de capture et
selon qu&#8217;on utilise l&#8217;option globale ou multiligne.</p>
</div>
<div class="paragraph">
<p>Des symboles servent de raccourcis pour d√©signer
plusieurs caract√®res simultan√©ment&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Tout caract√®re&#160;(<code>.</code>)</dt>
<dd>
<p>tout caract√®re sauf le saut de ligne.</p>
</dd>
<dt class="hdlist1">Caract√®re de mot&#160;(<code>\w</code>)</dt>
<dd>
<p>Tout caract√®re pouvant composer un mot anglais&#160;:
les caract√®res accentu√©s ne sont pas englob√©s
(identique √† <code>[A-Za-z0-9_]</code>).</p>
</dd>
<dt class="hdlist1">Caract√®re num√©rique&#160;(<code>\d</code>)</dt>
<dd>
<p>Identique √†&#160;<code>[0-9]</code>.</p>
</dd>
<dt class="hdlist1">Caract√®re d&#8217;espacement&#160;(<code>\s</code>)</dt>
<dd>
<p>Tout caract√®re d&#8217;espacement&#160;: espace, tabulation, retour chariot, etc.</p>
</dd>
<dt class="hdlist1">Caract√®re Unicode&#160;(<code>\u{&#8230;&#8203;}</code>)</dt>
<dd>
<p>  Doit √™tre combin√© avec l&#8217;option&#160;<code>u</code> (<code>/&#8230;&#8203;/u</code>).
  Exemple&#160;: ‚ô•Ô∏é&#160;&#8594;&#160;<code>\u{2665}</code>.
</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Les alternatives de classes en majuscules sont des <em>n√©gations</em>.
<code>\W</code>&#160;pour "tout sauf un caract√®re de mot", <code>\S</code>&#160;pour "tout sauf un caract√®re
d&#8217;espacement", etc.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/classes.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">'I ‚ô• RegExp in 2018'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\u{2665} (\w+)/u</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>iLove<span class="token punctuation">,</span>year<span class="token punctuation">]</span> <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^(I \u{2665}).+(\d{4})$/u</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>iLove<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["‚ô• RegExp", "RegExp"]</code>&#160;‚Äì et s&#8217;arr√™te l√† car l&#8217;espace suivant n&#8217;est pas un caract√®re de&#160;mot.</p>
</li>
<li>
<p>Affiche <code>"I ‚ô• 2019"</code>&#160;‚Äì on a extrait le d√©but de la phrase et l&#8217;ann√©e plac√©e en fin de cha√Æne.
</p>
</li>
</ol>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Expressions r√©guli√®res</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les expressions r√©guli√®res.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/RegExp" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/RegExp</a>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La m√©thode <code>test</code> est pratique si la seule chose qui vous int√©resse
est de tester si une cha√Æne correspond √† un motif&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/test.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> cedex <span class="token operator">=</span> <span class="token template-string"><span class="token string">`CODEPOSTAL VILLE CEDEX
33900 Bordeaux Cedex 9
33074 BORDEAUX CEDEX
33700 MERIGNAC Cidex 40`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> postcode_tester <span class="token operator">=</span> <span class="token regex">/^\d{5}\s/m</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>postcode_tester<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>cedex<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cedex<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^(\d{5})\b/gm</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, la m√©thode <code>replace</code> est tr√®s utile pour transformer des cha√Ænes de
caract√®res, surtout en combinaison avec les groupes de capture&#160;:

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/replace.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> t <span class="token operator">=</span> <span class="token string">'I ‚ô• JavaScript'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'‚ô•'</span><span class="token punctuation">,</span> <span class="token string">'love'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\b\w+$/</span><span class="token punctuation">,</span> <span class="token string">'PHP'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> text <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^.+(\u{2665}) (\w+)$/u</span><span class="token punctuation">,</span> <span class="token string">'$2 $1 me'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"I love JavaScript"</code>&#160;‚Äì si le premier argument de <code>replace</code> est une cha√Æne, elle est convertie automatiquement en expression r√©guli√®re.</p>
</li>
<li>
<p>Affiche <code>"I ‚ô• PHP"</code>.</p>
</li>
<li>
<p>Affiche <code>"JavaScript ‚ô• me"</code>&#160;‚Äì les symboles <code>$&lt;num√©ro&gt;</code> repr√©sentent les groupes de capture, qu&#8217;on place dans l&#8217;ordre de notre choix.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le second argument accepte une <a href="#functions">fonction</a>
pour proc√©der √† des remplacements dynamiques&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/replace-function.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">'I ‚ô• JavaScript'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> shout <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\b(\w+)$/u</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">pattern<span class="token punctuation">,</span> lang</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> lang<span class="token punctuation">.</span><span class="token function">toLocaleUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>shout<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"I ‚ô• JAVASCRIPT"</code>&#160;‚Äì le dernier mot est transform√© en majuscules.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="boolean">4. Jongler avec des valeurs vraies ou fausses (bool√©ens)</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Un bool√©en est un √©l√©ment logique dont la valeur est soit <code>true</code> soit <code>false</code>,
c&#8217;est-√†-dire respectivement <em>vrai</em> ou <em>faux</em>.
Ce type de valeur sert √† exprimer des r√©sultats de condition
("si&#160;√ßa alors&#160;‚Ä¶ sinon") ainsi qu&#8217;√† affirmer ou infirmer quelque chose.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">boolean/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> check <span class="token operator">=</span> <span class="token punctuation">(</span>counter <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>check <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì la condition est v√©rifi√©e.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì c&#8217;est la valeur de la variable <code>check</code> suite √† son affectation √† la ligne pr√©c√©dente.</p>
</li>
<li>
<p>Affiche <code>true</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une donn√©e d&#8217;un autre type peut √™tre convertie en bool√©en.
La logique qui d√©terminera si la conversion retournera <code>true</code> ou <code>false</code>
est la suivante&#160;:

</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>true</code>
</td>
<td class="hdlist2">
<p>Toute valeur non&#160;nulle.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>false</code>
</td>
<td class="hdlist2">
<p>Toute valeur nulle (<code>null</code>, <code>0</code>,&#160;<code>NaN</code>), vide (<code>''</code>)
ou ind√©finie (<code>undefined</code>).</p>
</td>
</tr>
</table>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">boolean/convert.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(3)</b></span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>counter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'if (counter) √©quivaut √† if (Boolean(counter))'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;‚Äì il s&#8217;agit d&#8217;une cha√Æne&#160;vide.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì il s&#8217;agit d&#8217;une valeur non&#160;nulle.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì le tableau est vide mais l&#8217;objet en lui-m√™me <em>vaut</em> quelque chose&#160;: un tableau.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="number">5. Jongler avec des valeurs num√©riques (Number, Math)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph">
<p>ECMAScript ne fait pas de distinction entre des entiers et des
nombres contenant des d√©cimales&#160;: ce sont des <em>nombres</em> un point c&#8217;est tout.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">40.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">40</span> <span class="token operator">===</span> <span class="token number">40.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">40</span> <span class="token operator">===</span> <span class="token string">'40.0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>&#160;‚Äì les deux valeurs sont strictement √©quivalentes.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì un √©l√©ment entre guillemets est une cha√Æne de caract√®res, pas un nombre.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les nombres sont repr√©sent√©s par d√©faut en <em>base&#160;10</em>.
La plage de nombres utilisable dans un programme est d√©finie par des
constantes ECMAScript&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/constants.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">POSITIVE_INFINITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">NEGATIVE_INFINITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(4)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MIN_SAFE_INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>Infinity</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>-Infinity</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>1.7976931348623157e+308</code>&#160;‚Äì le plus grand r√©el utilisable.</p>
</li>
<li>
<p>Affiche&#160;<code>5e-324</code>&#160;‚Äì le plus petit r√©el utilisable.</p>
</li>
<li>
<p>Affiche&#160;<code>9007199254740991</code>&#160;‚Äì le plus grand entier utilisable.</p>
</li>
<li>
<p>Affiche&#160;<code>-9007199254740991</code>&#160;‚Äì le plus petit entier utilisable.





</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Il est aussi possible de compter dans d&#8217;autres bases, notamment en hexad√©cimal
(<em>base&#160;16</em>).
Cette derni√®re est exprim√©e en pr√©fixant la valeur par&#160;<code>0x</code> et avec les
caract√®res de&#160;0 √†&#160;F&#160;‚Äì 0&#160;√†&#160;9 puis A (vaut&#160;10),
B (vaut&#160;11), etc.


</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/hexa.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0x000A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0x00A0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0x0A00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>0</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>10</code>&#160;‚Äì car <code>A</code>&#160;en hexad√©cimal vaut&#160;10 en d√©cimal.</p>
</li>
<li>
<p>Affiche&#160;<code>160</code>&#160;‚Äì pour <code>10√ó16</code> (une &#8220;dizaine&#8221; vaut&#160;16).</p>
</li>
<li>
<p>Affiche&#160;<code>2560</code>&#160;‚Äì pour <code>10√ó16√ó16</code> (une &#8220;centaine&#8221; vaut&#160;16√ó16).</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Rumeur</span> JavaScript est nul en virgule flottante !</div>
<div class="paragraph">
<p>
ECMAScript est souvent d√©cri√© pour son incapacit√© √† g√©rer les op√©rations
math√©matiques avec pr√©cision.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token number">0.2</span> <span class="token operator">+</span> <span class="token number">0.6</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ECMAScript respecte le standard <em>IEEE&#160;754</em> de gestion de nombres √† virgule
flottante sur 64&#160;bits de donn√©es.
Qui d&#8217;autre l&#8217;utilise&#160;?
D&#8217;autres langages "inconnus" comme Python, PHP et Ruby, entre autres.</p>
</div>
<div class="paragraph">
<p>Pour en savoir plus&#160;: <span class="URL"><a href="https://fr.wikipedia.org/wiki/IEEE_754" class="bare">fr.wikipedia.org/wiki/IEEE_754</a></span>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="op√©rations_math√©matiques">5.1. Op√©rations math√©matiques</h3>
<div class="paragraph">
<p>Les nombres s&#8217;utilisent pour effectuer des op√©rations math√©matiques.
Chaque op√©ration est dot√©e d&#8217;un symbole&#160;:
</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Op√©ration</th>
<th class="tableblock halign-left valign-top">Symbole</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">addition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">soustraction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiplication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">division</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modulo (reste de division)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">exposant (puissance)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code></p></td>
</tr>
</tbody>
</table>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/operations.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(4)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">**</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>6</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>-2</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>8</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>0.5</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>2</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>16</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="nan">5.2. Les nombres qui n&#8217;en sont pas (<em>NaN</em>)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">‚ö†Ô∏è</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Attention</span> Op√©rations exotiques</div>
<div class="paragraph">
<p>Est-ce que vous avez d√©j√† tent√© d&#8217;additionner un nombre avec un tableau&#160;?
Pas forc√©ment, mais ECMAScript ne vous en emp√™chera pas.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/operations-types.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(4)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">+</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">+</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La cha√Æne&#160;<code>'1'</code> sera convertie en nombre (voir plus loin).</p>
</li>
<li>
<p>On nous a toujours interdit la division par z√©ro&#160;; ici, on affiche&#160;<code>Infinity</code>.</p>
</li>
<li>
<p>Affiche aussi&#160;<code>Infinity</code>.</p>
</li>
<li>
<p>Seule cette op√©ration retourne&#160;<code>NaN</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>10</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>11</code>&#160;‚Äî la valeur <code>true</code> est implicitement convertie en un entier.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Certaines op√©rations n&#8217;aboutiront pas mais n&#8217;afficheront pas d&#8217;erreur pour autant.
Dans ce cas, leur r√©sultat vaudra <code>NaN</code> pour <em>not&#160;a&#160;number</em>
(litt√©ralement&#160;: "n&#8217;est pas un nombre").</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/nan.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token string">'fromage'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction <code>Number.isNaN()</code> nous aidera √† v√©rifier si la valeur d&#8217;une variable
ou le r√©sultat d&#8217;une op√©ration est un&#160;<code>NaN</code> ou non.
Cette fonction retourne un <a href="#boolean">bool√©en</a>.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/is-nan.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token string">'fromage'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">'fromage'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">üö®</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Assertion</span> <code>NaN</code> n&#8217;est pas un nombre ?</div>
<div class="paragraph">
<p>Il faut se m√©fier de <code>NaN</code> comme de la peste, car il est consid√©r√©
comme un nombre du point de vue d&#8217;ECMAScript.
Toute op√©ration math√©matique impliquant&#160;<code>NaN</code> renverra un&#160;<code>NaN</code>&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/nan-number.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>'number'</code>.</p>
</li>
<li>
<p>Affiche <code>'number'</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Il vaut mieux s&#8217;assurer qu&#8217;une variable est √† la fois un nombre et
qu&#8217;elle ne vaut pas&#160;<code>NaN</code>&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/is-not-a-nan.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token string">'fromage'</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span> <span class="token operator">!</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ceci est un nombre.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'result n\'est pas un nombre.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="convertir_en_nombre">5.3. Convertir en nombre</h3>
<div class="paragraph">
<p>indexterm[nombre, conversion]</p>
</div>
<div class="paragraph">
<p>Les lignes qui pr√©c√©dent l&#8217;√©voquent un peu&#160;: on peut passer d&#8217;autres types
de donn√©es √† des nombres.
Id√©alement, on voudra transformer explicitement quelque chose en un nombre.</p>
</div>
<div class="paragraph">
<p>Pour cela nous disposons de deux fonctions&#160;:

</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>parseInt</code> essaie d&#8217;interpr√©ter un nombre entier.</p>
</li>
<li>
<p><code>parseFloat</code> essaie d&#8217;interpr√©ter un nombre √† virgule. La fonction s&#8217;arr√™te
d√®s qu&#8217;elle n&#8217;a plus affaire √† un chiffre.</p>
</li>
</ul>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/parse.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'3.141592653589793'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'3.141592653589793'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'14.10-patch.2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'14.10-patch.2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>3.141592653589793</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>14</code>&#160;‚Äì √ßa ne change rien pour <code>parseInt</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>14.1</code>&#160;‚Äì la fonction s&#8217;arr√™te √† la d√©cimale pr√©c√©dant une lettre.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>parseInt</code> a cette particularit√© que l&#8217;on peut choisir la base
de la conversion avec le second argument de la fonction.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/parse-int.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'A00'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>16</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>10</code>&#160;‚Äì <code>A</code>&#160;vaut&#160;<code>10</code> en hexad√©cimal.</p>
</li>
<li>
<p>Affiche&#160;<code>2560</code>&#160;‚Äì aurait pu s&#8217;√©crire <code>0xA00</code>.

</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="formater_et_arrondir_des_nombres">5.4. Formater et arrondir des nombres</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Si l&#8217;envie vous prenait de vouloir arrondir des nombres, il existe
quelques fonctions pour vous aider&#160;:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>Math.round()</code>
</td>
<td class="hdlist2">
<p>Arrondit √† l&#8217;entier le plus proche.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Math.ceil()</code>
</td>
<td class="hdlist2">
<p>Arrondit √† l&#8217;entier sup√©rieur du nombre donn√©.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Math.floor()</code>
</td>
<td class="hdlist2">
<p>  Arrondit √† l&#8217;entier inf√©rieur du nombre donn√©.


</p>
</td>
</tr>
</table>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/round.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(3)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(4)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">3.99</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(5)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>4</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>4</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>4</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Enfin, on peut pr√©server le formatage du nombre de d√©cimales
apr√®s la virgule en transformant le nombre <em>en cha√Æne de caract√®res</em>
gr√¢ce √† la m√©thode <code>toFixed()</code>&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/to-fixed.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10.0101</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10.0101</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>'10.01'</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>'10'</code>.
</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="functions">6. Cr√©er et r√©utiliser des blocs de code (fonctions)</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Une fonction est un <strong>bloc de code r√©utilisable et param√©trable</strong>.
Elle <em>retourne</em> un r√©sultat dont la valeur se calcule en fonction des
param√®tres que nous lui passons.</p>
</div>
<div class="paragraph">
<p>Cela se passe en deux temps&#160;:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>la <em>cr√©ation</em> de la fonction&#160;;</p>
</li>
<li>
<p>l'<em>ex√©cution</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>ECMAScript fournit un ensemble de fonctions de base&#160;: <code>console.log()</code>,
<code>setTimeout()</code>, etc.
Node ajoute les siennes (comme <code>require()</code>).
Nous avons la libert√© d&#8217;en cr√©er nous-m√™mes, sp√©cifiques √† nos besoins.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">mot</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token string">`Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mot<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hello<span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">'World'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">'toi'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">random</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> limit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> limit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On <em>cr√©e</em> la fonction <code>hello</code>.</p>
</li>
<li>
<p>Affiche <code>[Function: hello]</code>&#160;‚Äì il s&#8217;agit de la d√©finition de la fonction.</p>
</li>
<li>
<p>Affiche <code>"Hello World"</code>&#160;‚Äì il s&#8217;agit de l'<em>ex√©cution</em> de la fonction, qui <em>retourne</em> un r√©sultat.</p>
</li>
<li>
<p>Affiche un nombre al√©atoire entre&#160;0 et&#160;100&#160;‚Äì cette fonction est invoqu√©e sans param√®tre.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent nous indique qu&#8217;une fonction se d√©coupe en trois parties&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Les <strong>arguments</strong></dt>
<dd>
<p>C&#8217;est la partie √† gauche de la fl√®che&#160;(<code>&#8658;</code>).
Les arguments sont s√©par√©s par des virgules.</p>
</dd>
<dt class="hdlist1">Le <strong>corps</strong></dt>
<dd>
<p>C&#8217;est la partie entre accolades.
Quand la fonction est sur une ligne,
le r√©sultat de l&#8217;op√©ration est <em>implicitement retourn√©</em>.
On peut dans ce cas se passer du mot-cl√© <code>return</code>.</p>
</dd>
<dt class="hdlist1">La <strong>valeur de retour</strong></dt>
<dd>
<p>  C&#8217;est la valeur renvoy√©e en dehors de la fonction.
  Elle est d√©finie √† l&#8217;aide du mot-cl√© <code>return</code>.
  La valeur <code>undefined</code> est retourn√©e de mani√®re implicite
  lorsque ce dernier est absent.


</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">üí°</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Rappel</span> Variables et port√©e</div>
<div class="paragraph">
<p>Le corps d&#8217;une fonction constitue une <em>port√©e</em>&#160;: toute variable d√©finie
dans le corps d&#8217;une fonction est invisible en dehors.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="anonymous-function">6.1. Les fonctions anonymes</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les fonctions anonymes sont employ√©es en arguments d&#8217;autres fonctions.
On les dit <em>anonymes</em>, car elles ne sont pas consign√©es dans des <em>variables</em>.
Il est fr√©quent de les utiliser pour <em>it√©rer</em> sur des tableaux,
lors d&#8217;√©v√©nements ou dans des <a href="#promise">promesses</a>.</p>
</div>
<div class="paragraph">
<p>C&#8217;est une mani√®re √©l√©gante d&#8217;encapsuler du code √† ex√©cuter plus tard.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/anonymous.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Une seconde plus tard'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Deux secondes plus tard'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'exit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le processus se termine'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Deux secondes plus tard"</code> deux secondes apr√®s le d√©but du script.</p>
</li>
<li>
<p>Affiche <code>"Le processus se termine"</code> quand le processus se termine, une fois que toutes les actions en attente ont √©t√© ex√©cut√©es.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="callback">6.2. Les fonctions de rappel (callback)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Quand une fonction est pass√©e en argument d&#8217;une autre fonction,
on appelle cela un <em>callback</em>.
On l&#8217;appelle plus tard (<em>to&#160;call back</em>) que le moment o√π elle est d√©finie.
Elle re√ßoit des param√®tres qui aident √† reconstruire un contexte
<em>au moment</em> de son ex√©cution.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/callback.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">printYear</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>             <span class="token comment">// <b class="conum">(2)</b></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getUTCFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(3)</b></span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span>printYear<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token comment">// √©quivalent √†</span>
<span class="token comment">// setTimeout(date => printYear(date), 1000, new Date());</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Le troisi√®me argument (et les suivants) de <code>setTimeout()</code> sont transmis en param√®tres de la fonction de rappel (<em>callback</em>).</p>
</li>
<li>
<p>Cette fonction est invoqu√©e une seconde apr√®s le d√©but du script, et re√ßoit en param√®tre la date du moment.</p>
</li>
<li>
<p>Affiche l&#8217;ann√©e de la date pass√©e en argument&#160;‚Äì dans cet exemple, l&#8217;ann√©e en courss.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="rest-parameters">6.3. Param√®tres du reste (rest parameters)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les <em>param√®tres du reste</em> sont un nombre ind√©fini de param√®tres
regroup√©s dans un m√™me <a href="#array">tableau</a>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/rest.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">combien_de</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">nom<span class="token punctuation">,</span> <span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`On a compt√© </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nom<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">combien_de</span><span class="token punctuation">(</span><span class="token string">'patates'</span><span class="token punctuation">,</span> <span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'trois'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"On a compt√© 3 patates."</code>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="array">7. Lister, filtrer et trier des √©l√©ments (Array)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les tableaux (ou listes index√©es) servent √† lister des √©l√©ments,
de tout type et dans l&#8217;ordre de notre choix.
Chaque √©l√©ment de tableau se voit attribuer un num√©ro (<em>index</em>)
qui sert √† le retrouver, en it√©rant √† l&#8217;aide de boucles
ou en ayant recours √† d&#8217;autres m√©thodes d&#8217;identification.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekdays <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'lundi'</span><span class="token punctuation">,</span> <span class="token string">'mardi'</span><span class="token punctuation">,</span> <span class="token string">'mercredi'</span><span class="token punctuation">,</span> <span class="token string">'jeudi'</span><span class="token punctuation">,</span> <span class="token string">'vendredi'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["lundi", "mardi", "mercredi", "jeudi", "vendredi"]</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>5</code>&#160;‚Äì soit la longueur du tableau.</p>
</li>
<li>
<p>Affiche <code>"mardi"</code>&#160;‚Äì un tableau commence √† l&#8217;index&#160;<code>0</code>.</p>
</li>
<li>
<p>Affiche <code>undefined</code>&#160;‚Äì il n&#8217;y a aucun √©l√©ment d√©fini √† l&#8217;index&#160;<code>5</code>.
</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent illustre plusieurs caract√©ristiques des collections&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La num√©rotation d√©bute √† l&#8217;index <code>0</code>.</p>
</li>
<li>
<p>La propri√©t√© <code>length</code> contient la longueur du tableau.</p>
</li>
<li>
<p>La valeur <code>undefined</code> est retourn√©e quand on tente d&#8217;acc√©der √† un index
qui n&#8217;existe pas.
</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="cr√©er_des_tableaux_√†_partir_dautres_valeurs">7.1. Cr√©er des tableaux √† partir d&#8217;autres valeurs</h3>
<div class="paragraph">
<p>indexterm[tableau, Array.from()]</p>
</div>
<div class="paragraph">
<p>La fonction <code>Array.from()</code> est une mani√®re de cr√©er
un tableau √† partir de quelque chose qui <em>ressemble √† un tableau</em>.</p>
</div>
<div id="array.from" class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/from.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'fromage'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token comment">// utilisation du second argument</span>
<span class="token keyword">const</span> <span class="token function-variable function">uppercase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">letter</span><span class="token punctuation">)</span> <span class="token operator">=></span> letter<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'fromage'</span><span class="token punctuation">,</span> uppercase<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["f", "r", "o", "m", "a", "g", "e"]</code>&#160;‚Äì chaque lettre de la cha√Æne.</p>
</li>
<li>
<p>Affiche <code>["F", "R", "O", "M", "A", "G", "E"]</code>&#160;‚Äì chaque lettre de la cha√Æne a √©t√© pass√©e en majuscule.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le deuxi√®me argument de <code>Array.from()</code> est facultatif.
C&#8217;est une <a href="#anonymous-function">fonction anonyme</a> qui s&#8217;utilise comme les <a href="#array.forEach">m√©thodes d&#8217;it√©ration</a> <code>Array.forEach()</code> et <code>Array.map()</code>.</p>
</div>
<div class="paragraph">
<p>Cette m√©thode est des plus utiles pour it√©rer sur des listes d&#8217;√©l√©ments DOM
obtenues avec les fonctions <code>document.querySelectorAll()</code>
et <code>document.getElementsByTagName()</code>, entre autres.</p>
</div>
<div class="listingblock prismjs highlight-prismjs">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> links <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>links<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=></span> a<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// parce qu'on ne peut pas faire</span>
<span class="token comment">// links.map(a => a.textContent);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
</div>
<div class="sect2">
<h3 id="array.concat">7.2. Combiner des tableaux</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Il est relativement ais√© de composer des tableaux en fonction d&#8217;autres tableaux.
Une premi√®re mani√®re d&#8217;y parvenir est d&#8217;utiliser la m√©thode <code>concat()</code>&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/concat.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mousquetaires <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Athos'</span><span class="token punctuation">,</span> <span class="token string">'Porthos'</span><span class="token punctuation">,</span> <span class="token string">'Aramis'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> extras <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'d\'Artagnan'</span><span class="token punctuation">,</span> <span class="token string">'Albert'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mousquetaires<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>extras<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token comment">// autre mani√®re d'obtenir la liste des 5 mousquetaires</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>mousquetaires<span class="token punctuation">,</span> extras<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["Athos", "Porthos", "Aramis", "d&#8217;Artagnan", "Albert"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Cette m√©thode <em>cr√©e un nouveau tableau</em> √† partir de deux pass√©s en param√®tres.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Alternative</span> Op√©rateur&#160;<code>&#8230;&#8203;</code>&#160;(<em>spread</em>)</div>
<div class="paragraph">
<p>
Une autre mani√®re de faire est d&#8217;utiliser l&#8217;op√©rateur <code>&#8230;&#8203;</code>
(aussi appel√© <a href="#spread">spread</a>) pour √©clater plusieurs tableaux et
les rassembler dans un autre&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/spread.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mousquetaires <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Athos'</span><span class="token punctuation">,</span> <span class="token string">'Porthos'</span><span class="token punctuation">,</span> <span class="token string">'Aramis'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> extras <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'d\'Artagnan'</span><span class="token punctuation">,</span> <span class="token string">'Albert'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>mousquetaires<span class="token punctuation">,</span> <span class="token operator">...</span>extras<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["Athos", "Porthos", "Aramis", "d&#8217;Artagnan", "Albert"]</code>.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>√Ä l&#8217;inverse, la m√©thode <code>join()</code> concat√®ne tous les √©l√©ments dans une
<a href="#string">cha√Æne de caract√®res</a> avec le s√©parateur de notre choix (optionnel).
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/join.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'ID'</span><span class="token punctuation">,</span> <span class="token string">'NOM'</span><span class="token punctuation">,</span> <span class="token string">'PRENOM'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"ID,NOM,PRENOM"</code>&#160;‚Äì le s√©parateur par d√©faut est une virgule.</p>
</li>
<li>
<p>Affiche <code>"ID;NOM;PRENOM"</code>&#160;‚Äì on a choisi le point-virgule comme s√©parateur.</p>
</li>
<li>
<p>Affiche <code>"IDNOMPRENOM"</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array.forEach">7.3. It√©rer sur les valeurs avec des boucles</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Les boucles sont une mani√®re de parcourir plusieurs valeurs.
Elles aident √† mettre en place des automatismes pour √©viter de r√©p√©ter du code.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/loop.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekdays <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'lundi'</span><span class="token punctuation">,</span> <span class="token string">'mardi'</span><span class="token punctuation">,</span> <span class="token string">'mercredi'</span><span class="token punctuation">,</span> <span class="token string">'jeudi'</span><span class="token punctuation">,</span> <span class="token string">'vendredi'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> day <span class="token keyword">of</span> weekdays<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>                           <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span>

<span class="token comment">// on obtient le m√™me r√©sultat avec la m√©thode `forEach`</span>
weekdays<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">day</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche successivement chaque valeur du tableau&#160;‚Äì <code>"lundi"</code>, <code>"mardi"</code>, <code>"mercredi"</code>, <code>"jeudi"</code>, <code>"vendredi"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Prenons le temps de revenir sur cet exemple.
On y d√©couvre plusieurs mani√®res d&#8217;√©crire des boucles sur un tableau&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>for&#8230;&#8203;of</code></dt>
<dd>
<p>On affecte une variable avec chaque √©l√©ment (op√©rateur <code>of</code>) du tableau.
Les expressions situ√©es entre accolade sont ex√©cut√©es pour
chaque √©l√©ment du tableau.</p>
</dd>
<dt class="hdlist1"><code>forEach(element &#8658; expression)</code></dt>
<dd>
<p>  La m√©thode <code>forEach</code> applique une <a href="#anonymous-function">fonction anonyme</a>
  pour chaque √©l√©ment du tableau.

</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Il y a en r√©alit√© deux mani√®res d&#8217;it√©rer avec la boucle&#160;<code>for</code>&#160;:
sur les <em>index</em> (avec l&#8217;op√©rateur&#160;<code>in</code>)
et sur les <em>valeurs</em> (avec l&#8217;op√©rateur&#160;<code>of</code>).



</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/for-of-in.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekend <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'samedi'</span><span class="token punctuation">,</span> <span class="token string">'dimanche'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> index <span class="token keyword">in</span> weekend<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// <b class="conum">(1)</b></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekend<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> day <span class="token keyword">of</span> weekend<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(3)</b></span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche successivement&#160;<code>0</code> puis&#160;<code>1</code>.</p>
</li>
<li>
<p>Affiche successivement <code>"samedi"</code> puis <code>"dimanche"</code>&#160;‚Äì l&#8217;index sert √† retrouver la valeur dans le tableau.</p>
</li>
<li>
<p>Affiche successivement <code>"samedi"</code> puis <code>"dimanche"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La m√©thode <code>forEach()</code> propage en r√©alit√© trois arguments √† notre fonction anonyme&#160;:
l&#8217;√©l√©ment en cours de l&#8217;it√©ration, l&#8217;index de l&#8217;√©l√©ment et le tableau d&#8217;origine.</p>
</div>
<div class="paragraph">
<p>Pourquoi passer le tableau d&#8217;origine alors qu&#8217;on it√®re dessus&#160;?
Pour donner du contexte au cas o√π on op√®re
avec une <a href="#function">fonction nomm√©e</a>.
Nous verrons un usage concret de ce troisi√®me argument
dans la section &#8220;<a href="#array.map">Transformer les valeurs</a>&#8221;.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/foreach-function.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> undeux <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">printIndex</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>element<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> : index </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
<span class="token punctuation">}</span>

undeux<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>printIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Applique la fonction <code>printIndex()</code> pour chaque √©l√©ment du tableau <code>undeux</code>.</p>
</li>
<li>
<p>Affiche successivement <code>"un&#160;: index 0"</code> puis <code>"deux&#160;: index 1"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Outre l&#8217;inspection et l&#8217;affichage des valeurs, les boucles offrent la libert√©
de <a href="#array.sort">trier</a>, de <a href="#array.map">transformer les valeurs</a>,
de <a href="#array.filter">filtrer selon des conditions</a>,
mais aussi de <a href="#array.reduce">cr√©er de nouvelles structures de donn√©es</a>.</p>
</div>
<div class="paragraph">
<p>Ces m√©thodes sont d√©crites dans les sections suivantes.</p>
</div>
</div>
<div class="sect2">
<h3 id="array.sort">7.4. Trier les valeurs</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>La m√©thode <code>sort()</code> change l&#8217;ordre des √©l√©ments d&#8217;un tableau.
Elle utilise une <a href="#anonymous-function">fonction anonyme</a> qui compare deux √©l√©ments
entre eux&#160;; elle retourne un nombre positif, n√©gatif ou √©gal √† z√©ro selon la
logique que l&#8217;on souhaite donner au tri&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Quand la comparaison est <em>n√©gative</em>,
<code>sort()</code> place le premier √©l√©ment <em>avant</em> le second.</p>
</li>
<li>
<p>Quand la comparaison est <em>positive</em>,
<code>sort()</code> place le premier √©l√©ment <em>apr√®s</em> le second.</p>
</li>
<li>
<p>Quand la comparaison est √©gale √† z√©ro, nulle ou non sp√©cifi√©e,
l&#8217;ordre des √©l√©ments reste inchang√©.</p>
</li>
</ul>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/sort.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">sortAsc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">sortDesc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> b <span class="token operator">-</span> a<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortAsc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> undeux <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> order<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">'un'</span><span class="token punctuation">,</span> order<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>undeux<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a<span class="token punctuation">.</span>order <span class="token operator">-</span> b<span class="token punctuation">.</span>order<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[1, 2, 3]</code>.</p>
</li>
<li>
<p>Affiche <code>[ { label: "un", order: 1 }, { label: "deux", order: 2 } ]</code>&#160;‚Äì le tableau a √©t√© tri√© sur la valeur de <code>order</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les <a href="#string">cha√Ænes de caract√®res</a> peuvent √™tre compar√©es avec <code>localeCompare()</code>.
Cette m√©thode retourne un nombre apr√®s une comparaison caract√®re par caract√®re
entre deux cha√Ænes.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/sort-strings.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">sortAlpha</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortAlpha<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> undeux <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">'un'</span><span class="token punctuation">,</span> order<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> order<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">sortLabel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>undeux<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortLabel<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["a", "A", "b", "c"]</code>&#160;‚Äì les majuscules influencent le&#160;tri.</p>
</li>
<li>
<p>Affiche <code>[ { label: "deux", order: 2 }, { label: "un", order: 1 } ]</code>&#160;‚Äì le tableau a √©t√© tri√© sur la valeur de <code>label</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">üí°</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Alternative</span> <code>Array.reverse()</code></div>
<div class="paragraph">
<p>
La m√©thode <code>reverse()</code> transforme le tableau d&#8217;origine
en inversant l&#8217;ordre de ses √©l√©ments.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/reverse.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekend <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'samedi'</span><span class="token punctuation">,</span> <span class="token string">'dimanche'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

weekend<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekend<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["dimanche", "samedi"]</code>.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="array.map">7.5. Transformer les valeurs</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>La m√©thode <code>map()</code> fonctionne quasiment comme <code>forEach()</code>, √† ceci pr√®s qu&#8217;elle
retourne un nouveau tableau, constitu√© des valeurs retourn√©es par la fonction
appliqu√©e sur chaque √©l√©ment.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/map.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> newArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">' b'</span><span class="token punctuation">,</span> <span class="token string">'c '</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Retourne <code>['A', 'B', 'C']</code>&#160;‚Äì on a pass√© tous les √©l√©ments en lettres majuscules.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le troisi√®me argument de la m√©thode <code>map()</code> prend ici tout son sens.
Par exemple, si l&#8217;on souhaite d√©doublonner un tableau&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/map-dedupe.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> soundcheck <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">dedupe</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>dedupe<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[null, null, "un", "deux"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Cet exemple v√©rifie, √† chaque it√©ration, si la valeur de l&#8217;√©l√©ment
est contenue dans la <em>suite du tableau</em>.
<code>array.slice(index+1)</code> cr√©e un nouveau tableau contenant tous les √©l√©ments
situ√©s <em>apr√®s</em> l&#8217;√©l√©ment courant (<code>index+1</code>).
</p>
</div>
<div class="paragraph">
<p>La m√©thode de transformation <code>reduce()</code> est diff√©rente, car elle passe le r√©sultat
de la pr√©c√©dente it√©ration √† la suivante.
C&#8217;est comme si elle <em>accumulait</em> les r√©sultats.
Elle retourne une valeur finale qui peut √™tre autre chose qu&#8217;un tableau.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/reduce.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> stats <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">previous<span class="token punctuation">,</span> element</span><span class="token punctuation">)</span> <span class="token operator">=></span> previous <span class="token operator">+</span> element<span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Effectue une <em>r√©duction</em> √† l&#8217;aide de la fonction <code>sum()</code> et d&#8217;une valeur par d√©faut de&#160;<code>0</code>&#160;‚Äì affiche&#160;<code>22</code> √† l&#8217;issue des it√©rations‚ÄØ.</p>
</li>
<li>
<p>La valeur de l&#8217;√©l√©ment est le <em>second param√®tre</em>&#160;; le premier param√®tre correspond au r√©sultat de l&#8217;it√©ration pr√©c√©dente ou √† la valeur initiale, pass√©e en argument √† <code>reduce()</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array.filter">7.6. Filtrer les valeurs</h3>
<div class="paragraph">
<p>La m√©thode <code>filter()</code> retourne un nouveau tableau filtr√© √† l&#8217;aide
d&#8217;une <a href="#anonymous-function">fonction anonyme</a>.
Seuls les √©l√©ments qui satisfont √† la condition √©tablie par la fonction
se retrouvent dans le nouveau tableau.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/filter.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">is_finite</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> Number<span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">direct</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> value<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>is_finite<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>direct<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Retourne&#160;<code>[3]</code>&#160;‚Äì c&#8217;est la seule valeur qui soit un nombre.</p>
</li>
<li>
<p>Retourne <code>["un", "deux", 3]</code>&#160;‚Äì ce sont les valeurs non&#160;nulles.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array.find">7.7. Identifier des valeurs</h3>
<div class="paragraph">
<p>Les m√©thodes <code>indexOf()</code>, <code>lastIndexOf()</code> et <code>includes()</code> identifient une
<em>valeur exacte</em> au sein d&#8217;un tableau.



</p>
</div>
<div class="paragraph">
<p><code>indexOf()</code> et <code>lastIndexOf()</code> retournent l&#8217;index de la valeur recherch√©e.
Si aucun √©l√©ment n&#8217;a √©t√© retrouv√©, elles retourneront la valeur&#160;<code>-1</code>.<br>
<code>includes()</code> retourne un <a href="#boolean">bool√©en</a> indiquant si la recherche
est fructueuse (<code>true</code>) ou non (<code>false</code>).</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/index-of-includes.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> soundcheck <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'un'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'deux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'trois'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(3)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'deux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'deux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'trois'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>0</code>&#160;‚Äì le premier <code>"un"</code> est l&#8217;√©l√©ment&#160;``0` du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>1</code>&#160;‚Äì le premier <code>"deux"</code> est l&#8217;√©l√©ment&#160;``1` du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>-1</code>&#160;‚Äì cet √©l√©ment est absent du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>3</code>&#160;‚Äì le dernier <code>"deux"</code> est l&#8217;√©l√©ment&#160;``3` du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>true</code>&#160;‚Äì l&#8217;√©l√©ment <code>"un"</code> existe dans le tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>false</code>&#160;‚Äì l&#8217;√©l√©ment <code>"trois"</code> n&#8217;existe pas dans le tableau.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Il existe ensuite d&#8217;autres m√©thodes comme <code>find()</code>, <code>some()</code> et <code>every()</code>.
Elles <strong>identifient des √©l√©ments √† partir d&#8217;une fonction</strong>.
Les conditions de recherche sont plus compl√®tes, car on n&#8217;est pas oblig√©
de conna√Ætre la valeur exacte recherch√©e.



</p>
</div>
<div class="paragraph">
<p>La m√©thode <code>find()</code> retourne le premier <em>√©l√©ment</em> qui remplisse la condition&#160;;
 <code>findIndex()</code> en retourne l'<em>index</em>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/find.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">biggerThan50</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> value <span class="token operator">></span> <span class="token number">50</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>biggerThan50<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>biggerThan50<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La fonction retourne <code>true</code> si la valeur pass√©e en argument est un nombre sup√©rieur&#160;√†&#160;<code>50</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>100</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>3</code>&#160;‚Äì c&#8217;est l&#8217;index de la valeur&#160;<code>100</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les m√©thodes <code>some()</code> et <code>every()</code> retournent <code>true</code> respectivement
si <em>au moins une it√©ration</em> est satisfaisante et
si <em>toutes les it√©rations</em> sont satisfaisantes.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/some.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">isUndefined</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>isUndefined<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>isUndefined<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=></span> d<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>isUndefined<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;‚Äì toutes les valeurs ne sont pas √©gales √† <code>undefined</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì au moins une valeur est √©gale √† <code>undefined</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì il n&#8217;y a plus de valeur <code>undefined</code> dans le tableau, car on a utilis√© la m√©thode <a href="#array.filter">filter</a> pour supprimer les valeurs vides.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array-destructuring">7.8. D√©composition de tableau (destructuring)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>L&#8217;affectation par d√©composition (<em>destructuring</em>) est une mani√®re √©l√©gante
de piocher des valeurs dans un <a href="#array">tableau</a>.
Ce m√©canisme n&#8217;alt√®re pas le contenu des variables d√©compos√©es et existe aussi
pour les <a href="#object-destructuring">objets</a>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/destructuring.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekdays <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'lundi'</span><span class="token punctuation">,</span> <span class="token string">'mardi'</span><span class="token punctuation">,</span> <span class="token string">'mercredi'</span><span class="token punctuation">,</span> <span class="token string">'jeudi'</span><span class="token punctuation">,</span> <span class="token string">'vendredi'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">]</span> <span class="token operator">=</span> weekdays<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">,</span> third<span class="token punctuation">]</span> <span class="token operator">=</span> weekdays<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>third<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"lundi"</code>.</p>
</li>
<li>
<p>Affiche <code>"mardi"</code>.</p>
</li>
<li>
<p>Affiche <code>"mercredi"</code>&#160;‚Äì l&#8217;utilisation des virgules sans variable a permis de <em>sauter</em> des positions dans la d√©composition.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La d√©composition se combine agr√©ablement avec l&#8217;op√©rateur <code>&#8230;&#8203;</code> (<em>spread</em>).
Il accumule le reste des √©l√©ments dans une variable, sous forme de tableau.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/destructuring-rest.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekdays <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'lundi'</span><span class="token punctuation">,</span> <span class="token string">'mardi'</span><span class="token punctuation">,</span> <span class="token string">'mercredi'</span><span class="token punctuation">,</span> <span class="token string">'jeudi'</span><span class="token punctuation">,</span> <span class="token string">'vendredi'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> weekdays<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token comment">// revient au m√™me que</span>
<span class="token comment">// const [,, ...rest] = weekdays;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["mercredi", "jeudi", "vendredi"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La m√©thode <code>slice()</code> offre davantage de souplesse pour g√©rer les <em>limites</em>.
On choisit <em>l&#8217;index de d√©but</em> (inclus) et celui <em>de fin</em> (non inclus) de la d√©composition.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/slice.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'trois'</span><span class="token punctuation">,</span> <span class="token string">'quatre'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["deux", "trois", "quatre"]</code>&#160;‚Äì √† partir de l&#8217;index&#160;<code>1</code>.</p>
</li>
<li>
<p>Affiche <code>["deux"]</code>&#160;‚Äì √† partir de l&#8217;index&#160;<code>1</code> et jusqu&#8217;√† l&#8217;index&#160;<code>2</code> (non&#160;inclus).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Si les valeurs de d√©but et/ou de fin sont <em>n√©gatives</em>,
les index sont calcul√©s <em>√† partir de la fin</em> du tableau.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/slice-negative.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'trois'</span><span class="token punctuation">,</span> <span class="token string">'quatre'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["quatre"]</code>&#160;‚Äì premier √©l√©ment √† partir de la&#160;fin.</p>
</li>
<li>
<p>Affiche <code>["deux", "trois", "quatre"]</code>&#160;‚Äì les trois premiers √©l√©ments √† partir de la&#160;fin.</p>
</li>
<li>
<p>Affiche <code>["un", "deux", "trois"]</code>&#160;‚Äì jusqu&#8217;au dernier √©l√©ment √† partir de la fin (non&#160;inclus).</p>
</li>
<li>
<p>Affiche <code>["un"]</code>&#160;‚Äì jusqu&#8217;au troisi√®me √©l√©ment √† partir de la fin (non&#160;inclus).</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="object">8. Repr√©senter des structures d&#8217;objet et y acc√©der</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les structures d&#8217;objet servent √† lister des √©l√©ments de tout type
au sein d&#8217;une m√™me variable.
L&#8217;indexation se fait <em>comme dans un dictionnaire</em>,
avec un identifiant unique pour chaque valeur.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>first_name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>

francine<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>                <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Francine"</code>.</p>
</li>
<li>
<p>On affecte une valeur num√©rique √† l&#8217;index <code>age</code> une fois l&#8217;objet&#160;cr√©√©.</p>
</li>
<li>
<p>Affiche&#160;``25`&#160;‚Äì la valeur num√©rique pr√©c√©demment affect√©e.</p>
</li>
<li>
<p>Affiche&#160;``undefined`&#160;‚Äì aucune valeur n&#8217;est affect√©e pour cette&#160;cl√©.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une autre syntaxe existe pour cr√©er des valeurs et y acc√©der en utilisant
des variables en guise d&#8217;identifiant d&#8217;index.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/dynamic.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token constant">SOCIAL_NETWORK</span> <span class="token operator">=</span> <span class="token string">'twitter'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token constant">SOCIAL_NETWORK</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'@FrancineDu26'</span><span class="token punctuation">,</span>    <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">[</span><span class="token constant">SOCIAL_NETWORK</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token comment">// mani√®res √©quivalentes, sans utilisation de variable</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">[</span><span class="token string">'twitter'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affecte la cha√Æne <code>@FrancineDu26</code> dans l&#8217;index correspondant √† la valeur de la variable <code>SOCIAL_NETWORK</code>.</p>
</li>
<li>
<p>Affiche <code>"@FrancineDu26"</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="object-destructuring">8.1. D√©composition d&#8217;objet (<em>destructuring</em>)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>L&#8217;affectation par d√©composition (<em>destructuring</em>) est une mani√®re
√©l√©gante de piocher des valeurs dans un <a href="#object">objet</a>.
Ce m√©canisme existe aussi pour les <a href="#array-destructuring">tableaux</a>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/destructuring.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
  twitter<span class="token punctuation">:</span> <span class="token string">'@FrancineDu26'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>location<span class="token punctuation">,</span>twitter<span class="token punctuation">}</span> <span class="token operator">=</span> francine<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>first_name<span class="token punctuation">:</span>prenom<span class="token punctuation">}</span> <span class="token operator">=</span> francine<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prenom<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>is_admin<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">=</span> francine<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>is_admin<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Dr√¥me"</code>&#160;‚Äì on a d√©compos√© la cl√© <code>location</code>.</p>
</li>
<li>
<p>Affiche <code>"Francine"</code>&#160;‚Äì on a d√©compos√© puis renomm√© la cl√© <code>first_name</code> en une nouvelle variable&#160;: <code>prenom</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì on a d√©compos√© la cl√© <code>is_admin</code> et, comme elle n&#8217;existe pas, on a sp√©cifi√© la valeur par d√©faut <code>false</code>, au lieu de <code>undefined</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La d√©composition se combine agr√©ablement avec l&#8217;op√©rateur <code>&#8230;&#8203;</code> (<em>spread</em>).
Il accumule <em>le reste</em> des √©l√©ments dans une variable, sous forme d&#8217;objet.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/destructuring-rest.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
  twitter<span class="token punctuation">:</span> <span class="token string">'@FrancineDu26'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>first_name<span class="token punctuation">,</span> <span class="token operator">...</span>metadata<span class="token punctuation">}</span> <span class="token operator">=</span> francine<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first_name<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Francine"</code>.</p>
</li>
<li>
<p>Affiche <code>{ location: "Dr√¥me", twitter: "@FrancineDu26" }</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="object.assign">8.2. Combiner des objets</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p><code>Object.assign()</code> est une m√©thode qui sert √† √©tendre et combiner plusieurs objets.
On a le choix d&#8217;int√©grer les nouveaux √©l√©ments √† un objet existant
ou bien d&#8217;en cr√©er un nouveau.
Les objets sont combin√©s dans le premier param√®tre de la fonction.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/assign.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> o2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> o<span class="token punctuation">,</span> <span class="token punctuation">{</span>location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// <b class="conum">(2)</b></span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>o2<span class="token punctuation">,</span> <span class="token punctuation">{</span>location<span class="token punctuation">:</span> <span class="token string">'Paris'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>location<span class="token punctuation">:</span> <span class="token string">'Ard√®che'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>{ first_name: "Francine", location: "Dr√¥me" }</code>&#160;‚Äì la nouvelle variable contient nos deux objets combin√©s.</p>
</li>
<li>
<p>Affiche <code>{ first_name: "Francine" }</code>&#160;‚Äì ce sont les valeurs originelles de notre objet.</p>
</li>
<li>
<p>Affiche <code>{ first_name: "Francine", location: 'Ard√®che' }</code>&#160;‚Äì l&#8217;objet&#160;<code>o2</code> a re√ßu la nouvelle propri√©t√© <code>location</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notez que les affectations se font de <em>gauche √† droite</em>.
Toute cl√© existante est remplac√©e.</p>
</div>
<div class="paragraph">
<p>La <a href="#object-destructuring">d√©composition d&#8217;objet</a> sert √©galement √† combiner
des objets entre&#160;eux.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/destructuring-spread.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> francine26 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>francine<span class="token punctuation">,</span> location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine26<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>{ first_name: "Francine", location: "Dr√¥me" }</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="it√©rer_sur_des_objets">8.3. It√©rer sur des objets</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>La m√©thode <code>Object.entries()</code> est probablement la plus adapt√©e pour it√©rer √† la
fois sur les <em>cl√©s</em> et sur les <em>valeurs</em> d&#8217;un objet.
Elle retourne un tableau qui contient autant de paires de <code>[cl√©, valeur]</code> qu&#8217;il y a
d&#8217;√©l√©ments dans l&#8217;objet.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/entries.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[[ "first_name", "Francine" ], [ "location", "Dr√¥me" ]]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Nous sommes libres d'<a href="#array.forEach">it√©rer sur les valeurs</a>
et d&#8217;utiliser la <a href="#array-destructuring">d√©composition de tableaux</a>
pour rendre notre code explicite&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/entries-loop.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`francine.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> vaut </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// m√™me r√©sultat, autre m√©thode</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`francine.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> vaut </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche successivement <code>"francine.first_name vaut Francine"</code> puis <code>"francine.location vaut Dr√¥me"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Deux autres m√©thodes r√©cup√®rent soit <em>la liste des cl√©s</em> d&#8217;un objet (<code>Object.keys()</code>)
soit <em>la liste de ses valeurs</em> (<code>Object.values()</code>).
Dans les deux cas, les r√©sultats sont retourn√©s sous forme d&#8217;un <a href="#array">tableau</a>.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/keys.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["first_name", "location"]</code>.</p>
</li>
<li>
<p>Affiche <code>["Francine", "Dr√¥me"]</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="identifier_des_valeurs">8.4. Identifier des valeurs</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Il y a trois mani√®res d&#8217;identifier si un objet contient une valeur
associ√©e √† une&#160;cl√©.</p>
</div>
<div class="paragraph">
<p>Le plus simple est d&#8217;utiliser la m√©thode <code>hasOwnProperty()</code>.
Elle prend en argument le nom de la cl√© √† tester et
retourne un <a href="#boolean">bool√©en</a>.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/has-own-property.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'location'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'twitter'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì cette cl√© n&#8217;existe pas dans cet objet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La seconde mani√®re est d&#8217;utiliser l&#8217;op√©rateur&#160;<code>in</code>.
On l&#8217;aura d√©j√† rencontr√© lors des <a href="#array.forEach">boucles</a>&#160;;
ici, on l&#8217;utilise une seule&#160;fois.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/key-in.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'location'</span> <span class="token keyword">in</span> francine<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'twitter'</span> <span class="token keyword">in</span> francine<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì cette cl√© n&#8217;existe pas dans cet objet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Enfin, on peut tester la valeur associ√©e avec la syntaxe standard <code>objet.cl√©</code>.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/key.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Attention toutefois&#160;: cette m√©thode <em>teste uniquement la valeur</em>.
Si la cl√© existe et contient <code>undefined</code>, vous ne verrez pas la diff√©rence.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/key-undefined.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Dr√¥me'</span><span class="token punctuation">,</span>
  twitter<span class="token punctuation">:</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'twitter'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'twitter'</span> <span class="token keyword">in</span> francine<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;‚Äì la valeur <code>undefined</code> est convertie en <code>false</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì la cl√© existe bien, mais elle contient la valeur <code>undefined</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì le test se fait sur l&#8217;existence de la&#160;cl√©.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì idem.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="json">9. Lire et √©crire des donn√©es au format JSON</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>JSON (<span class="URL"><a href="http://json.org" class="bare">json.org</a></span>) est un format de donn√©es textuel standardis√©.
Son but est de repr√©senter des donn√©es informatiques de mani√®re
interop√©rable entre diff√©rents langages.</p>
</div>
<div class="listingblock prismjs highlight-prismjs">
<div class="title">json/base.json</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token punctuation">{</span>
  <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Node.js"</span><span class="token punctuation">,</span>
  <span class="token string">"price_tag"</span><span class="token punctuation">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
  <span class="token string">"keywords"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">"JavaScript"</span><span class="token punctuation">,</span>
    <span class="token string">"Node.js"</span><span class="token punctuation">,</span>
    <span class="token string">"Apprendre par l'exemple"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le format JSON ressemble beaucoup √† une structure d'<a href="#object">objet</a> ECMAScript.
La repr√©sentation est plus stricte car <em>toute donn√©e</em> doit √™tre repr√©sent√©e
de mani√®re textuelle.
Ainsi, toutes les cl√©s sont entour√©es de <em>guillemets doubles</em>.</p>
</div>
<div class="paragraph">
<p>Les types de donn√©es autoris√©s sont les nombres, les cha√Ænes de caract√®res,
les bool√©ens, les tableaux, les objets et la valeur <code>null</code>.
On ne peut donc pas repr√©senter de <a href="#function">fonction</a>,
d'<a href="#class">instance d&#8217;objet</a> ni m√™me la valeur <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>ECMAScript embarque le n√©cessaire pour <em>parser</em> depuis et <em>convertir</em> en JSON.
Cela se fait respectivement avec les fonctions <code>JSON.parse()</code> et <code>JSON.stringify()</code>.</p>
</div>
<div class="paragraph">
<p>La fonction <code>JSON.parse()</code> consomme du texte.
Elle retourne une repr√©sentation ECMAScript ou lance une <a href="#error">erreur</a>
en cas de probl√®me.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/parse.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> json_object <span class="token operator">=</span> <span class="token string">'{ "title": "Node.js", "price_tag": 32 }'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json_string <span class="token operator">=</span> <span class="token string">'"Hello World!"'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json_number <span class="token operator">=</span> <span class="token string">'32'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json_string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json_number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json_object<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Hello World!"</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>32</code>.</p>
</li>
<li>
<p>Affiche <code>{price_tag: 32, title: "Node.js"}</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>√Ä l&#8217;inverse, la fonction <code>JSON.stringify()</code> convertit une structure ECMAScript
en cha√Æne de caract√®res au format&#160;JSON&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/stringify.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token punctuation">{</span>
  lat<span class="token punctuation">:</span> <span class="token number">48.8503439</span><span class="token punctuation">,</span>
  lon<span class="token punctuation">:</span> <span class="token number">2.34658949</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"{\"lat\":48.8503439,\"lon\":2.34658949}"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La fonction <code>JSON.stringify()</code> parcourt tous les √©l√©ments
pour les s√©rialiser en forme textuelle.
Quand elle rencontre la la cl√© sp√©ciale <code>toJSON()</code>,
elle l&#8217;utilise pour effectuer la conversion&#160;:

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/to-json.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token punctuation">{</span>
  lat<span class="token punctuation">:</span> <span class="token number">48.8503439</span><span class="token punctuation">,</span>
  lon<span class="token punctuation">:</span> <span class="token number">2.34658949</span><span class="token punctuation">,</span>
  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`geo=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lat<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lon<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">delete</span> location<span class="token punctuation">.</span>toJSON<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"\"geo=48.8503439,2.34658949\""</code>&#160;‚Äì c&#8217;est la s√©rialisation d√©finie par notre fonction <code>toJSON</code>.</p>
</li>
<li>
<p>Affiche <code>"{\"lat\":48.8503439,\"lon\":2.34658949}"</code>&#160;‚Äì sans la cl√© <code>toJSON</code>, notre objet initial est s√©rialis√© tel&#160;quel.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notre impl√©mentation contenue dans la fonction <code>toJSON()</code> est
responsable de renvoyer du texte seulement et de choisir les cl√©s
√† s√©rialiser.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/to-json-extra.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token punctuation">{</span>
  lat<span class="token punctuation">:</span> <span class="token number">48.8503439</span><span class="token punctuation">,</span>
  lon<span class="token punctuation">:</span> <span class="token number">2.34658949</span><span class="token punctuation">,</span>
  city<span class="token punctuation">:</span> <span class="token string">'Paris'</span><span class="token punctuation">,</span>
  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`geo=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lat<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lon<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"\"geo=48.8503439,2.34658949\""</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Dans cette variante d&#8217;exemple, la cl√© <code>city</code> n&#8217;a pas √©t√© s√©rialis√©e
car notre fonction <code>toJSON()</code> se pr√©occupait seulement des cl√©s <code>lat</code> et&#160;`lon`.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> JSON</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur JSON.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/JSON" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/JSON</a>

</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="date">10. Interagir avec des dates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les calculs de date s&#8217;effectuent √† l&#8217;aide des objets <code>Date</code>.
Chaque instance repr√©sente un moment dans le temps, √† un jour
et √† une heure donn√©e.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> past <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04 10:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">getUTCFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">getUTCFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On initialise l&#8217;objet date <code>past</code> au 04&#160;d√©cembre&#160;2013.</p>
</li>
<li>
<p>Affiche <code>2013</code>&#160;‚Äì l&#8217;ann√©e li√©e √† l&#8217;objet&#160;<code>past</code>.</p>
</li>
<li>
<p>Affiche <code>2019</code>&#160;‚Äì l&#8217;ann√©e li√©e √† l&#8217;objet&#160;<code>now</code> (date du jour).
</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Un certain nombre de m√©thodes retournent diff√©rents √©l√©ments de la date
contenue dans l&#8217;objet&#160;: ann√©e, secondes, jour de la semaine, etc.
Il en existe tout autant pour modifier ces √©l√©ments de date.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/set.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> past <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04 10:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

past<span class="token punctuation">.</span><span class="token function">setUTCFullYear</span><span class="token punctuation">(</span><span class="token string">'2015'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(2)</b></span>

past<span class="token punctuation">.</span><span class="token function">setUTCMonth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Change la date vers l&#8217;ann√©e&#160;<code>2015</code>.</p>
</li>
<li>
<p>Affiche <code>"2015-12-04T10:00:00.000Z"</code>.</p>
</li>
<li>
<p>Change la date vers le mois&#160;<code>1</code>.</p>
</li>
<li>
<p>Affiche <code>"2015-02-04T10:00:00.000Z"</code>&#160;‚Äì pourquoi le mois de f√©vrier&#160;??


</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent illustre l&#8217;ambigu√Øt√© de la notion de mois.
Il s&#8217;agit en r√©alit√© de l'<em>index du mois</em>&#160;:
0&#160;correspond √† janvier, 1 √† f√©vrier, etc.</p>
</div>
<div class="paragraph">
<p>Les m√©thodes natives font pour la plupart r√©f√©rence √† l&#8217;anglais.
Elles offrent peu de confort de manipulation&#160;‚Äì on aimerait pouvoir
compter facilement le nombre de jours entre deux dates, ou retirer 30&#160;jours.</p>
</div>
<div class="paragraph">
<p>Quand nous utiliserons <a href="#../chapter-04/index.adoc">Node</a> et
<a href="#../chapter-05/index.adoc">npm</a>, nous verrons que nous aurons
√† disposition des biblioth√®ques facilitant les manipulations de dates.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Date</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Date.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date</a>

</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="intl.datetimeformat">10.1. Formatage internationalis√© (Intl.DateTimeFormat)</h3>
<div class="paragraph">
<p>


</p>
</div>
<div class="paragraph">
<p>La sp√©cification <em>ECMA&#160;Intl</em> a √©t√© con√ßue pour ajouter des
fonctionnalit√©s relatives aux langues.
Cette sp√©cification est compl√©mentaire.
Son comportement varie en fonction du syst√®me d&#8217;exploitation
‚Äì mode d&#8217;installation de Node et/ou version du navigateur&#160;web.</p>
</div>
<div class="paragraph">
<p>Les m√©thodes <code>toLocaleString()</code>, <code>toLocaleDateString()</code> et
<code>toLocaleTimeString()</code> renvoient respectivement une version localis√©e
d&#8217;une date compl√®te, d&#8217;une date et d&#8217;une heure.


</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/to-locale-date.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> past <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04 10:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> month<span class="token punctuation">:</span> <span class="token string">'long'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token string">'fr-FR'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>04/12/2013</code>.</p>
</li>
<li>
<p>Affiche <code>d√©cembre</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">‚ö†Ô∏è</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Attention</span> M01,&#160;M02,&#160;etc. ?</div>
<div class="paragraph">
<p>Si, en formatant une date, les caract√®res <code>M01</code>, <code>M02</code> ou autre s&#8217;affichent,
c&#8217;est que le syst√®me n&#8217;est pas configur√© avec les libell√©s de la langue
demand√©e.</p>
</div>
<div class="paragraph">
<p>La langue par d√©faut est l&#8217;anglais.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Date/toLocaleDateString</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Date/toLocaleDateString.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString</a>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une version plus verbeuse consiste √† cr√©er un formateur avec
<code>Intl.DateTimeFormat</code>.
Ce formateur se r√©utilise pour transformer plusieurs fois
des dates diff√©rentes avec les m√™mes r√©glages
ou une m√™me date avec des formatages diff√©rents.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/intl.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> past <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04 10:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  year<span class="token punctuation">:</span> <span class="token string">'numeric'</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> <span class="token string">'short'</span><span class="token punctuation">,</span> day<span class="token punctuation">:</span> <span class="token string">'numeric'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> longOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  year<span class="token punctuation">:</span> <span class="token string">'numeric'</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> <span class="token string">'long'</span><span class="token punctuation">,</span> day<span class="token punctuation">:</span> <span class="token string">'numeric'</span><span class="token punctuation">,</span>
  weekday<span class="token punctuation">:</span> <span class="token string">'long'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>DateTimeFormat</span><span class="token punctuation">(</span><span class="token string">'fr-FR'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> frLong <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>DateTimeFormat</span><span class="token punctuation">(</span><span class="token string">'fr-FR'</span><span class="token punctuation">,</span> longOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fr<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>past<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>frLong<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>past<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>4 d√©c. 2013</code>.</p>
</li>
<li>
<p>Affiche <code>mercredi 4 d√©cembre 2013</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> DateTimeFormat</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur DateTimeFormat.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/DateTimeFormat" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/DateTimeFormat</a>

</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="class">11. Partager une logique avec des objets de m√™me nature (Class)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph">
<p>Une classe est une structure qui partage des propri√©t√©s
et des m√©thodes entre les objets qui y font appel.
Une instance de classe est cr√©√©e en pr√©fixant un appel de fonction
par l&#8217;op√©rateur&#160;`new`.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nos deux variables sont des objets issus de la classe <a href="#date">Date</a>.
Chacune des variables b√©n√©ficie des m√©thodes d√©finies par cette classe.</p>
</div>
<div class="paragraph">
<p>Autrement dit, si les <a href="#object">structures d&#8217;objet</a> d√©finissent des donn√©es,
les classes d√©finissent des comportements partag√©s.


</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> ean13 <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment">// <b class="conum">(1)</b></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(2)</b></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ean13 <span class="token operator">=</span> ean13<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                          <span class="token comment">// <b class="conum">(3)</b></span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>title<span class="token punctuation">,</span> ean13<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>title<span class="token punctuation">,</span> ean13<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">isbn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        <span class="token comment">// <b class="conum">(4)</b></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ean13<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">clean</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>               <span class="token comment">// <b class="conum">(5)</b></span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\D/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Le constructeur re√ßoit un ou plusieurs argument(s) lors de l&#8217;instanciation de la classe.</p>
</li>
<li>
<p><code>this</code> fait r√©f√©rence √† <em>ce contexte</em>, c&#8217;est-√†-dire √† <em>cette instance de classe</em>&#160;; deux instances peuvent √™tre initialis√©es avec des donn√©es diff√©rentes.</p>
</li>
<li>
<p><code>toJSON()</code> est une m√©thode de la classe.</p>
</li>
<li>
<p><code>isbn()</code> est un accesseur (pr√©fixe <code>get</code>)&#160;‚Äì une propri√©t√© dont la valeur est calcul√©e √† chaque fois qu&#8217;elle est appel√©e.</p>
</li>
<li>
<p><code>clean()</code> est une m√©thode dite <em>statique</em>&#160;‚Äì elle est appel√©e en dehors d&#8217;une instance.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Nous d√©velopperons cet exemple dans les sections qui suivent.
On peut d&#8217;ores et d√©j√† noter que la structure d&#8217;une classe
se d√©compose en plusieurs parties&#160;:





</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">La d√©finition</dt>
<dd>
<p>D√©finit le nom de la classe que l&#8217;on pourra instancier.</p>
</dd>
<dt class="hdlist1">Le constructeur</dt>
<dd>
<p>Partie ex√©cut√©e lorsque la classe est instanci√©e.
On y met le moins de choses possibles.
En g√©n√©ral, on copie les donn√©es pass√©es en argument.</p>
</dd>
<dt class="hdlist1">Les m√©thodes</dt>
<dd>
<p>Fonctions partag√©es entre toutes les instances de la classe.</p>
</dd>
<dt class="hdlist1">Les m√©thodes statiques</dt>
<dd>
<p>Fonctions partag√©es sans avoir √† instancier la classe.</p>
</dd>
<dt class="hdlist1">Les accesseurs et mutateurs</dt>
<dd>
<p>Fonctions qui d√©finissent le comportement de propri√©t√©s dynamiques.</p>
</dd>
<dt class="hdlist1">Le contexte (<code>this</code>)</dt>
<dd>
<p>On peut s&#8217;y r√©f√©rer dans les m√©thodes de la classe pour dire
<em>je fais r√©f√©rence √† cet objet</em> et, donc,
appeler les donn√©es et m√©thodes attenantes.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Classes</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les classes.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes</a>

</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="class.method">11.1. M√©thodes d&#8217;instance</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Les m√©thodes d√©finissent des comportements partag√©s entre chaque instance
de la classe.
Elles servent √† retourner ou transformer des valeurs rattach√©es √† l&#8217;objet.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/methods.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">isPublished</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>is_published <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>is_published <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> book1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book1<span class="token punctuation">.</span><span class="token function">isPublished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
book1<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book1<span class="token punctuation">.</span><span class="token function">isPublished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> book2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'CSS maintenables'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book2<span class="token punctuation">.</span><span class="token function">isPublished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;‚Äì la propri√©t√© n&#8217;existe pas.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;‚Äì la propri√©t√© <code>is_published</code> a √©t√© chang√©e √† la ligne pr√©c√©dente.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;‚Äì les donn√©es sont √©tanches entre chaque instance.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="class.static">11.2. M√©thodes statiques</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les m√©thodes statiques sont pratiques pour mettre √† disposition du code
m√©tier de mani√®re organis√©e.
Elles se caract√©risent par le mot-cl√© <code>static</code> devant un nom de fonction.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/static.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> ean13 <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ean13 <span class="token operator">=</span> ean13<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">clean</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\D/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> nodebook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  ean13<span class="token punctuation">:</span> Book<span class="token punctuation">.</span><span class="token function">clean</span><span class="token punctuation">(</span><span class="token string">'978-2212139938'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nodebook<span class="token punctuation">.</span>ean13<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nodebook<span class="token punctuation">.</span>clean<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On appelle la m√©thode statique <code>Book.clean()</code> pour nettoyer le code EAN13.</p>
</li>
<li>
<p>Affiche <code>"9782212139938"</code>&#160;‚Äì la valeur a bien √©t√© nettoy√©e.</p>
</li>
<li>
<p>Affiche <code>undefined</code>&#160;‚Äì les m√©thodes statiques ne sont pas accessibles depuis l&#8217;instance de classe.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On verra dans le <a href="#../chapter-04/index.adoc">chapitre sur Node</a>
qu&#8217;on peut se baser sur les modules pour partager du code
sans avoir √† l&#8217;affecter √† une classe.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> M√©thodes statiques</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les m√©thodes statiques.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes/static" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes/static</a>

</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="object-getset">11.3. Accesseurs et mutateurs</h3>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph">
<p>Ce type de m√©thode d√©finit des attributs dont la lecture ou l&#8217;√©criture
sont dynamiques.</p>
</div>
<div class="paragraph">
<p>L&#8217;accesseur est une fonction pr√©fix√©e par le mot-cl√© <code>get</code>&#160;; elle retourne
la valeur d&#8217;un attribut.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">getters.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  ean13<span class="token punctuation">:</span> <span class="token string">'9782212139938'</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token function">isbn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// <b class="conum">(1)</b></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ean13<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>ean13<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>isbn<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>D√©finition de l&#8217;accesseur&#160;<code>isbn()</code>.</p>
</li>
<li>
<p>Affiche <code>"9782212139938"</code>&#160;‚Äì c&#8217;est une propri√©t√© de l&#8217;objet <code>nodebook</code>.</p>
</li>
<li>
<p>Affiche <code>"2212139938"</code>&#160;‚Äì <code>isbn()</code> s&#8217;utilise comme un attribut mais sa valeur est calcul√©e √† chaque fois qu&#8217;elle est appel√©e.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le mutateur est une fonction pr√©fix√©e par le mot-cl√© <code>set</code>&#160;; elle d√©finit
la valeur d&#8217;un ou plusieurs attribut(s).</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">setters.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">ean13</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment">// <b class="conum">(1)</b></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>issn <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isbn <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

book<span class="token punctuation">.</span>ean13 <span class="token operator">=</span> <span class="token string">'9782212139938'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>issn<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>isbn<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>ean13<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>D√©finition du mutateur <code>ean13()</code>&#160;‚Äì il accepte un seul argument.</p>
</li>
<li>
<p>Affiche <code>978</code>&#160;‚Äì l&#8217;attribut a √©t√© cr√©√© lors de l&#8217;appel du mutateur.</p>
</li>
<li>
<p>Affiche <code>2212139938</code>&#160;‚Äì idem.</p>
</li>
<li>
<p>Affiche <code>undefined</code>&#160;‚Äì il faudrait cr√©er un accesseur <code>get ean13()</code> pour recomposer dynamiquement sa valeur.</p>
</li>
</ol>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Accesseurs</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les accesseurs.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/get" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/get</a>

</td>
</tr>
</table>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Mutateurs</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les mutateurs.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/set" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/set</a>

</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="class.extends">11.4. H√©ritage</h3>
<div class="paragraph">
<p>


</p>
</div>
<div class="paragraph">
<p>L&#8217;h√©ritage est un m√©canisme d&#8217;extension de classe.
C&#8217;est une pratique peu employ√©e en JavaScript,
principalement en raison de sa nature modulaire et fonctionnelle.</p>
</div>
<div class="paragraph">
<p>L&#8217;h√©ritage se caract√©rise par l&#8217;usage du mot-cl√© <code>extends</code> lors de la
d√©finition de la classe et aussi par l&#8217;utilisation de l&#8217;op√©rateur <code>super()</code>
dans le constructeur.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/extends.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>               <span class="token comment">// <b class="conum">(1)</b></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Sans titre'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token keyword">extends</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>  <span class="token comment">// <b class="conum">(2)</b></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> options<span class="token punctuation">.</span>title<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(3)</b></span>

<span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La classe <code>Product</code> affecte un titre par d√©faut lorsqu&#8217;un nouvel objet est initialis√©.</p>
</li>
<li>
<p>La classe <code>Book</code> affecte un titre donn√© en argument et, sinon, se base sur la valeur par d√©faut de la classe <code>Product</code>.</p>
</li>
<li>
<p>Affiche <code>'Node.js'</code>.</p>
</li>
<li>
<p>Affiche <code>'Sans titre'</code>&#160;‚Äì la propri√©t√© <code>title</code> ne se d√©finit pas dans le constructeur (cf.&#160;<code>class Product</code>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>En pratique, c&#8217;est comme si on empilait les classes les unes sur les autres.
On l√®gue des m√©thodes aux classes qui h√©ritent.
Si une m√©thode porte le m√™me nom, la m√©thode &#8220;en haut de la pile&#8221; a la priorit√©.</p>
</div>
<div class="paragraph">
<p>L&#8217;appel √† la fonction <code>super()</code> <em>appelle le constructeur de la classe √©tendue</em>.
Si on ne l&#8217;appelle pas, le constructeur de la classe parente ne sera pas invoqu√©.</p>
</div>
<div class="paragraph">
<p>On reparlera de l&#8217;h√©ritage dans le <a href="#../chapter-09/index.adoc">chapitre 9</a>
avec un exemple populaire d&#8217;h√©ritage appliqu√© aux composants visuels avec
la biblioth√®que React.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="promise">12. Coordonner des actions asynchrones (Promise)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>


</p>
</div>
<div class="paragraph">
<p>Une promesse est <strong>un objet retourn√© imm√©diatement</strong> mais dont le
<strong>r√©sultat est obtenu plus tard</strong>, de mani√®re asynchrone.
Cette r√©solution est soit <em>positive</em> soit <em>n√©gative</em>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'promesse tenue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>                           <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'un'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// <b class="conum">(2)</b></span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">message</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'deux'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>Promise</code>&#160;‚Äì ce n&#8217;est pas le r√©sultat que l&#8217;on voit, mais l&#8217;objet avec lequel interagir pour √™tre pr√©venu de la mise √† disposition du r√©sultat.</p>
</li>
<li>
<p>Affiche <code>"un"</code>.</p>
</li>
<li>
<p>Affiche <code>"deux"</code>&#160;‚Äì c&#8217;est parce que la ligne d&#8217;avant a mis en attente la <a href="#anonymous-function">fonction anonyme</a>.</p>
</li>
<li>
<p>Affiche <code>"promesse tenue"</code> en dernier.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Design Pattern</span> Executor</div>
<div class="paragraph">
<p>Le fait qu&#8217;une fonction nous passe d&#8217;autres fonctions pour commander
un r√©sultat s&#8217;appelle le <em>pattern Executor</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une <code>Promise</code> s&#8217;orchestre en deux temps&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;initialisation<br>
On d√©cide de la mani√®re dont le traitement asynchrone sera effectu√©.</p>
</li>
<li>
<p>La r√©solution<br>
<em>Positive</em> en appelant <code>resolve()</code> ou <em>n√©gative</em>, en appelant <code>reject()</code>.
Le r√©sultat pass√© √† <code>resolve()</code> sera transmis au premier argument de <code>then()</code>.
Le r√©sultat pass√© √† <code>reject()</code> sera transmis au deuxi√®me argument de <code>then()</code>,
mais aussi au premier argument de <code>catch()</code>.



</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Une instance de <code>Promise</code> expose plusieurs m√©thodes pour propager
le statut de son ex√©cution&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>then(onSuccess[, onError])</code></dt>
<dd>
<p>Fonction acceptant un <em>callback</em> de r√©solution et
un autre de rejet (facultatif).</p>
</dd>
<dt class="hdlist1"><code>catch(onError)</code></dt>
<dd>
<p>Fonction acceptant un <em>callback</em> de rejet.</p>
</dd>
</dl>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/then-catch.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">oddTime</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">parseInt</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span>                 <span class="token comment">// <b class="conum">(1)</b></span>
      <span class="token operator">?</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'le nombre de secondes est impair :-)'</span><span class="token punctuation">)</span>
      <span class="token punctuation">:</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'le nombre de secondes n\'est pas impair :-('</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">oddTime</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span>                                            <span class="token comment">// <b class="conum">(2)</b></span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">msg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token parameter">msg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">oddTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                 <span class="token comment">// <b class="conum">(3)</b></span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">msg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token comment">// <b class="conum">(4)</b></span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">msg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span>                     <span class="token comment">// <b class="conum">(5)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La fonction <code>oddTime()</code> accepte un argument de type &lt;&lt;date,Date&gt;. Elle r√©sout la promesse <em>positivement</em> (<code>resolve()</code>) si le nombre de secondes est impair et <em>n√©gativement</em> (<code>reject</code>) sinon.</p>
</li>
<li>
<p>Utilisation de la forme compacte de <code>then()</code> avec deux <em>callbacks</em>&#160;: un de succ√®s (associ√© √† <code>resolve()</code>) et un d&#8217;√©chec (associ√© √† <code>reject()</code>).</p>
</li>
<li>
<p>On cr√©e une nouvelle promesse, avec une date cal√©e une seconde plus tard.</p>
</li>
<li>
<p>Affiche <code>"le nombre de secondes est impair&#160;:-)"</code> puisque la r√©solution est positive.</p>
</li>
<li>
<p>Affiche <code>"le nombre de secondes n&#8217;est pas impair&#160;:-("</code> puisque la r√©solution est n√©gative.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">üí¨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Histoire</span> Standard <code>Promise/A+</code></div>
<div class="paragraph">
<p>


Historiquement, de nombreuses biblioth√®ques ont propos√© leur propre impl√©mentation de promesses.
Elles avaient le d√©faut de ne pas √™tre interop√©rables.
La sp√©cification <em>Promise/A+</em> (<span class="URL"><a href="https://github.com/promises-aplus/promises-spec" class="bare">github.com/promises-aplus/promises-spec</a></span>)
a √©merg√© pour √©tablir un standard de compatibilit√©.</p>
</div>
<div class="paragraph">
<p>ECMAScript&#160;2015 introduit nativement cette API.
Il n&#8217;y a donc plus besoin de <em>polyfill</em> ou de biblioth√®que pour en b√©n√©ficier.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>En g√©n√©ral, on utilise les promesses <strong>pour aller plus vite</strong>,
parce qu&#8217;on peut continuer √† traiter d&#8217;autres actions en attendant
l&#8217;arriv√©e du r√©sultat.</p>
</div>
<div class="paragraph">
<p>C&#8217;est comme quand on se rend au restaurant&#160;:
les personnes en cuisine traitent des commandes
(actions longues) tandis que les personnes au service g√®rent
des interactions plus courtes mais plus fr√©quentes.
Au final, le ticket de commande contient la liste des promesses dont
on attend la r√©solution.</p>
</div>
<div class="paragraph">
<p>Nous verrons d&#8217;autres utilisations des promesses
dans le reste de l&#8217;ouvrage, plus particuli√®rement
avec <a href="../chapter-09/index.html#io-fetch">fetch()</a> au chapitre&#160;9
ainsi qu&#8217;avec <a href="../chapter-04/index.html#util.promisify">promisify</a> au chapitre&#160;4.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">üìñ</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Promise</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les promesses.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Promise" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Promise</a>

</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">üí°</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Lien</span> Guide des promesses</div>
<div class="paragraph">
<p>Le guide <span class="URL"><a href="https://www.w3.org/2001/tag/doc/promises-guide" class="bare">www.w3.org/2001/tag/doc/promises-guide</a></span> est <em>tr√®s</em> complet.
Il est en anglais ainsi qu&#8217;en libre consultation sur le site du&#160;W3C.</p>
</div>
<div class="paragraph">
<p>Son d√©p√¥t GitHub <span class="URL"><a href="https://github.com/w3ctag/promises-guide" class="bare">github.com/w3ctag/promises-guide</a></span> permet
d&#8217;y contribuer.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="promise.all">12.1. Collection de promesses</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p><code>Promise.all()</code> est une <a href="#class.static">m√©thode statique</a> de la class <em>Promise</em>.
Elle accepte un <a href="#array">tableau</a> de promesses et en retourne elle-m√™me une promesse.
Cette derni√®re est r√©solue positivement si toutes les promesses r√©ussissent
et n√©gativement d√®s que l'<em>une d&#8217;entre elles</em> √©choue.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/all.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">asyncRandom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  <span class="token comment">// <b class="conum">(1)</b></span>
  <span class="token keyword">const</span> timing <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`r√©solu en </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timing<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> timing<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> all <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>                             <span class="token comment">// <b class="conum">(2)</b></span>
  <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

all<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">messages</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>messages<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Cette fonction r√©sout la promesse apr√®s un d√©lai al√©atoire compris entre&#160;0 et 2000&#160;millisecondes.</p>
</li>
<li>
<p>On passe trois promesses √† <code>Promise.all()</code>.</p>
</li>
<li>
<p>La r√©solution est d√©clench√©e d√®s que les trois promesses sont r√©solues&#160;‚Äì l&#8217;argument contient un tableau listant les r√©sultats <em>dans l&#8217;ordre initial</em> des promesses.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple pr√©c√©dent illustre la <strong>parall√©lisation des actions</strong>.
Si la promesse la plus longue est r√©solue en une seconde,
alors le temps d&#8217;attente pour la r√©solution de <em>toutes les promesses</em>
est de une seconde.<br>
Si on avait √©t√© dans un encha√Ænement s√©quentiel, le temps d&#8217;attente
final aurait √©t√© l&#8217;accumulation des temps d&#8217;attente de la r√©solution
de chacune des promesses.</p>
</div>
<div class="paragraph">
<p>Les promesses sont un des meilleurs moyens √† notre disposition pour
<strong>modulariser</strong>, <strong>lin√©ariser</strong> et <strong>clarifier le sens</strong> du flot de notre code.</p>
</div>
</div>
<div class="sect2">
<h3 id="async-await">12.2. async/await</h3>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph">
<p>Les op√©rateurs <code>async</code> et <code>await</code> aident √† mettre en pause
l&#8217;interpr√©teur ECMAScript, en attendant le r√©sultat d&#8217;une
fonction asynchrone (pr√©fix√©e par <code>async</code>).
Les <a href="#promise">promesses</a> sont implicitement compatibles.
On peut donc les mettre √† plat pour obtenir un r√©sultat
sans avoir √† utiliser <code>then()</code> ni&#160;`catch()`.</p>
</div>
<div class="paragraph">
<p>Transformons l&#8217;exemple de la <a href="#promise.all">section pr√©c√©dente</a>
pour comprendre l&#8217;impact de <code>async</code> et de&#160;`await`.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/async-await.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">function</span> <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> timing <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`r√©solu en </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timing<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> timing<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>                  <span class="token comment">// <b class="conum">(1)</b></span>
  <span class="token keyword">const</span> all <span class="token operator">=</span> <span class="token punctuation">[</span>                 <span class="token comment">// <b class="conum">(2)</b></span>
    <span class="token keyword">await</span> <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">await</span> <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">await</span> <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>all<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// <b class="conum">(3)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On cr√©e une <em>fonction asynchrone auto-invoqu√©e</em>&#160;‚Äì parce qu&#8217;on ne peut pas encore utiliser de fonction asynchrone directement au niveau principal d&#8217;un script.</p>
</li>
<li>
<p>Chaque utilisation de <code>await</code> met l&#8217;interpr√©teur en pause.</p>
</li>
<li>
<p>L&#8217;affichage du temps d&#8217;ex√©cution de chaque promesse se fait lorsque les trois promesses sont r√©solues.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On gagne en lisibilit√©, mais on perd en vitesse.
Les promesses sont ex√©cut√©es s√©quentiellement et non en parall√®le.
Il est important d&#8217;arbitrer les choix de conception et d&#8217;√©viter de bloquer
l&#8217;ex√©cution de vos scripts sans raison explicite.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion">13. Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ECMAScript est un langage bien plus riche, complet et √©l√©gant qu&#8217;il n&#8217;y para√Æt.</p>
</div>
<div class="paragraph">
<p>Ce chapitre nous a <strong>appris les diff√©rentes structures de langage</strong>
communes √† tous les environnements comprenant ECMAScript.
Cela s&#8217;applique aussi bien √† Node qu&#8217;aux navigateurs web.<br>
Je vous invite √† revenir √† ce chapitre pour vous rafra√Æchir la m√©moire,
mais aussi pour jouer avec les exemples afin de confirmer votre compr√©hension
du langage.</p>
</div>
<div class="paragraph">
<p>Dans le <a href="#../chapter-04/index.adoc">chapitre suivant</a>, nous allons
<strong>relier ces apprentissages avec Node</strong>&#160;‚Äì notre interpr√©teur et environnement
d&#8217;ex√©cution JavaScript.</p>
</div>
</div>
</div>
</div>
<section class="next">
  <a href="#top">Haut de page</a> ou
  <a href="https://oncletom.io/node.js/#apprendre-node-js-en-ligne" class="read-more">retour au sommaire</a>.
</section>
</body>
</html>