<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Jouer avec JavaScript</title>
<style>
#header,
#content,
#footer {
  margin: 2rem auto;
  max-width: 46rem;
}

#header {
  margin-top: 0;
}

.title,
#toctitle {
  color: var(--dark-accent);
}

a {
  /* white-space: nowrap; */
}

img, iframe, video, audio {
  max-width: 100%;
}

p {
  font-weight: normal;
}

/* Taken out from book.css */
dl dt {
  margin-bottom: 0.3125em;
  font-weight: bold;
}
dl dd {
  margin-bottom: 1.25em;
}

dt,
th.tableblock,
td.content,
div.footnote {
  text-rendering: optimizeLegibility;
}

.literalblock pre,
.literalblock pre[class],
.listingblock pre,
.listingblock pre[class] {
  overflow: auto;
  word-wrap: break-word;
}
.literalblock pre.nowrap,
.literalblock pre[class].nowrap,
.listingblock pre.nowrap,
.listingblock pre[class].nowrap {
  overflow-x: auto;
  white-space: pre;
  word-wrap: normal;
}

.listingblock {
  margin: 0 0 2em;
}
.listingblock > .content {
  position: relative;
}
.listingblock > .title {
  font-weight: bold;
}
.listingblock code[data-lang]::before {
  display: none;
  content: attr(data-lang);
  position: absolute;
  font-size: 0.75em;
  top: 1em;
  right: 1em;
  line-height: 1;
  text-transform: uppercase;
  color: #999;
}
.listingblock:hover code[data-lang]::before {
  display: block;
}
.listingblock.terminal pre .command::before {
  content: attr(data-prompt);
  padding-right: 0.5em;
  color: #999;
}

td.hdlist1,
td.hdlist2 {
  vertical-align: top;
  padding-right: 0.625em;
}
td.hdlist1 {
  font-weight: bold;
}
.literalblock + .colist,
.listingblock + .colist {
  margin-top: -1.5em;
}
.colist td:not([class]):first-child {
  padding: 0.4em 0.75em 0 0.75em;
  line-height: 1;
  vertical-align: top;
}
.colist td:not([class]):first-child img {
  max-width: none;
}
.colist td:not([class]):last-child {
  padding: 0.25em 0;
}

/* Custom classes */

.line-through {
  text-decoration: line-through;
}

.RemarquePreTitre,
#toctitle {
  font-style: normal;
  font-weight: bold;
}
  .RemarquePreTitre::after {
    content: "•";
    padding-left: 5px;
  }
.admonitionblock {
}
.admonitionblock > table,
.exampleblock {
  --commented: rgba(17, 17, 68, .65);
  --border-radius-base: 8px;

  background-color: #fafafa;
  border: 1px solid var(--dark-shade);
  border-left: none;
  border-right: none;
  margin: 1.5em 0;
  padding: 1em;
}
.exampleblock .title {
  font-weight: bold;
}
.icon .title {
  font-size: 2em;
}
  .admonitionblock > table td.icon {
    display: none;
  }

  @media screen and (min-width: 769px) {
    .admonitionblock > table td.icon {
      display: table-cell;
    }
  }

  .admonitionblock > table td.icon {
    padding-right: 1em;
  }
  .admonitionblock > table td.icon img {
    max-width: none;
  }

.colist ol {
  margin-left: 1.5em;  /* aligns with the listing edge */
  padding-left: 0;
  font-weight: bold;   /* makes it stand out more */
}
  .colist ol p {
    margin: 0 0 .5em;
  }
.listingblock:not(.prismjs) pre,
.language-bash.hljs {
  background: #323232;
  color: wheat;
  margin: 0;
  padding: 1rem;
}
.language-bash.hljs .hljs-built_in,
.language-bash.hljs .hljs-builtin-name {
  color: white;
}
.language-bash.hljs .hljs-string {
  color: lightgreen;
}
.language-bash.hljs .hljs-variable {
  color: lightskyblue;
}
.keyseq {
  font-weight: normal;
  white-space: nowrap;
}
.language-bash.hljs .keyseq {
  color: white;
}
.language-bash.hljs kbd {
  background: transparent;
  box-shadow: none;
  color: white;
  font-size: 0.8em;
  font-weight: bold;
  padding: 0.1em 0.4em;
}
.listingblock pre.highlightjs,
.listingblock.prismjs pre {
  background-color: transparent;
  margin: 0;
  padding: 0;
}
.listingblock pre.highlightjs > code,
.listingblock.prismjs .highlight {
  border-left: 4px solid var(--dark-accent);
  padding-left: 1em;
  font-size: .8em;
}
.listingblock pre.highlightjs > code.language-bash {
  border-left-color: limegreen;
}

.hdlist .hdlist1 {
  text-align: right;
  white-space: nowrap;
}

td > p:first-child {
  margin-top: 0;
}

.hljs-comment {
  font-style: normal !important;
}

#toc.toc2 a {
  text-decoration: none;
  white-space: normal;
}
  #toc.toc2 a:hover,
  #toc.toc2 a:focus {
    text-decoration: underline;
  }

#toc.toc2 ul {
  list-style: none;
}

  #toc.toc2 > ul {
    padding-left: 0;
  }

  #toc.toc2 ul ul {
    padding-left: 1em;
  }

@media screen and (min-width: 769px) {
  body {
    padding-left: 25vw !important;
  }

  #header,
  #content,
  #footer {
    margin-left: 0;
  }

  #toc.toc2 {
    height: 100%;
    left: 0;
    max-width: 20vw;
    overflow: auto;
    padding: 1rem;
    position: fixed;
    top: 0;
    z-index: 1000;
  }

  #toc.toc2 > ul {
    font-size: 0.85em;
  }

  #toc li.active > a[href^="#"],
  [id]:target {
    background: #ffc;
  }
}

.admonitionblock.context-callout > table {
  border-width: 5px;
  border-color: var(--brand-color);
}

</style>
<link rel="stylesheet" href="https://oncletom.io/styles/blog.css?v=v3.3.2">
<!-- WebMentions -->
<link rel="pingback" href="https://webmention.io/oncletom.io/xmlrpc">
<link rel="webmention" href="https://webmention.io/oncletom.io/webmention">
<!-- Open Graph -->
<meta property="og:type" content="book">
<meta property="og:book:author" content="Thomas Parisot">
<meta property="og:book:isbn" content="978-2212139938">
<meta property="og:book:release_date" content="978-2212139938">
<meta property="og:book:tag" content="Node.js">
<meta property="og:book:tag" content="JavaScript">
<meta property="og:book:tag" content="npm">
<meta property="og:book:tag" content="Développement front-end">
<meta property="og:book:tag" content="Développement back-end">
<meta property="og:locale" content="fr_FR">
<meta property="og:site_name" content="Node.js • Apprendre par la pratique">
<!-- Twitter OpenGraph -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@oncletom">
<meta name="twitter:creator" content="@oncletom">
<style type="text/css" class="prism-theme">/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>
<style type="text/css" class="extension-interactive-runner">[data-interactive-runtime="loaded"] .interactive--javascript code[data-lang]:before {
  background-color: #fcfcfc;
  border: 1px solid #0c2;
  border-radius: 1px;
  color: #0c2;
  cursor: pointer;
  display: inline-block;
  font-weight: bold;
  padding: .5em 1em;
  top: -2em;
}

  [lang="en"] [data-interactive-runtime="loaded"] .interactive--javascript code[data-lang]:before {
    content: "▶ run code";
  }
  [lang="fr"] [data-interactive-runtime="loaded"] .interactive--javascript code[data-lang]:before {
    content: "▶ voir le résultat";
  }
  .interactive--javascript code[data-label]:before {
    content: attr(data-label);
  }

.interactive iframe {
  position: absolute;
  visibility: hidden;
}

.interactive.status--loaded iframe {
  position: inherit;
  visibility: visible;
}

.interactive.status--loading {
  opacity: .5;
}
</style>
<script class="extension-interactive-runner">
(function(d){
  document.addEventListener('DOMContentLoaded', function(){
    const script = d.createElement('script');
    script.src = 'https://embed.runkit.com/';
    script.async = true;
    script.onload = function(){
      function makeListingInteractive (element){
  if (element.classList.contains('interactive--installed') || element.classList.contains('status--loading')) {
    return;
  }

  const code = element.querySelector('code');
  const nodeVersion = /interactive--runtime--node-([^\s]+)/.exec(element.className)[1];
  const isEndpoint = element.classList.contains('interactive--endpoint');
  const mode = isEndpoint ? 'endpoint' : null;
  let preamble = '';

  const source = code
    .textContent
    .replace(/\/\/\s*\(\d+\)$/gm, '')
    .replace(/^["']?use strict["'][; ]*\n/, '');

  if (isEndpoint) {
    preamble = `process.nextTick(() => {
      if (typeof module.exports === 'function') {
        exports.endpoint = module.exports;
      }
      else if (typeof server !== 'undefined') {
        exports.endpoint = server.listeners("request").pop();
      }
});`
  }

  element.classList.add('status--loading');

  // eslint-disable-next-line no-undef
  RunKit.createNotebook({
    nodeVersion,
    element,
    source,
    mode,
    preamble,
    onLoad: function(ntbk) {
      element.classList.add('interactive--installed');
      element.classList.remove('status--loading');
      element.classList.add('status--loaded');
      code.parentNode.setAttribute('hidden', true);

      ntbk.evaluate();
    }
  });
}
function installEvents () {
  function getParent(el, condition) {
    let parent = el;

    while(parent = parent.parentNode) {
      if (condition(parent)) {
        return parent;
      }
    }
  }

  function hasClass(className) {
    return function check(el) {
      return el.classList.contains(className);
    }
  }

  document.querySelector('body').addEventListener('click', function(el) {
    if (el.target.classList.contains('language-javascript') || el.target.classList.contains('language-js')) {
      const parentNode = getParent(
        el.target,
        hasClass('interactive--javascript')
      );

      makeListingInteractive(parentNode);
    }
  });
}
      installEvents();
      document.body.dataset.interactiveRuntime = 'loaded';
    };
    document.body.appendChild(script);
  });
})(document);</script>
<style type="text/css">
.listingblock [data-bash-subs]::before {
  content: attr(data-bash-subs) " ";
  opacity: .5; }

.listingblock [data-bash-conum]::before {
  content: "(" attr(data-bash-conum) ")";
  font-weight: bold;
  opacity: .7;
}</style>
<script>
(function(d){
  d.addEventListener('DOMContentLoaded', function(){
    const script = d.createElement('script');
    script.src = 'https://unpkg.com/menuspy@1.3.0/dist/menuspy.js';
    script.async = true;
    script.onload = () => new MenuSpy(document.querySelector('#toc'), {enableLocationHash: false});
    d.body.appendChild(script);
  });
})(document);</script>
<style type="text/css">
#toc li.active > a[href^="#"] {
  font-weight: bold;
}
#toc li.active > a[href^="#"]::before {
  content: "▶ ";
  display: inline-block;
  position: absolute;
  margin-left: -1.2em;
  font-size: .8em;
  margin-top: 3px;
}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jouer avec JavaScript</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table des matières</div>
<ul class="sectlevel1">
<li><a href="#definition">1. Qu&#8217;est-ce que JavaScript ?</a>
<ul class="sectlevel2">
<li><a href="#ecmascript5_aka_es5">1.1. ECMAScript&#160;5 (aka ES5)</a></li>
<li><a href="#ecmascript_2015_akaes6_puises2015">1.2. ECMAScript 2015 (aka&#160;ES6 puis&#160;ES2015)</a></li>
<li><a href="#ecmascript_2016_etc_akaes2016">1.3. ECMAScript 2016, etc. (aka&#160;ES2016)</a></li>
</ul>
</li>
<li><a href="#primitives">2. Éléments de base du langage</a>
<ul class="sectlevel2">
<li><a href="#les_types_de_données">2.1. Les types de données</a></li>
<li><a href="#les_variables">2.2. Les variables</a></li>
<li><a href="#les_instructions">2.3. Les instructions</a></li>
<li><a href="#scope">2.4. La portée (scope)</a></li>
</ul>
</li>
<li><a href="#string">3. Jongler avec du texte (chaînes de caractères)</a>
<ul class="sectlevel2">
<li><a href="#regexp">3.1. Expressions régulières (RegExp)</a></li>
</ul>
</li>
<li><a href="#boolean">4. Jongler avec des valeurs vraies ou fausses (booléens)</a></li>
<li><a href="#number">5. Jongler avec des valeurs numériques (Number, Math)</a>
<ul class="sectlevel2">
<li><a href="#opérations_mathématiques">5.1. Opérations mathématiques</a></li>
<li><a href="#nan">5.2. Les nombres qui n&#8217;en sont pas (<em>NaN</em>)</a></li>
<li><a href="#convertir_en_nombre">5.3. Convertir en nombre</a></li>
<li><a href="#formater_et_arrondir_des_nombres">5.4. Formater et arrondir des nombres</a></li>
</ul>
</li>
<li><a href="#functions">6. Créer et réutiliser des blocs de code (fonctions)</a>
<ul class="sectlevel2">
<li><a href="#anonymous-function">6.1. Les fonctions anonymes</a></li>
<li><a href="#callback">6.2. Les fonctions de rappel (callback)</a></li>
<li><a href="#rest-parameters">6.3. Paramètres du reste (rest parameters)</a></li>
</ul>
</li>
<li><a href="#array">7. Lister, filtrer et trier des éléments (Array)</a>
<ul class="sectlevel2">
<li><a href="#créer_des_tableaux_à_partir_dautres_valeurs">7.1. Créer des tableaux à partir d&#8217;autres valeurs</a></li>
<li><a href="#array.concat">7.2. Combiner des tableaux</a></li>
<li><a href="#array.forEach">7.3. Itérer sur les valeurs avec des boucles</a></li>
<li><a href="#array.sort">7.4. Trier les valeurs</a></li>
<li><a href="#array.map">7.5. Transformer les valeurs</a></li>
<li><a href="#array.filter">7.6. Filtrer les valeurs</a></li>
<li><a href="#array.find">7.7. Identifier des valeurs</a></li>
<li><a href="#array-destructuring">7.8. Décomposition de tableau (destructuring)</a></li>
</ul>
</li>
<li><a href="#object">8. Représenter des structures d&#8217;objet et y accéder</a>
<ul class="sectlevel2">
<li><a href="#object-destructuring">8.1. Décomposition d&#8217;objet (<em>destructuring</em>)</a></li>
<li><a href="#object.assign">8.2. Combiner des objets</a></li>
<li><a href="#itérer_sur_des_objets">8.3. Itérer sur des objets</a></li>
<li><a href="#identifier_des_valeurs">8.4. Identifier des valeurs</a></li>
</ul>
</li>
<li><a href="#json">9. Lire et écrire des données au format JSON</a></li>
<li><a href="#date">10. Interagir avec des dates</a>
<ul class="sectlevel2">
<li><a href="#intl.datetimeformat">10.1. Formatage internationalisé (Intl.DateTimeFormat)</a></li>
</ul>
</li>
<li><a href="#class">11. Partager une logique avec des objets de même nature (Class)</a>
<ul class="sectlevel2">
<li><a href="#class.method">11.1. Méthodes d&#8217;instance</a></li>
<li><a href="#class.static">11.2. Méthodes statiques</a></li>
<li><a href="#object-getset">11.3. Accesseurs et mutateurs</a></li>
<li><a href="#class.extends">11.4. Héritage</a></li>
</ul>
</li>
<li><a href="#promise">12. Coordonner des actions asynchrones (Promise)</a>
<ul class="sectlevel2">
<li><a href="#promise.all">12.1. Collection de promesses</a></li>
<li><a href="#async-await">12.2. async/await</a></li>
</ul>
</li>
<li><a href="#conclusion">13. Conclusion</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock tip context-callout">
<table>
<tr>
<td class="icon">
<div class="title">💡</div>
</td>
<td class="content">
<div class="paragraph">
<p>Vous êtes en train de lire le
<a href="https://oncletom.io/node.js/">livre &#8220;Node.js&#8221;</a>, écrit par
<a href="https://oncletom.io">Thomas Parisot</a> et publié par les
<a href="https://www.eyrolles.com/Informatique/Livre/node-js-9782212139938/">Éditions Eyrolles</a>.</p>
</div>
<div class="paragraph">
<p>Il vous plaît&#160;? Achetez-le en ligne sur
<a href="https://amzn.to/2E58PEw">Amazon</a>,
<a href="https://www.eyrolles.com/Informatique/Livre/node-js-9782212139938/">Eyrolles</a> ou
<a href="https://www.placedeslibraires.fr/livre/9782212139938">Place des Libraires</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Passons en revue les variables et structures ECMAScript pour mieux comprendre
ce qui en fait un langage élégant et moderne.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<div class="title">Sommaire</div>
<ul>
<li>
<p>Qu&#8217;est-ce que JavaScript&#160;?</p>
</li>
<li>
<p>Comprendre l&#8217;évolution de la spécification ECMAScript</p>
</li>
<li>
<p>Jongler avec les différentes structures du langage</p>
</li>
<li>
<p>En savoir plus sur des éléments avancés du langage</p>
</li>
</ul>
</div>
</div>
</div>
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>JavaScript est souvent raillé.
Parce que ce n&#8217;est pas un vrai langage.
Parce qu&#8217;il a été créé en 6 jours.
Parce qu&#8217;il n&#8217;est pas orienté objet.</p>
</div>
<div class="paragraph">
<p>JavaScript est un langage expressif qui a énormément gagné en maturité
depuis les années 2010.
Il se révèle parfaitement opérationnel dès lors que l&#8217;on s&#8217;intéresse
à ses fonctionnalités, sans faire de hors-piste.</p>
</div>
<div class="paragraph">
<p>Les types de données et les méthodes de manipulations qu&#8217;elles nous offrent
permettent d&#8217;écrire un code plus simple, à lire et à produire.
Certaines structures de données nous aident à mieux organiser nos données
ainsi qu&#8217;à mieux les traiter.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="definition">1. Qu&#8217;est-ce que JavaScript ?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Je vais vous présenter plusieurs exemples de code.
Ils ont en commun d&#8217;être tous écrits en JavaScript.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">intro/ecmascript.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> baseUrl <span class="token operator">=</span> <span class="token string">'https://oncletom.io/node.js'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> filePath <span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/package.json`</span></span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet exemple illustrait la création de variables, de chaînes de caractères.
Ce sont des fonctionnalités de base de la spécification ECMAScript.</p>
</div>
<div class="listingblock prismjs highlight-prismjs">
<div class="title">intro/web.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://oncletom.io/node.js/package.json'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">pkg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pkg<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pkg<span class="token punctuation">.</span>version<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>fetch()</code> ne fait pas partie de la spécification ECMAScript.
C&#8217;est un ajout des navigateurs web.
On parle alors d'<strong>API JavaScript pour le Web</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">💬</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Glossaire</span> API (Interface de programmation)</div>
<div class="paragraph">
<p>Les API sont des interfaces pour dialoguer avec un programme ou une
ressource informatique.
Elles définissent des vocabulaires pour exécuter des actions spécifiques.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock prismjs highlight-prismjs">
<div class="title">intro/dom.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> docBody <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
docBody<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La variable <code>document</code> et les méthodes <code>querySelector</code> et <code>addEventListener</code>
font aussi partie des API JavaScript pour le Web.
En l&#8217;occurrence, elles font partie de l&#8217;API DOM (<em>Document Object Model</em>),
un mécanisme pour interagir avec une page web grâce à ECMAScript.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">intro/node.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>homedir<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token function">homedir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  err <span class="token operator">?</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ce dernier exemple est spécifique à Node.
Ce dernier propose la fonction <code>require()</code> pour charger des modules et interagir
avec le système d&#8217;exploitation.
</p>
</div>
<div class="paragraph">
<p>Autrement dit,
<strong>ECMAScript est un langage, une grammaire avec des fonctionnalités de base</strong>.
Chaque environnement&#160;– les navigateurs web, Node&#160;– le comprend et lui ajoute
de nouvelles expressions, contextuelles à cet environnement d&#8217;exécution.
<strong>JavaScript est le grand ensemble des technologies qui reposent sur ECMAScript</strong>
pour fonctionner.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">💬</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Histoire</span> À propos de JavaScript</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>JavaScript est inventé en 1995 par Brendan&#160;Eich alors qu&#8217;il est employé de
la société Netscape Communications.
Microsoft lui emboîte le pas en incluant JavaScript dans son logiciel
Internet&#160;Explorer, alors en version&#160;3.
Pour des raisons de droits de marque, il y est dénommé JScript.</p>
</div>
<div class="paragraph">
<p>La spécification est ensuite validée par l&#8217;organisme <em>Ecma International</em>
en juin 1997 sous le nom d&#8217;ECMAScript, standard ECMA-262.</p>
</div>
<div class="paragraph">
<p>Le terme JavaScript est resté dans le vocabulaire courant, mais, en fait,
il s&#8217;agit bien d&#8217;ECMAScript.</p>
</div>
<div class="paragraph">
<p>Adobe Flash utilise un dérivé d&#8217;ECMAScript&#160;: ActionScript.
Bien des machines virtuelles sont capables d&#8217;interpréter partiellement ou
intégralement ECMAScript&#160;: Rhino, Konq, BESEN en Object Pascal ou encore
Esprima, qui est elle-même écrite dans ce langage.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Si d&#8217;autres langages de programmation se cantonnent
soit au côté client (VBScript, ActionScript, Elm),
soit au côté serveur (Ruby, Python, Haskell),
JavaScript a débuté côté client pour s&#8217;étendre aussi côté serveur.
Un développeur ou une développeuse dite <em>full&#160;stack</em> programme des applications
sur les deux fronts.
Node a cet avantage d&#8217;unifier le langage de programmation entre les environnements
client et serveur.</p>
</div>
<div class="paragraph">
<p>Le langage ECMAScript&#160;– appelons-le ainsi à partir de maintenant&#160;–
a évolué au fil du temps.
Il s&#8217;est enrichi de nouvelles fonctionnalités au fil des versions, mais aussi
de sucres syntaxiques (raccourcis d&#8217;écriture)
et de rigueur aussi, pour corriger des défauts de <em>design</em>.</p>
</div>
<div class="paragraph">
<p>Le comité de travail TC39 (<em>Technical Committee</em>,
<span class="URL"><a href="https://github.com/tc39" class="bare">github.com/tc39</a></span>) est en charge de l&#8217;évolution
du langage, standardisé sous le doux sobriquet de <em>standard ECMA-262</em>,
à charge ensuite aux différents implémenteurs de suivre les changements
et de les incorporer dans leurs machines virtuelles.

</p>
</div>
<div class="paragraph">
<p>Node se base sur la machine virtuelle&#160;<a href="../chapter-01/index.html#v8">V8 de Google</a>
pour interpréter les expressions ECMAScript.
De fait, Node comprend les mêmes expressions ECMAScript que&#160;V8.
</p>
</div>
<div class="paragraph">
<p>Nous verrons un peu plus tard dans ce chapitre comment suivre la
compatibilité de Node avec ECMAScript.
Intéressons-nous à l&#8217;évolution du langage et à ce que ça nous apporte.</p>
</div>
<div class="sect2">
<h3 id="ecmascript5_aka_es5">1.1. ECMAScript&#160;5 (aka ES5)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>ECMAScript a été standardisé dans sa version&#160;5 en décembre&#160;2009.
La révision&#160;5.1 de juin&#160;2011 est une correction mineure de la spécification.</p>
</div>
<div class="paragraph">
<p>Il s&#8217;agit d&#8217;une évolution majeure dans l&#8217;histoire du langage.
La précédente version&#160;– ECMAScript&#160;3&#160;– était âgée de dix&#160;ans.</p>
</div>
<div class="paragraph">
<p>ECMAScript&#160;5 limite drastiquement certains effets indésirables du langage
grâce au <em>mode strict</em>.
De nouvelles méthodes de manipulation de tableaux et d&#8217;objets voient le jour,
ainsi qu&#8217;une prise en charge native du format de données&#160;<a href="#json">JSON</a>.</p>
</div>
<div class="paragraph">
<p>La standardisation de cette version d&#8217;ECMAScript a contribué à redorer
l&#8217;image du langage, mais aussi à faire émerger de nouvelles pratiques
de programmation.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Table de compatibilité
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://kangax.github.io/compat-table/es5/" class="bare">kangax.github.io/compat-table/es5/</a></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Spécification
</td>
<td class="hdlist2">
<p>  <span class="URL"><a href="https://www.ecma-international.org/ecma-262/5.1/" class="bare">www.ecma-international.org/ecma-262/5.1/</a></span>

</p>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/compat-table.png" alt="compat table" width="85%">
</div>
<div class="title">Figure 1. Table de compatibilité</div>
</div>
</div>
<div class="sect2">
<h3 id="ecmascript_2015_akaes6_puises2015">1.2. ECMAScript 2015 (aka&#160;ES6 puis&#160;ES2015)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>La spécification ECMAScript&#160;2015 (ES2015) a été publiée en juin&#160;2015.
Elle succède à ECMAScript&#160;5 après six années de gestation.
Cette version a successivement été appelée ECMAScript Harmony, ECMAScript&#160;6,
puis ECMAScript&#160;2015.</p>
</div>
<div class="paragraph">
<p>De nombreuses idées ont été piochées dans le langage
CoffeeScript (<span class="URL"><a href="http://coffeescript.org" class="bare">coffeescript.org</a></span>).
Et surtout, un nouveau type d&#8217;outillage s&#8217;est formé pour commencer
à utiliser ce JavaScript du futur avec le compilateur
<em>traceur</em> de Google dès&#160;2011 (<span class="URL"><a href="https://github.com/google/traceur-compiler" class="bare">github.com/google/traceur-compiler</a></span>),
puis avec le projet indépendant <em>6to5</em> dès&#160;2014.
Ce dernier a été renommé en Babel (<span class="URL"><a href="https://babeljs.io" class="bare">babeljs.io</a></span>)
et son instigateur a par la suite été embauché par Facebook.</p>
</div>
<div class="paragraph">
<p>La pratique de compiler du JavaScript en JavaScript était en rupture
avec ce qui se faisait précédemment&#160;:
attendre qu&#8217;une fonctionnalité soit adoptée par un dénominateur commun
de navigateurs web pour s&#8217;en servir.
Cette fois-ci, on pouvait se servir du futur, dès aujourd&#8217;hui.</p>
</div>
<div class="paragraph">
<p>De fait, il n&#8217;y a pas eu à attendre six ans et les différentes implémentations
pour profiter de ce qu&#8217;il y avait de meilleur.</p>
</div>
<div class="paragraph">
<p>Le prix à payer&#160;? Un ticket d&#8217;entrée plus élevé lié à la maîtrise
de l&#8217;outillage associé.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Table de compatibilité (navigateurs&#160;web)
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://kangax.github.io/compat-table/es6/" class="bare">kangax.github.io/compat-table/es6/</a></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Table de compatibilité (Node.js)
</td>
<td class="hdlist2">
<p><span class="URL"><a href="https://node.green/" class="bare">node.green/</a></span></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Spécification
</td>
<td class="hdlist2">
<p>  <span class="URL"><a href="https://www.ecma-international.org/ecma-262/6.0/" class="bare">www.ecma-international.org/ecma-262/6.0/</a></span>
</p>
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/node-green.png" alt="node green" width="85%">
</div>
<div class="title">Figure 2. Illustration de l&#8217;évolution de la compatibilité ECMAScript au fil des versions de&#160;Node</div>
</div>
</div>
<div class="sect2">
<h3 id="ecmascript_2016_etc_akaes2016">1.3. ECMAScript 2016, etc. (aka&#160;ES2016)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Depuis la sortie d&#8217;ECMAScript&#160;2015, l&#8217;intention est de publier une
nouvelle spécification par an, de travailler les fonctionnalités une par une
pour ne pas attendre trop longtemps avant de les ratifier.
En conséquence, les nouvelles versions annuelles sont beaucoup plus
incrémentales.
Elles se font moins attendre et contiennent moins de grands bouleversements.</p>
</div>
<div class="paragraph">
<p>Les fonctionnalités en cours de préparation sont listées
dans le dépôt GitHub suivant&#160;: <span class="URL"><a href="https://github.com/tc39/proposals" class="bare">github.com/tc39/proposals</a></span>.
Le dernier stade avant la validation est le <em>stage&#160;3</em>.
Dès qu&#8217;une fonctionnalité passe en <em>stage&#160;4</em>, elle est incluse
dans la prochaine version d&#8217;ECMAScript
– ECMAScript&#160;2019 une fois l&#8217;année 2019 terminée.</p>
</div>
<div class="paragraph">
<p>Les fonctionnalités approuvées sont consignées dans un document&#160;:
<span class="URL"><a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md" class="bare">github.com/tc39/proposals/blob/master/finished-proposals.md</a></span>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="primitives">2. Éléments de base du langage</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Cette section décrit les notions nécessaires
pour s&#8217;approprier le reste des exemples de l&#8217;ouvrage.
On apprendra notamment à créer des variables, à naviguer dans
des listes d&#8217;éléments et à faire la différence
entre un objet et une fonction.</p>
</div>
<div class="sect2">
<h3 id="les_types_de_données">2.1. Les types de données</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Qu&#8217;entend-on par <em>type de données</em>&#160;?
Faisons-nous notre propre idée avec une suite d&#8217;exemples.
Ces notions seront développées dans le reste du chapitre,
pour mieux comprendre ce que l&#8217;on peut en faire.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/string.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token string">'Node.js'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Une valeur entourée de guillemets est considérée
par l&#8217;interpréteur ECMAScript comme une chaîne de caractères, du texte.

</p>
</div>
<div class="paragraph">
<p>Ces guillemets sont selon les cas des guillemets simples&#160;('),
doubles (") ou obliques (`).</p>
</div>
<div class="paragraph">
<p>On peut effectuer des opérations d&#8217;identification ou d&#8217;assemblage avec une
valeur de type <strong>chaîne de caractères</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/number.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token number">3</span>

<span class="token number">12.3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ECMAScript considère les entiers (<code>3</code>&#160;dans cet exemple)
et les réels (<code>12.3</code>&#160;dans cet exemple) comme des nombres.
Il ne fait <em>pas</em> de distinction entre les&#160;deux.

</p>
</div>
<div class="paragraph">
<p>On peut effectuer des opérations mathématiques entre plusieurs
valeurs de type <strong>nombre</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/boolean.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token boolean">true</span>

<span class="token boolean">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ECMAScript considère deux valeurs pour signifier <em>vrai</em> ou <em>faux</em>&#160;:
respectivement <code>true</code> et <code>false</code>.

</p>
</div>
<div class="paragraph">
<p>On peut effectuer des opérations logiques avec une
valeur de type <strong>booléen</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/null.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">null</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>On utilise <code>null</code> pour signifier l'<strong>absence de valeur</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/undefined.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">undefined</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La valeur <code>undefined</code> est utilisée pour signifier
qu&#8217;une <strong>valeur</strong> est <strong>inconnue</strong>.
Rares sont les cas où on choisira ce type de données par nous-même.

</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Primitives</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur primitives.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Data_structures" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Data_structures</a>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Il existe trois autres types de données qui se basent sur ces types
dits <em>primitifs</em>.
Ils sont destinés à ranger, à classer et à exprimer de nouvelles valeurs
en fonction d&#8217;autres.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/array.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Un tableau se déclare en encadrant une suite de valeurs entre crochets.
Il est capable de contenir n&#8217;importe quel type de valeurs et autant que nécessaire.
L&#8217;ordre des valeurs a généralement une importance.

</p>
</div>
<div class="paragraph">
<p>On peut effectuer des opérations de tri et de sélection avec un
<strong>tableau de valeurs</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/object.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  isbn<span class="token punctuation">:</span> <span class="token string">'978-2212139938'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Un objet se déclare en encadrant une suite de <em>paires clé/valeur</em>
entre accolades.
Il fonctionne comme un <em>dictionnaire</em>&#160;: on associe une valeur (type au choix)
à une clé (un intitulé, un label).
L&#8217;ordre des paires n&#8217;a généralement pas d&#8217;importance.

</p>
</div>
<div class="paragraph">
<p>On peut effectuer des opérations de sélection avec un
<strong>objet de valeurs</strong>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/function.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">function</span> <span class="token function">double</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">double</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Une fonction accepte des <em>arguments</em>, de n&#8217;importe quel type et
autant que nécessaire.
Elle doit être <em>déclarée</em> pour être <em>exécutée</em>
(dernière ligne de l&#8217;exemple précédent).

</p>
</div>
<div class="paragraph">
<p>Une fonction <em>retourne</em> un résultat explicite avec le
mot-clé <code>return</code>.
Dans le cas contraire, ECMAScript considère
que la valeur retournée équivaut implicitement à <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>On peut effectuer des opérations de transformation avec une fonction.</p>
</div>
<div class="paragraph">
<p>Les fonctions sont destinées à être <em>appelées</em>, pour effectuer
des traitements répétitifs.
Dès que l&#8217;on doit écrire deux fois la même chose,
on l&#8217;écrit dans une fonction qu&#8217;on appelle deux&#160;fois.</p>
</div>
</div>
<div class="sect2">
<h3 id="les_variables">2.2. Les variables</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Les variables servent à ranger des valeurs.
On peut ainsi les réutiliser plus tard, les transmettre et prendre
des décisions en fonction de ce qu&#8217;elles contiennent.</p>
</div>
<div class="paragraph">
<p>Les variables nous aident à <em>donner du sens</em> à notre code,
à le rendre intelligible par d&#8217;autres personnes
ainsi qu&#8217;à nommer des choses comme on le ferait dans notre quotidien.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">base/variables.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  isbn<span class="token punctuation">:</span> <span class="token string">'978-2212139938'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> base_price <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">double</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

book<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token function">double</span><span class="token punctuation">(</span>base_price<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>À votre avis, quel est le prix du livre calculé dans
l&#8217;exemple précédent&#160;?
Il suffit de suivre le chemin que prend la nouvelle valeur
rangée dans la clé <code>price</code> de l&#8217;objet <code>book</code>, calculée par la fonction
<code>double</code> à laquelle on passe la valeur contenue dans la variable <code>base_price</code>.</p>
</div>
<div class="paragraph">
<p>Le mot-clé <code>const</code> nous a servi à <em>déclarer</em> une variable.
On ne peut étiqueter ainsi une variable avec le même nom qu&#8217;une seule fois.
L&#8217;exemple suivant générera une erreur lors de la deuxième affectation&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">variables/const.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> base_price <span class="token operator">=</span> <span class="token number">13</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> base_price <span class="token operator">=</span> <span class="token number">14</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">💬</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Question</span> Une variable constante ?</div>
<div class="paragraph">
<p><code>const</code> est un type de variable qui ne peut être ni redéclaré ni être réaffecté&#160;:
c&#8217;est en ça qu&#8217;il est <em>constant</em>.</p>
</div>
<div class="paragraph">
<p>Une variable <code>const</code> n&#8217;empêche pas la modification de son contenu, dans le cas
d&#8217;un tableau ou d&#8217;un objet.
La fonction <code>Object.freeze()</code> est une réponse adaptée pour garantir son immuabilité.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">variables/const-freeze.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> table <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

table<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(1)</b></span>

Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>
table<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[ 'a', 'b', 'c' ]</code>.</p>
</li>
<li>
<p>L&#8217;objet <code>table</code> est gelé grâce à la fonction <code>Object.freeze()</code>.</p>
</li>
<li>
<p>Cette ligne lance une erreur car nous tentons de modifier un objet gelé.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p></p>
</div>
</div>
<div class="sect2">
<h3 id="les_instructions">2.3. Les instructions</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Des <em>instructions</em> nous servent à suivre, éviter ou répéter
des chemins dans notre code.</p>
</div>
<div class="paragraph">
<p>L&#8217;instruction&#160;<code>if</code> exécute du code s&#8217;il remplit une condition.
Cette dernière peut être une <em>valeur</em> ou une <em>expression</em> interprétée
pour savoir à quel <em>booléen</em> elle correspond.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">instructions/if.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span>published <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span> book<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le livre est publié (et a un titre)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;exemple précédent vérifie que les deux conditions sont remplies
(opérateur <code>&amp;&amp;</code>) pour afficher un message en conséquence.
</p>
</div>
<div class="paragraph">
<p>On notera au passage que <code>book.title</code> n&#8217;est pas un booléen.
ECMAScript regarde dans ce cas que la chaîne de caractères
contient <em>au moins un caractère</em>.
On expliquera ce comportement plus en détail dans la section
&#8220;<a href="#boolean">Jongler avec des valeurs vraies ou fausses</a>&#8221;.</p>
</div>
<div class="paragraph">
<p>L&#8217;instruction&#160;<code>if</code> peut être complétée avec l&#8217;instruction <code>else</code>
pour exécuter du code qui répondrait au cas contraire.
Il est possible d&#8217;imbriquer plusieurs <code>else if</code> à la suite.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">instructions/else-if.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span>published <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span> book<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le livre est publié avec un titre.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span>published<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le livre est publié (sans titre).'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le livre n\'est pas publié.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notre exemple n&#8217;empruntera qu&#8217;un seul des chemins, mais on constate
qu&#8217;on pourrait en emprunter un autre
en modifiant la valeur des clés <code>title</code> et <code>published</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="scope">2.4. La portée (scope)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>La <em>portée</em> est un concept très présent dans ECMAScript.
On y fait souvent référence en parlant de <em>variable globale</em>&#160;et
de <em>variable locale</em>.
C&#8217;est une sorte de frontière d&#8217;accès à la valeur
d&#8217;une variable.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">scopes/local.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">function</span> <span class="token function">secret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'devinette'</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token string">'None shall pass'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">secret</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Dans cet exemple, la variable <code>secret</code> de type fonction a une portée globale au script.
En revanche, la variable <code>mot</code> est définie dans la fonction <code>secret</code>
et n&#8217;est donc pas accessible en dehors de la portée de la fonction.
À l&#8217;inverse, ce qui est défini <em>en dehors</em> d&#8217;une fonction
est accessible <em>à l&#8217;intérieur</em> d&#8217;une fonction.</p>
</div>
<div class="paragraph">
<p>La portée de la variable <code>mot</code> est locale à la fonction <code>secret</code>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">scopes/global.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> year <span class="token operator">=</span> <span class="token number">2018</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">nextYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">nextYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici, nous illustrons la portée globale de la variable
<code>year</code>.
Elle est définie un cran au-dessus des fonctions <code>next</code> et <code>nextYear</code>.
On peut y accéder, comme en atteste le code de la fonction <code>nextYear</code>.</p>
</div>
<div class="paragraph">
<p>À l&#8217;inverse, la variable <code>value</code> a une portée locale
– elle est passée en paramètre de la fonction <code>next</code>.
ECMAScript génèrera une erreur si on tente
d&#8217;y accéder en dehors de sa portée.</p>
</div>
<div class="paragraph">
<p><strong>La portée est délimitée par les fonctions</strong>.
En l&#8217;absence de fonction, la portée maximale est celle du module (script)
dans lequel la variable est déclarée.</p>
</div>
<div class="paragraph">
<p>Il existe un deuxième type de portée&#160;: la <em>portée lexicale</em>.
L&#8217;exemple suivant servira à illustrer la nature de sa délimitation.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">scopes/lexical.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  published<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>book<span class="token punctuation">.</span>published<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> price <span class="token operator">=</span> <span class="token number">32</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Le livre </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> coûte </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>price<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">€.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Le livre </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>book<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> coûte </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>price<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">€.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le mot-clé <code>const</code> crée une variable certes,
mais une variable dont la portée est <em>lexicale</em>.
<strong>La portée lexicale est délimitée par le bloc d&#8217;instructions</strong>
dans lequel la variable est déclarée.
</p>
</div>
<div class="paragraph">
<p>Ainsi, la variable <code>price</code> n&#8217;existe que dans le cadre du bloc <code>if</code>.</p>
</div>
<div class="paragraph">
<p>La portée lexicale sert à déclarer des variables sans "polluer" le reste du script,
pour que son existence soit oubliée aussitôt le bloc exécuté.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="string">3. Jongler avec du texte (chaînes de caractères)</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Il est commun d&#8217;avoir à travailler avec des chaînes de caractères.
Elles servent à stocker des URL, des titres, des identifiants,
des tweets, des messages et des textes longs, entre autres.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token comment">// Utilisation de guillemets simples</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'L\'après-midi\nLe soir'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token comment">// Utilisation de guillemets doubles</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"L'après-midi\nLe soir"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token comment">// Utilisation de guillemets obliques</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`L'après-midi
Le soir`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>                              <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Utilisation de guillemets simples (<code>\n</code> sert à revenir à la ligne).</p>
</li>
<li>
<p>Utilisation de guillemets doubles&#160;: évite d&#8217;échapper le guillemet simple.</p>
</li>
<li>
<p>Utilisation de guillemets obliques&#160;: autorise l&#8217;écriture sur plusieurs lignes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Tous les caractères sont utilisables&#160;: lettres, chiffres,
caractères accentués, émojis et même des sinogrammes ou des kanjis.
Autrement dit, il n&#8217;y a pas de limite.
Les environnements d&#8217;exécution se représentent les caractères au format
UTF-16 (tables de stockage Unicode sur 16&#160;bits de données).</p>
</div>
<div class="paragraph">
<p>Il est fréquent d&#8217;avoir à <em>concaténer</em> des chaînes de caractères,
ou à les composer à partir d&#8217;une autre variable.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/concat.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'pot'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mot<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> de colle`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mot<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> de fleur`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Toute chaîne de caractères offre un ensemble
d'<em>attributs</em> (<code>.quelque-chose</code>)
et de <em>méthodes</em> (<code>.autre-chose()</code>) pour en savoir plus
sur la chaîne mais aussi pour la transformer.</p>
</div>
<div class="paragraph">
<p>Par exemple, on connaît la longueur d&#8217;une chaîne via son attribut <code>length</code>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/length.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ♥ JavaScript'</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>14</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>0</code>.
</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On accède à un caractère spécifique en utilisant
la chaîne comme un tableau, ou à l&#8217;aide d&#8217;une méthode dédiée&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/char-at.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'Node.js'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>N</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>o</code>.
</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">🚨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Attention</span></div>
<div class="paragraph">
<p>Le premier caractère d&#8217;une chaîne est à l&#8217;index&#160;0 et non pas à&#160;1.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Deux autres fonctions transforment
un texte en lettres minuscules ou majuscules&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/lower-upper-case.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'Node.js'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">toLocaleUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>node.js</code>.</p>
</li>
<li>
<p>Affiche <code>NODE.JS</code>.

</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>D&#8217;autres fonctions nettoient ou complètent les espaces autour,
au début ou à la fin d&#8217;une chaîne de caractères&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/trim-pad.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mot <span class="token operator">=</span> <span class="token string">'  Node.js  '</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">trimLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mot<span class="token punctuation">.</span><span class="token function">trimRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span>

<span class="token keyword">const</span> swiftCode <span class="token operator">=</span> <span class="token string">'BARCGB22'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>swiftCode<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>Node.js</code>.</p>
</li>
<li>
<p>Affiche <code>Node.js&#160;&#160;</code>.</p>
</li>
<li>
<p>Affiche <code>&#160;&#160;Node.js</code>.</p>
</li>
<li>
<p>Affiche <code>BARCGB22XXX</code>.
</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Dans cet exemple, la méthode <code>padEnd</code> complète jusqu&#8217;à <code>11</code>&#160;caractères,
avec la lettre <code>X</code>.
La méthode <code>padStart</code> fait la même chose mais avec le début de la chaîne.

</p>
</div>
<div class="paragraph">
<p><code>indexOf</code> retourne la position de la <em>première occurrence</em> dans une chaîne
d&#8217;une sous-chaîne passée en paramètre.
Si la valeur n&#8217;est pas trouvée, la méthode renvoie la valeur&#160;<code>-1</code>.
À l&#8217;inverse, <code>lastIndexOf</code> retournera la dernière occurrence trouvée&#160;:

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">string/index-of.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ♥ JavaScript'</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'JavaScript'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ♥ JavaScript'</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ♥ JavaScript'</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I ♥ JavaScript'</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Retourne&#160;<code>4</code>.</p>
</li>
<li>
<p>Retourne&#160;<code>-1</code>&#160;– aucune occurrence n&#8217;a été trouvée.</p>
</li>
<li>
<p>Retourne&#160;<code>5</code>&#160;– première occurrence de la lettre&#160;<code>a</code>.</p>
</li>
<li>
<p>Retourne&#160;<code>7</code>&#160;– dernière occurrence de la lettre&#160;<code>a</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="regexp">3.1. Expressions régulières (RegExp)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Si <code>indexOf</code> et <code>lastIndexOf</code> identifient des caractères exacts,
comment faire lorsque l&#8217;on souhaite chercher de manière approximative,
plusieurs fois et selon certaines conditions&#160;?</p>
</div>
<div class="paragraph">
<p>Les <em>expressions régulières</em> (<em>RegExp</em>, pour <em>Regular Expressions</em>)
entrent en jeu dans ces cas plus avancés.
Leur mécanisme décrit des <em>motifs</em> à identifier.
Plusieurs <em>méthodes</em> servent ensuite à tester, identifier et remplacer
ces motifs au sein d&#8217;une chaîne de caractères.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">💡</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Anecdote</span> RegExp et Perl</div>
<div class="paragraph">
<p>La syntaxe d&#8217;expressions régulières est inspirée de celle du langage
de programmation Perl (<span class="URL"><a href="https://www.perl.org" class="bare">www.perl.org</a></span>) dans sa version&#160;5.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une expression régulière est décrite le plus souvent en tant que motif
encadré par des barres obliques, suffixé d'<em>options</em> exprimées sous forme de lettres&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token regex">/[a-z]+.js/i</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cet exemple utilise l&#8217;option&#160;<code>i</code> mais il en existe plusieurs&#160;:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Insensible à la casse&#160;(<code>i</code>)
</td>
<td class="hdlist2">
<p>On souhaite identifier du contenu, peu importe s&#8217;il est en majuscules ou non.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Multiligne&#160;(<code>m</code>)
</td>
<td class="hdlist2">
<p>La recherche s&#8217;effectue sur <em>toutes</em> les lignes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Global&#160;(<code>g</code>)
</td>
<td class="hdlist2">
<p>La recherche identifie <em>tous</em> les résultats&#160;– au lieu du seul premier.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Unicode&#160;(<code>u</code>)
</td>
<td class="hdlist2">
<p>S&#8217;utilise si le motif de recherche exprime des séquences de caractères
Unicode sous la forme&#160;<code>\u{&#8230;&#8203;}</code> (voir les <em>classes de caractères</em> ci-après).</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Illustrons leur utilisation en <em>identifiant du texte</em> répondant (<code>match</code>)
à une <em>expression régulière</em>&#160;(<code>/&#8230;&#8203;/</code>)&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/flags.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">'I ♥ Node.js &amp;amp; Anode'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/node/i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/ode/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/node/ig</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Identifie et affiche <code>Node</code>, l&#8217;occurrence contenue dans le mot <code>Node.js</code>.</p>
</li>
<li>
<p>Affiche deux fois <code>ode</code>&#160;– les occurrences contenues dans les mots <code>Node.js</code> et <code>Anode</code>.</p>
</li>
<li>
<p>Affiche <code>Node</code> et <code>node</code> en combinant les deux options&#160;<code>i</code> et&#160;<code>g</code>&#160;– les occurrences contenues dans les mots <code>Node.js</code> et <code>Anode</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Des éléments de syntaxe complètent les options pour
identifier des motifs au sein de chaînes de caractères&#160;:
</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Ensemble de caractères (entre&#160;<code>[</code>&#160;et&#160;<code>]</code>)</dt>
<dd>
<p>Liste l&#8217;ensemble des caractères recherchés.
Le caractère&#160;<code>-</code> indique une plage de caractères.
(ex. <code>[a-d]</code> correspond à <code>[abcd]</code>, donc <em>a</em> ou&#160;_b_ ou&#160;_c_&#160;ou&#160;_d_).</p>
</dd>
<dt class="hdlist1">Nombre de caractères (entre&#160;<code>{</code>&#160;et&#160;<code>}</code>)</dt>
<dd>
<p>Répète un caractère ou une sous-chaîne&#160;;
<em>exactement</em> (<code>{2}</code>&#160;– exactement deux fois),
<em>au moins</em> (<code>{2,}</code>&#160;– au moins deux fois)
ou <em>entre</em> (<code>{1,2}</code>&#160;– entre une et deux fois).</p>
</dd>
<dt class="hdlist1">Nombre de caractères (<code>?</code>,&#160;<code>+</code>&#160;et&#160;<code>*</code>)</dt>
<dd>
<p>Version raccourcie du nombre de caractères pour des besoins usuels&#160;:
0&#160;ou&#160;1 caractère avec&#160;<code>?</code>,
1 caractère et plus avec&#160;<code>+</code> et
0 caractère et plus avec&#160;<code>*</code>.</p>
</dd>
</dl>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/syntax.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> paris15 <span class="token operator">=</span> <span class="token string">'75015 Paris'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> avray <span class="token operator">=</span> <span class="token string">'92410 Ville-d\'Avray'</span><span class="token punctuation">;</span>

<span class="token comment">// test du code postal uniquement</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paris15<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{2}/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paris15<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{2,5}/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token comment">// test du code postal et de la ville</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paris15<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{5} [a-zA-Z]+/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>paris15<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{5} [a-z]+/i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(4)</b></span>

<span class="token comment">// test sur un nom de ville composé</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>avray<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{5} [a-z]+/i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>avray<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/[0-9]{5} [a-z'-]+/i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["75"]</code>&#160;– les 2&#160;premiers caractères numériques de la chaîne.</p>
</li>
<li>
<p>Affiche <code>["75015"]</code>&#160;– les 5&#160;premiers caractères numériques (satisfait la condition&#160;<code>5</code> de&#160;<code>{2,5}</code>).</p>
</li>
<li>
<p>Affiche <code>["75015 Paris"]</code>.</p>
</li>
<li>
<p>Affiche <code>["75015 Paris"]</code>&#160;– l&#8217;option&#160;<code>i</code> évite de préciser l&#8217;ensemble&#160;<code>A-Z</code>.</p>
</li>
<li>
<p>Affiche <code>["92410 Ville"]</code>&#160;– capture les caractères jusqu&#8217;à ce que la condition ne soit plus remplie en rencontrant le trait d&#8217;union&#160;(<code>-</code>).</p>
</li>
<li>
<p>Affiche <code>["92410 Ville-d&#8217;Avray"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>D&#8217;autres opérateurs délimitent notre recherche&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Début et fin de chaîne (<code>^</code>&#160;et&#160;<code>$</code>)</dt>
<dd>
<p>Quand l&#8217;option multiligne (<code>m</code>) est utilisée, les notions de début
et de fin s&#8217;appliquent au niveau de la ligne.</p>
</dd>
<dt class="hdlist1">Limite de mot&#160;(<code>\b</code>)</dt>
<dd>
<p>Symbolise tout caractère ne faisant pas partie d&#8217;un mot, y compris le début
ou la fin d&#8217;une chaîne.</p>
</dd>
<dt class="hdlist1">Ou&#160;(<code>|</code>)</dt>
<dd>
<p>Sépare deux choix (ex. <code>/noir|blanc/</code>).</p>
</dd>
<dt class="hdlist1">Groupe de capture (entre&#160;<code>(</code>&#160;et&#160;<code>)</code>)</dt>
<dd>
<p>  Délimite un groupe de caractères.
  Les groupes peuvent par la suite être <em>identifiés</em> et <em>remplacés</em>.<br>
  On notera également que l&#8217;emploi des <em>groupes</em> change
  la structure des résultats en un tableau de plusieurs éléments,
  de la forme <code>["chaîne identifiée", "groupe 1", "groupe 2" &#8230;&#8203;]</code>.
</p>
</dd>
</dl>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/limits.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> postcode <span class="token operator">=</span> <span class="token string">'75015 Paris'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> cedex <span class="token operator">=</span> <span class="token template-string"><span class="token string">`CODEPOSTAL VILLE CEDEX
33900 Bordeaux Cedex 9
33074 BORDEAUX CEDEX
33700 MERIGNAC Cidex 40`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nogroup <span class="token operator">=</span> <span class="token regex">/^[0-9]{5} [a-z0-9' -]+/i</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> group <span class="token operator">=</span> <span class="token regex">/^([0-9]{5}) [a-z0-9' -]+/i</span><span class="token punctuation">;</span>

<span class="token comment">// avec ou sans groupe de capture</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>postcode<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>nogroup<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>postcode<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token comment">// mode multiligne avec ou sans option globale</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cedex<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^([0-9]{5})/im</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cedex<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^([0-9]{5})/gim</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["75015 Paris"]</code>.</p>
</li>
<li>
<p>Affiche <code>["75015 Paris", "75015"]</code>&#160;– le premier élément correspond à la chaîne identifiée tandis que le second correspond au <em>premier</em> groupe de capture.</p>
</li>
<li>
<p>Affiche <code>["33900", "33900"]</code>&#160;– l&#8217;option multiligne itère de ligne en ligne jusqu&#8217;à trouver un motif.</p>
</li>
<li>
<p>Affiche <code>["33900", "33074", "33700"]</code>&#160;– l&#8217;option multiligne globale retourne tous les groupes de capture.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On notera qu&#8217;il faut faire attention à ce que l&#8217;on regarde&#160;:
le format de résultat varie selon qu&#8217;on utilise ou non des groupes de capture et
selon qu&#8217;on utilise l&#8217;option globale ou multiligne.</p>
</div>
<div class="paragraph">
<p>Des symboles servent de raccourcis pour désigner
plusieurs caractères simultanément&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Tout caractère&#160;(<code>.</code>)</dt>
<dd>
<p>tout caractère sauf le saut de ligne.</p>
</dd>
<dt class="hdlist1">Caractère de mot&#160;(<code>\w</code>)</dt>
<dd>
<p>Tout caractère pouvant composer un mot anglais&#160;:
les caractères accentués ne sont pas englobés
(identique à <code>[A-Za-z0-9_]</code>).</p>
</dd>
<dt class="hdlist1">Caractère numérique&#160;(<code>\d</code>)</dt>
<dd>
<p>Identique à&#160;<code>[0-9]</code>.</p>
</dd>
<dt class="hdlist1">Caractère d&#8217;espacement&#160;(<code>\s</code>)</dt>
<dd>
<p>Tout caractère d&#8217;espacement&#160;: espace, tabulation, retour chariot, etc.</p>
</dd>
<dt class="hdlist1">Caractère Unicode&#160;(<code>\u{&#8230;&#8203;}</code>)</dt>
<dd>
<p>  Doit être combiné avec l&#8217;option&#160;<code>u</code> (<code>/&#8230;&#8203;/u</code>).
  Exemple&#160;: ♥︎&#160;&#8594;&#160;<code>\u{2665}</code>.
</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Les alternatives de classes en majuscules sont des <em>négations</em>.
<code>\W</code>&#160;pour "tout sauf un caractère de mot", <code>\S</code>&#160;pour "tout sauf un caractère
d&#8217;espacement", etc.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/classes.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">'I ♥ RegExp in 2018'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\u{2665} (\w+)/u</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>iLove<span class="token punctuation">,</span>year<span class="token punctuation">]</span> <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^(I \u{2665}).+(\d{4})$/u</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>iLove<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["♥ RegExp", "RegExp"]</code>&#160;– et s&#8217;arrête là car l&#8217;espace suivant n&#8217;est pas un caractère de&#160;mot.</p>
</li>
<li>
<p>Affiche <code>"I ♥ 2019"</code>&#160;– on a extrait le début de la phrase et l&#8217;année placée en fin de chaîne.
</p>
</li>
</ol>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Expressions régulières</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les expressions régulières.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/RegExp" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/RegExp</a>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La méthode <code>test</code> est pratique si la seule chose qui vous intéresse
est de tester si une chaîne correspond à un motif&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/test.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> cedex <span class="token operator">=</span> <span class="token template-string"><span class="token string">`CODEPOSTAL VILLE CEDEX
33900 Bordeaux Cedex 9
33074 BORDEAUX CEDEX
33700 MERIGNAC Cidex 40`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> postcode_tester <span class="token operator">=</span> <span class="token regex">/^\d{5}\s/m</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>postcode_tester<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>cedex<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cedex<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^(\d{5})\b/gm</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, la méthode <code>replace</code> est très utile pour transformer des chaînes de
caractères, surtout en combinaison avec les groupes de capture&#160;:

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/replace.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> t <span class="token operator">=</span> <span class="token string">'I ♥ JavaScript'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'♥'</span><span class="token punctuation">,</span> <span class="token string">'love'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\b\w+$/</span><span class="token punctuation">,</span> <span class="token string">'PHP'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> text <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^.+(\u{2665}) (\w+)$/u</span><span class="token punctuation">,</span> <span class="token string">'$2 $1 me'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"I love JavaScript"</code>&#160;– si le premier argument de <code>replace</code> est une chaîne, elle est convertie automatiquement en expression régulière.</p>
</li>
<li>
<p>Affiche <code>"I ♥ PHP"</code>.</p>
</li>
<li>
<p>Affiche <code>"JavaScript ♥ me"</code>&#160;– les symboles <code>$&lt;numéro&gt;</code> représentent les groupes de capture, qu&#8217;on place dans l&#8217;ordre de notre choix.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le second argument accepte une <a href="#functions">fonction</a>
pour procéder à des remplacements dynamiques&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">regexp/replace-function.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">'I ♥ JavaScript'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> shout <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\b(\w+)$/u</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">pattern<span class="token punctuation">,</span> lang</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> lang<span class="token punctuation">.</span><span class="token function">toLocaleUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>shout<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"I ♥ JAVASCRIPT"</code>&#160;– le dernier mot est transformé en majuscules.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="boolean">4. Jongler avec des valeurs vraies ou fausses (booléens)</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Un booléen est un élément logique dont la valeur est soit <code>true</code> soit <code>false</code>,
c&#8217;est-à-dire respectivement <em>vrai</em> ou <em>faux</em>.
Ce type de valeur sert à exprimer des résultats de condition
("si&#160;ça alors&#160;… sinon") ainsi qu&#8217;à affirmer ou infirmer quelque chose.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">boolean/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>counter <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> check <span class="token operator">=</span> <span class="token punctuation">(</span>counter <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>check <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;– la condition est vérifiée.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;– c&#8217;est la valeur de la variable <code>check</code> suite à son affectation à la ligne précédente.</p>
</li>
<li>
<p>Affiche <code>true</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une donnée d&#8217;un autre type peut être convertie en booléen.
La logique qui déterminera si la conversion retournera <code>true</code> ou <code>false</code>
est la suivante&#160;:

</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>true</code>
</td>
<td class="hdlist2">
<p>Toute valeur non&#160;nulle.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>false</code>
</td>
<td class="hdlist2">
<p>Toute valeur nulle (<code>null</code>, <code>0</code>,&#160;<code>NaN</code>), vide (<code>''</code>)
ou indéfinie (<code>undefined</code>).</p>
</td>
</tr>
</table>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">boolean/convert.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(3)</b></span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>counter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'if (counter) équivaut à if (Boolean(counter))'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;– il s&#8217;agit d&#8217;une chaîne&#160;vide.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;– il s&#8217;agit d&#8217;une valeur non&#160;nulle.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;– le tableau est vide mais l&#8217;objet en lui-même <em>vaut</em> quelque chose&#160;: un tableau.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="number">5. Jongler avec des valeurs numériques (Number, Math)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph">
<p>ECMAScript ne fait pas de distinction entre des entiers et des
nombres contenant des décimales&#160;: ce sont des <em>nombres</em> un point c&#8217;est tout.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">40.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">40</span> <span class="token operator">===</span> <span class="token number">40.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">40</span> <span class="token operator">===</span> <span class="token string">'40.0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>&#160;– les deux valeurs sont strictement équivalentes.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;– un élément entre guillemets est une chaîne de caractères, pas un nombre.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les nombres sont représentés par défaut en <em>base&#160;10</em>.
La plage de nombres utilisable dans un programme est définie par des
constantes ECMAScript&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/constants.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">POSITIVE_INFINITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">NEGATIVE_INFINITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(4)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MAX_SAFE_INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token constant">MIN_SAFE_INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>Infinity</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>-Infinity</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>1.7976931348623157e+308</code>&#160;– le plus grand réel utilisable.</p>
</li>
<li>
<p>Affiche&#160;<code>5e-324</code>&#160;– le plus petit réel utilisable.</p>
</li>
<li>
<p>Affiche&#160;<code>9007199254740991</code>&#160;– le plus grand entier utilisable.</p>
</li>
<li>
<p>Affiche&#160;<code>-9007199254740991</code>&#160;– le plus petit entier utilisable.





</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Il est aussi possible de compter dans d&#8217;autres bases, notamment en hexadécimal
(<em>base&#160;16</em>).
Cette dernière est exprimée en préfixant la valeur par&#160;<code>0x</code> et avec les
caractères de&#160;0 à&#160;F&#160;– 0&#160;à&#160;9 puis A (vaut&#160;10),
B (vaut&#160;11), etc.


</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/hexa.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0x000A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0x00A0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0x0A00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>0</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>10</code>&#160;– car <code>A</code>&#160;en hexadécimal vaut&#160;10 en décimal.</p>
</li>
<li>
<p>Affiche&#160;<code>160</code>&#160;– pour <code>10×16</code> (une &#8220;dizaine&#8221; vaut&#160;16).</p>
</li>
<li>
<p>Affiche&#160;<code>2560</code>&#160;– pour <code>10×16×16</code> (une &#8220;centaine&#8221; vaut&#160;16×16).</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">💬</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Rumeur</span> JavaScript est nul en virgule flottante !</div>
<div class="paragraph">
<p>
ECMAScript est souvent décrié pour son incapacité à gérer les opérations
mathématiques avec précision.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token number">0.2</span> <span class="token operator">+</span> <span class="token number">0.6</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>ECMAScript respecte le standard <em>IEEE&#160;754</em> de gestion de nombres à virgule
flottante sur 64&#160;bits de données.
Qui d&#8217;autre l&#8217;utilise&#160;?
D&#8217;autres langages "inconnus" comme Python, PHP et Ruby, entre autres.</p>
</div>
<div class="paragraph">
<p>Pour en savoir plus&#160;: <span class="URL"><a href="https://fr.wikipedia.org/wiki/IEEE_754" class="bare">fr.wikipedia.org/wiki/IEEE_754</a></span>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="opérations_mathématiques">5.1. Opérations mathématiques</h3>
<div class="paragraph">
<p>Les nombres s&#8217;utilisent pour effectuer des opérations mathématiques.
Chaque opération est dotée d&#8217;un symbole&#160;:
</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Opération</th>
<th class="tableblock halign-left valign-top">Symbole</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">addition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">soustraction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiplication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">division</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">modulo (reste de division)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">exposant (puissance)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code></p></td>
</tr>
</tbody>
</table>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/operations.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(4)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">**</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>6</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>-2</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>8</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>0.5</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>2</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>16</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="nan">5.2. Les nombres qui n&#8217;en sont pas (<em>NaN</em>)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">⚠️</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Attention</span> Opérations exotiques</div>
<div class="paragraph">
<p>Est-ce que vous avez déjà tenté d&#8217;additionner un nombre avec un tableau&#160;?
Pas forcément, mais ECMAScript ne vous en empêchera pas.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/operations-types.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(4)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">+</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">+</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La chaîne&#160;<code>'1'</code> sera convertie en nombre (voir plus loin).</p>
</li>
<li>
<p>On nous a toujours interdit la division par zéro&#160;; ici, on affiche&#160;<code>Infinity</code>.</p>
</li>
<li>
<p>Affiche aussi&#160;<code>Infinity</code>.</p>
</li>
<li>
<p>Seule cette opération retourne&#160;<code>NaN</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>10</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>11</code>&#160;— la valeur <code>true</code> est implicitement convertie en un entier.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Certaines opérations n&#8217;aboutiront pas mais n&#8217;afficheront pas d&#8217;erreur pour autant.
Dans ce cas, leur résultat vaudra <code>NaN</code> pour <em>not&#160;a&#160;number</em>
(littéralement&#160;: "n&#8217;est pas un nombre").</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/nan.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token string">'fromage'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La fonction <code>Number.isNaN()</code> nous aidera à vérifier si la valeur d&#8217;une variable
ou le résultat d&#8217;une opération est un&#160;<code>NaN</code> ou non.
Cette fonction retourne un <a href="#boolean">booléen</a>.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/is-nan.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token string">'fromage'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">'fromage'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">🚨</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Assertion</span> <code>NaN</code> n&#8217;est pas un nombre ?</div>
<div class="paragraph">
<p>Il faut se méfier de <code>NaN</code> comme de la peste, car il est considéré
comme un nombre du point de vue d&#8217;ECMAScript.
Toute opération mathématique impliquant&#160;<code>NaN</code> renverra un&#160;<code>NaN</code>&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/nan-number.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>'number'</code>.</p>
</li>
<li>
<p>Affiche <code>'number'</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Il vaut mieux s&#8217;assurer qu&#8217;une variable est à la fois un nombre et
qu&#8217;elle ne vaut pas&#160;<code>NaN</code>&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/is-not-a-nan.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token string">'fromage'</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span><span class="token operator">&amp;</span>amp<span class="token punctuation">;</span> <span class="token operator">!</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Ceci est un nombre.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'result n\'est pas un nombre.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="convertir_en_nombre">5.3. Convertir en nombre</h3>
<div class="paragraph">
<p>indexterm[nombre, conversion]</p>
</div>
<div class="paragraph">
<p>Les lignes qui précédent l&#8217;évoquent un peu&#160;: on peut passer d&#8217;autres types
de données à des nombres.
Idéalement, on voudra transformer explicitement quelque chose en un nombre.</p>
</div>
<div class="paragraph">
<p>Pour cela nous disposons de deux fonctions&#160;:

</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>parseInt</code> essaie d&#8217;interpréter un nombre entier.</p>
</li>
<li>
<p><code>parseFloat</code> essaie d&#8217;interpréter un nombre à virgule. La fonction s&#8217;arrête
dès qu&#8217;elle n&#8217;a plus affaire à un chiffre.</p>
</li>
</ul>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/parse.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'3.141592653589793'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'3.141592653589793'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'14.10-patch.2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'14.10-patch.2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>3.141592653589793</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>14</code>&#160;– ça ne change rien pour <code>parseInt</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>14.1</code>&#160;– la fonction s&#8217;arrête à la décimale précédant une lettre.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><code>parseInt</code> a cette particularité que l&#8217;on peut choisir la base
de la conversion avec le second argument de la fonction.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/parse-int.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'A00'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>16</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>10</code>&#160;– <code>A</code>&#160;vaut&#160;<code>10</code> en hexadécimal.</p>
</li>
<li>
<p>Affiche&#160;<code>2560</code>&#160;– aurait pu s&#8217;écrire <code>0xA00</code>.

</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="formater_et_arrondir_des_nombres">5.4. Formater et arrondir des nombres</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Si l&#8217;envie vous prenait de vouloir arrondir des nombres, il existe
quelques fonctions pour vous aider&#160;:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>Math.round()</code>
</td>
<td class="hdlist2">
<p>Arrondit à l&#8217;entier le plus proche.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Math.ceil()</code>
</td>
<td class="hdlist2">
<p>Arrondit à l&#8217;entier supérieur du nombre donné.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Math.floor()</code>
</td>
<td class="hdlist2">
<p>  Arrondit à l&#8217;entier inférieur du nombre donné.


</p>
</td>
</tr>
</table>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/round.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(3)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(4)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">3.99</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(5)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>4</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>4</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>4</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>3</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Enfin, on peut préserver le formatage du nombre de décimales
après la virgule en transformant le nombre <em>en chaîne de caractères</em>
grâce à la méthode <code>toFixed()</code>&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">number/to-fixed.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10.0101</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10.0101</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>'10.01'</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>'10'</code>.
</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="functions">6. Créer et réutiliser des blocs de code (fonctions)</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Une fonction est un <strong>bloc de code réutilisable et paramétrable</strong>.
Elle <em>retourne</em> un résultat dont la valeur se calcule en fonction des
paramètres que nous lui passons.</p>
</div>
<div class="paragraph">
<p>Cela se passe en deux temps&#160;:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>la <em>création</em> de la fonction&#160;;</p>
</li>
<li>
<p>l'<em>exécution</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>ECMAScript fournit un ensemble de fonctions de base&#160;: <code>console.log()</code>,
<code>setTimeout()</code>, etc.
Node ajoute les siennes (comme <code>require()</code>).
Nous avons la liberté d&#8217;en créer nous-mêmes, spécifiques à nos besoins.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">mot</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token string">`Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mot<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hello<span class="token punctuation">)</span><span class="token punctuation">;</span>                     <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">'World'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">'toi'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">random</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> limit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> limit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On <em>crée</em> la fonction <code>hello</code>.</p>
</li>
<li>
<p>Affiche <code>[Function: hello]</code>&#160;– il s&#8217;agit de la définition de la fonction.</p>
</li>
<li>
<p>Affiche <code>"Hello World"</code>&#160;– il s&#8217;agit de l'<em>exécution</em> de la fonction, qui <em>retourne</em> un résultat.</p>
</li>
<li>
<p>Affiche un nombre aléatoire entre&#160;0 et&#160;100&#160;– cette fonction est invoquée sans paramètre.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple précédent nous indique qu&#8217;une fonction se découpe en trois parties&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Les <strong>arguments</strong></dt>
<dd>
<p>C&#8217;est la partie à gauche de la flèche&#160;(<code>&#8658;</code>).
Les arguments sont séparés par des virgules.</p>
</dd>
<dt class="hdlist1">Le <strong>corps</strong></dt>
<dd>
<p>C&#8217;est la partie entre accolades.
Quand la fonction est sur une ligne,
le résultat de l&#8217;opération est <em>implicitement retourné</em>.
On peut dans ce cas se passer du mot-clé <code>return</code>.</p>
</dd>
<dt class="hdlist1">La <strong>valeur de retour</strong></dt>
<dd>
<p>  C&#8217;est la valeur renvoyée en dehors de la fonction.
  Elle est définie à l&#8217;aide du mot-clé <code>return</code>.
  La valeur <code>undefined</code> est retournée de manière implicite
  lorsque ce dernier est absent.


</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">💡</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Rappel</span> Variables et portée</div>
<div class="paragraph">
<p>Le corps d&#8217;une fonction constitue une <em>portée</em>&#160;: toute variable définie
dans le corps d&#8217;une fonction est invisible en dehors.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="anonymous-function">6.1. Les fonctions anonymes</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les fonctions anonymes sont employées en arguments d&#8217;autres fonctions.
On les dit <em>anonymes</em>, car elles ne sont pas consignées dans des <em>variables</em>.
Il est fréquent de les utiliser pour <em>itérer</em> sur des tableaux,
lors d&#8217;événements ou dans des <a href="#promise">promesses</a>.</p>
</div>
<div class="paragraph">
<p>C&#8217;est une manière élégante d&#8217;encapsuler du code à exécuter plus tard.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/anonymous.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Une seconde plus tard'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Deux secondes plus tard'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'exit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Le processus se termine'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Deux secondes plus tard"</code> deux secondes après le début du script.</p>
</li>
<li>
<p>Affiche <code>"Le processus se termine"</code> quand le processus se termine, une fois que toutes les actions en attente ont été exécutées.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="callback">6.2. Les fonctions de rappel (callback)</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Quand une fonction est passée en argument d&#8217;une autre fonction,
on appelle cela un <em>callback</em>.
On l&#8217;appelle plus tard (<em>to&#160;call back</em>) que le moment où elle est définie.
Elle reçoit des paramètres qui aident à reconstruire un contexte
<em>au moment</em> de son exécution.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/callback.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">printYear</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>             <span class="token comment">// <b class="conum">(2)</b></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getUTCFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(3)</b></span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span>printYear<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token comment">// équivalent à</span>
<span class="token comment">// setTimeout(date => printYear(date), 1000, new Date());</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Le troisième argument (et les suivants) de <code>setTimeout()</code> sont transmis en paramètres de la fonction de rappel (<em>callback</em>).</p>
</li>
<li>
<p>Cette fonction est invoquée une seconde après le début du script, et reçoit en paramètre la date du moment.</p>
</li>
<li>
<p>Affiche l&#8217;année de la date passée en argument&#160;– dans cet exemple, l&#8217;année en courss.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="rest-parameters">6.3. Paramètres du reste (rest parameters)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les <em>paramètres du reste</em> sont un nombre indéfini de paramètres
regroupés dans un même <a href="#array">tableau</a>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">functions/rest.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">combien_de</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">nom<span class="token punctuation">,</span> <span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`On a compté </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nom<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">combien_de</span><span class="token punctuation">(</span><span class="token string">'patates'</span><span class="token punctuation">,</span> <span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'trois'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"On a compté 3 patates."</code>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="array">7. Lister, filtrer et trier des éléments (Array)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les tableaux (ou listes indexées) servent à lister des éléments,
de tout type et dans l&#8217;ordre de notre choix.
Chaque élément de tableau se voit attribuer un numéro (<em>index</em>)
qui sert à le retrouver, en itérant à l&#8217;aide de boucles
ou en ayant recours à d&#8217;autres méthodes d&#8217;identification.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekdays <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'lundi'</span><span class="token punctuation">,</span> <span class="token string">'mardi'</span><span class="token punctuation">,</span> <span class="token string">'mercredi'</span><span class="token punctuation">,</span> <span class="token string">'jeudi'</span><span class="token punctuation">,</span> <span class="token string">'vendredi'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekdays<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["lundi", "mardi", "mercredi", "jeudi", "vendredi"]</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>5</code>&#160;– soit la longueur du tableau.</p>
</li>
<li>
<p>Affiche <code>"mardi"</code>&#160;– un tableau commence à l&#8217;index&#160;<code>0</code>.</p>
</li>
<li>
<p>Affiche <code>undefined</code>&#160;– il n&#8217;y a aucun élément défini à l&#8217;index&#160;<code>5</code>.
</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple précédent illustre plusieurs caractéristiques des collections&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>La numérotation débute à l&#8217;index <code>0</code>.</p>
</li>
<li>
<p>La propriété <code>length</code> contient la longueur du tableau.</p>
</li>
<li>
<p>La valeur <code>undefined</code> est retournée quand on tente d&#8217;accéder à un index
qui n&#8217;existe pas.
</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="créer_des_tableaux_à_partir_dautres_valeurs">7.1. Créer des tableaux à partir d&#8217;autres valeurs</h3>
<div class="paragraph">
<p>indexterm[tableau, Array.from()]</p>
</div>
<div class="paragraph">
<p>La fonction <code>Array.from()</code> est une manière de créer
un tableau à partir de quelque chose qui <em>ressemble à un tableau</em>.</p>
</div>
<div id="array.from" class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/from.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'fromage'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token comment">// utilisation du second argument</span>
<span class="token keyword">const</span> <span class="token function-variable function">uppercase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">letter</span><span class="token punctuation">)</span> <span class="token operator">=></span> letter<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'fromage'</span><span class="token punctuation">,</span> uppercase<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["f", "r", "o", "m", "a", "g", "e"]</code>&#160;– chaque lettre de la chaîne.</p>
</li>
<li>
<p>Affiche <code>["F", "R", "O", "M", "A", "G", "E"]</code>&#160;– chaque lettre de la chaîne a été passée en majuscule.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le deuxième argument de <code>Array.from()</code> est facultatif.
C&#8217;est une <a href="#anonymous-function">fonction anonyme</a> qui s&#8217;utilise comme les <a href="#array.forEach">méthodes d&#8217;itération</a> <code>Array.forEach()</code> et <code>Array.map()</code>.</p>
</div>
<div class="paragraph">
<p>Cette méthode est des plus utiles pour itérer sur des listes d&#8217;éléments DOM
obtenues avec les fonctions <code>document.querySelectorAll()</code>
et <code>document.getElementsByTagName()</code>, entre autres.</p>
</div>
<div class="listingblock prismjs highlight-prismjs">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> links <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>links<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=></span> a<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// parce qu'on ne peut pas faire</span>
<span class="token comment">// links.map(a => a.textContent);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
</div>
<div class="sect2">
<h3 id="array.concat">7.2. Combiner des tableaux</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Il est relativement aisé de composer des tableaux en fonction d&#8217;autres tableaux.
Une première manière d&#8217;y parvenir est d&#8217;utiliser la méthode <code>concat()</code>&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/concat.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mousquetaires <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Athos'</span><span class="token punctuation">,</span> <span class="token string">'Porthos'</span><span class="token punctuation">,</span> <span class="token string">'Aramis'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> extras <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'d\'Artagnan'</span><span class="token punctuation">,</span> <span class="token string">'Albert'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mousquetaires<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>extras<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token comment">// autre manière d'obtenir la liste des 5 mousquetaires</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>mousquetaires<span class="token punctuation">,</span> extras<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["Athos", "Porthos", "Aramis", "d&#8217;Artagnan", "Albert"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Cette méthode <em>crée un nouveau tableau</em> à partir de deux passés en paramètres.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">💬</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Alternative</span> Opérateur&#160;<code>&#8230;&#8203;</code>&#160;(<em>spread</em>)</div>
<div class="paragraph">
<p>
Une autre manière de faire est d&#8217;utiliser l&#8217;opérateur <code>&#8230;&#8203;</code>
(aussi appelé <a href="#spread">spread</a>) pour éclater plusieurs tableaux et
les rassembler dans un autre&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/spread.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> mousquetaires <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Athos'</span><span class="token punctuation">,</span> <span class="token string">'Porthos'</span><span class="token punctuation">,</span> <span class="token string">'Aramis'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> extras <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'d\'Artagnan'</span><span class="token punctuation">,</span> <span class="token string">'Albert'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>mousquetaires<span class="token punctuation">,</span> <span class="token operator">...</span>extras<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["Athos", "Porthos", "Aramis", "d&#8217;Artagnan", "Albert"]</code>.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>À l&#8217;inverse, la méthode <code>join()</code> concatène tous les éléments dans une
<a href="#string">chaîne de caractères</a> avec le séparateur de notre choix (optionnel).
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/join.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'ID'</span><span class="token punctuation">,</span> <span class="token string">'NOM'</span><span class="token punctuation">,</span> <span class="token string">'PRENOM'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">';'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"ID,NOM,PRENOM"</code>&#160;– le séparateur par défaut est une virgule.</p>
</li>
<li>
<p>Affiche <code>"ID;NOM;PRENOM"</code>&#160;– on a choisi le point-virgule comme séparateur.</p>
</li>
<li>
<p>Affiche <code>"IDNOMPRENOM"</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array.forEach">7.3. Itérer sur les valeurs avec des boucles</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Les boucles sont une manière de parcourir plusieurs valeurs.
Elles aident à mettre en place des automatismes pour éviter de répéter du code.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/loop.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekdays <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'lundi'</span><span class="token punctuation">,</span> <span class="token string">'mardi'</span><span class="token punctuation">,</span> <span class="token string">'mercredi'</span><span class="token punctuation">,</span> <span class="token string">'jeudi'</span><span class="token punctuation">,</span> <span class="token string">'vendredi'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> day <span class="token keyword">of</span> weekdays<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>                           <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span>

<span class="token comment">// on obtient le même résultat avec la méthode `forEach`</span>
weekdays<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">day</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche successivement chaque valeur du tableau&#160;– <code>"lundi"</code>, <code>"mardi"</code>, <code>"mercredi"</code>, <code>"jeudi"</code>, <code>"vendredi"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Prenons le temps de revenir sur cet exemple.
On y découvre plusieurs manières d&#8217;écrire des boucles sur un tableau&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>for&#8230;&#8203;of</code></dt>
<dd>
<p>On affecte une variable avec chaque élément (opérateur <code>of</code>) du tableau.
Les expressions situées entre accolade sont exécutées pour
chaque élément du tableau.</p>
</dd>
<dt class="hdlist1"><code>forEach(element &#8658; expression)</code></dt>
<dd>
<p>  La méthode <code>forEach</code> applique une <a href="#anonymous-function">fonction anonyme</a>
  pour chaque élément du tableau.

</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Il y a en réalité deux manières d&#8217;itérer avec la boucle&#160;<code>for</code>&#160;:
sur les <em>index</em> (avec l&#8217;opérateur&#160;<code>in</code>)
et sur les <em>valeurs</em> (avec l&#8217;opérateur&#160;<code>of</code>).



</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/for-of-in.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekend <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'samedi'</span><span class="token punctuation">,</span> <span class="token string">'dimanche'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> index <span class="token keyword">in</span> weekend<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// <b class="conum">(1)</b></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekend<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> day <span class="token keyword">of</span> weekend<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(3)</b></span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche successivement&#160;<code>0</code> puis&#160;<code>1</code>.</p>
</li>
<li>
<p>Affiche successivement <code>"samedi"</code> puis <code>"dimanche"</code>&#160;– l&#8217;index sert à retrouver la valeur dans le tableau.</p>
</li>
<li>
<p>Affiche successivement <code>"samedi"</code> puis <code>"dimanche"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La méthode <code>forEach()</code> propage en réalité trois arguments à notre fonction anonyme&#160;:
l&#8217;élément en cours de l&#8217;itération, l&#8217;index de l&#8217;élément et le tableau d&#8217;origine.</p>
</div>
<div class="paragraph">
<p>Pourquoi passer le tableau d&#8217;origine alors qu&#8217;on itère dessus&#160;?
Pour donner du contexte au cas où on opère
avec une <a href="#function">fonction nommée</a>.
Nous verrons un usage concret de ce troisième argument
dans la section &#8220;<a href="#array.map">Transformer les valeurs</a>&#8221;.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/foreach-function.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> undeux <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">printIndex</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>element<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> : index </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
<span class="token punctuation">}</span>

undeux<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>printIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Applique la fonction <code>printIndex()</code> pour chaque élément du tableau <code>undeux</code>.</p>
</li>
<li>
<p>Affiche successivement <code>"un&#160;: index 0"</code> puis <code>"deux&#160;: index 1"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Outre l&#8217;inspection et l&#8217;affichage des valeurs, les boucles offrent la liberté
de <a href="#array.sort">trier</a>, de <a href="#array.map">transformer les valeurs</a>,
de <a href="#array.filter">filtrer selon des conditions</a>,
mais aussi de <a href="#array.reduce">créer de nouvelles structures de données</a>.</p>
</div>
<div class="paragraph">
<p>Ces méthodes sont décrites dans les sections suivantes.</p>
</div>
</div>
<div class="sect2">
<h3 id="array.sort">7.4. Trier les valeurs</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>La méthode <code>sort()</code> change l&#8217;ordre des éléments d&#8217;un tableau.
Elle utilise une <a href="#anonymous-function">fonction anonyme</a> qui compare deux éléments
entre eux&#160;; elle retourne un nombre positif, négatif ou égal à zéro selon la
logique que l&#8217;on souhaite donner au tri&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Quand la comparaison est <em>négative</em>,
<code>sort()</code> place le premier élément <em>avant</em> le second.</p>
</li>
<li>
<p>Quand la comparaison est <em>positive</em>,
<code>sort()</code> place le premier élément <em>après</em> le second.</p>
</li>
<li>
<p>Quand la comparaison est égale à zéro, nulle ou non spécifiée,
l&#8217;ordre des éléments reste inchangé.</p>
</li>
</ul>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/sort.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">sortAsc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">sortDesc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> b <span class="token operator">-</span> a<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortAsc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> undeux <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> order<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">'un'</span><span class="token punctuation">,</span> order<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>undeux<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a<span class="token punctuation">.</span>order <span class="token operator">-</span> b<span class="token punctuation">.</span>order<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[1, 2, 3]</code>.</p>
</li>
<li>
<p>Affiche <code>[ { label: "un", order: 1 }, { label: "deux", order: 2 } ]</code>&#160;– le tableau a été trié sur la valeur de <code>order</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les <a href="#string">chaînes de caractères</a> peuvent être comparées avec <code>localeCompare()</code>.
Cette méthode retourne un nombre après une comparaison caractère par caractère
entre deux chaînes.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/sort-strings.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">sortAlpha</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortAlpha<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> undeux <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">'un'</span><span class="token punctuation">,</span> order<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>label<span class="token punctuation">:</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> order<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">sortLabel</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> a<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>undeux<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>sortLabel<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["a", "A", "b", "c"]</code>&#160;– les majuscules influencent le&#160;tri.</p>
</li>
<li>
<p>Affiche <code>[ { label: "deux", order: 2 }, { label: "un", order: 1 } ]</code>&#160;– le tableau a été trié sur la valeur de <code>label</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">💡</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Alternative</span> <code>Array.reverse()</code></div>
<div class="paragraph">
<p>
La méthode <code>reverse()</code> transforme le tableau d&#8217;origine
en inversant l&#8217;ordre de ses éléments.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/reverse.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekend <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'samedi'</span><span class="token punctuation">,</span> <span class="token string">'dimanche'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

weekend<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weekend<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["dimanche", "samedi"]</code>.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="array.map">7.5. Transformer les valeurs</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>La méthode <code>map()</code> fonctionne quasiment comme <code>forEach()</code>, à ceci près qu&#8217;elle
retourne un nouveau tableau, constitué des valeurs retournées par la fonction
appliquée sur chaque élément.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/map.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> newArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">' b'</span><span class="token punctuation">,</span> <span class="token string">'c '</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Retourne <code>['A', 'B', 'C']</code>&#160;– on a passé tous les éléments en lettres majuscules.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le troisième argument de la méthode <code>map()</code> prend ici tout son sens.
Par exemple, si l&#8217;on souhaite dédoublonner un tableau&#160;:</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/map-dedupe.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> soundcheck <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">dedupe</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>dedupe<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[null, null, "un", "deux"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Cet exemple vérifie, à chaque itération, si la valeur de l&#8217;élément
est contenue dans la <em>suite du tableau</em>.
<code>array.slice(index+1)</code> crée un nouveau tableau contenant tous les éléments
situés <em>après</em> l&#8217;élément courant (<code>index+1</code>).
</p>
</div>
<div class="paragraph">
<p>La méthode de transformation <code>reduce()</code> est différente, car elle passe le résultat
de la précédente itération à la suivante.
C&#8217;est comme si elle <em>accumulait</em> les résultats.
Elle retourne une valeur finale qui peut être autre chose qu&#8217;un tableau.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/reduce.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> stats <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">previous<span class="token punctuation">,</span> element</span><span class="token punctuation">)</span> <span class="token operator">=></span> previous <span class="token operator">+</span> element<span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Effectue une <em>réduction</em> à l&#8217;aide de la fonction <code>sum()</code> et d&#8217;une valeur par défaut de&#160;<code>0</code>&#160;– affiche&#160;<code>22</code> à l&#8217;issue des itérations .</p>
</li>
<li>
<p>La valeur de l&#8217;élément est le <em>second paramètre</em>&#160;; le premier paramètre correspond au résultat de l&#8217;itération précédente ou à la valeur initiale, passée en argument à <code>reduce()</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array.filter">7.6. Filtrer les valeurs</h3>
<div class="paragraph">
<p>La méthode <code>filter()</code> retourne un nouveau tableau filtré à l&#8217;aide
d&#8217;une <a href="#anonymous-function">fonction anonyme</a>.
Seuls les éléments qui satisfont à la condition établie par la fonction
se retrouvent dans le nouveau tableau.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/filter.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">is_finite</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> Number<span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">direct</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> value<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>is_finite<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>direct<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Retourne&#160;<code>[3]</code>&#160;– c&#8217;est la seule valeur qui soit un nombre.</p>
</li>
<li>
<p>Retourne <code>["un", "deux", 3]</code>&#160;– ce sont les valeurs non&#160;nulles.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array.find">7.7. Identifier des valeurs</h3>
<div class="paragraph">
<p>Les méthodes <code>indexOf()</code>, <code>lastIndexOf()</code> et <code>includes()</code> identifient une
<em>valeur exacte</em> au sein d&#8217;un tableau.



</p>
</div>
<div class="paragraph">
<p><code>indexOf()</code> et <code>lastIndexOf()</code> retournent l&#8217;index de la valeur recherchée.
Si aucun élément n&#8217;a été retrouvé, elles retourneront la valeur&#160;<code>-1</code>.<br>
<code>includes()</code> retourne un <a href="#boolean">booléen</a> indiquant si la recherche
est fructueuse (<code>true</code>) ou non (<code>false</code>).</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/index-of-includes.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> soundcheck <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'un'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'deux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'trois'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(3)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'deux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'deux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(5)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>soundcheck<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'trois'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(6)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche&#160;<code>0</code>&#160;– le premier <code>"un"</code> est l&#8217;élément&#160;``0` du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>1</code>&#160;– le premier <code>"deux"</code> est l&#8217;élément&#160;``1` du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>-1</code>&#160;– cet élément est absent du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>3</code>&#160;– le dernier <code>"deux"</code> est l&#8217;élément&#160;``3` du tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>true</code>&#160;– l&#8217;élément <code>"un"</code> existe dans le tableau.</p>
</li>
<li>
<p>Affiche&#160;<code>false</code>&#160;– l&#8217;élément <code>"trois"</code> n&#8217;existe pas dans le tableau.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Il existe ensuite d&#8217;autres méthodes comme <code>find()</code>, <code>some()</code> et <code>every()</code>.
Elles <strong>identifient des éléments à partir d&#8217;une fonction</strong>.
Les conditions de recherche sont plus complètes, car on n&#8217;est pas obligé
de connaître la valeur exacte recherchée.



</p>
</div>
<div class="paragraph">
<p>La méthode <code>find()</code> retourne le premier <em>élément</em> qui remplisse la condition&#160;;
 <code>findIndex()</code> en retourne l'<em>index</em>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/find.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">biggerThan50</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> value <span class="token operator">></span> <span class="token number">50</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>biggerThan50<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>biggerThan50<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La fonction retourne <code>true</code> si la valeur passée en argument est un nombre supérieur&#160;à&#160;<code>50</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>100</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>3</code>&#160;– c&#8217;est l&#8217;index de la valeur&#160;<code>100</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Les méthodes <code>some()</code> et <code>every()</code> retournent <code>true</code> respectivement
si <em>au moins une itération</em> est satisfaisante et
si <em>toutes les itérations</em> sont satisfaisantes.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/some.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">isUndefined</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span>isUndefined<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>isUndefined<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=></span> d<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>isUndefined<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;– toutes les valeurs ne sont pas égales à <code>undefined</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;– au moins une valeur est égale à <code>undefined</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;– il n&#8217;y a plus de valeur <code>undefined</code> dans le tableau, car on a utilisé la méthode <a href="#array.filter">filter</a> pour supprimer les valeurs vides.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="array-destructuring">7.8. Décomposition de tableau (destructuring)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>L&#8217;affectation par décomposition (<em>destructuring</em>) est une manière élégante
de piocher des valeurs dans un <a href="#array">tableau</a>.
Ce mécanisme n&#8217;altère pas le contenu des variables décomposées et existe aussi
pour les <a href="#object-destructuring">objets</a>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/destructuring.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekdays <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'lundi'</span><span class="token punctuation">,</span> <span class="token string">'mardi'</span><span class="token punctuation">,</span> <span class="token string">'mercredi'</span><span class="token punctuation">,</span> <span class="token string">'jeudi'</span><span class="token punctuation">,</span> <span class="token string">'vendredi'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">]</span> <span class="token operator">=</span> weekdays<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">,</span> third<span class="token punctuation">]</span> <span class="token operator">=</span> weekdays<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>third<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"lundi"</code>.</p>
</li>
<li>
<p>Affiche <code>"mardi"</code>.</p>
</li>
<li>
<p>Affiche <code>"mercredi"</code>&#160;– l&#8217;utilisation des virgules sans variable a permis de <em>sauter</em> des positions dans la décomposition.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La décomposition se combine agréablement avec l&#8217;opérateur <code>&#8230;&#8203;</code> (<em>spread</em>).
Il accumule le reste des éléments dans une variable, sous forme de tableau.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/destructuring-rest.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> weekdays <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'lundi'</span><span class="token punctuation">,</span> <span class="token string">'mardi'</span><span class="token punctuation">,</span> <span class="token string">'mercredi'</span><span class="token punctuation">,</span> <span class="token string">'jeudi'</span><span class="token punctuation">,</span> <span class="token string">'vendredi'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> weekdays<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token comment">// revient au même que</span>
<span class="token comment">// const [,, ...rest] = weekdays;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["mercredi", "jeudi", "vendredi"]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La méthode <code>slice()</code> offre davantage de souplesse pour gérer les <em>limites</em>.
On choisit <em>l&#8217;index de début</em> (inclus) et celui <em>de fin</em> (non inclus) de la décomposition.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/slice.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'trois'</span><span class="token punctuation">,</span> <span class="token string">'quatre'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["deux", "trois", "quatre"]</code>&#160;– à partir de l&#8217;index&#160;<code>1</code>.</p>
</li>
<li>
<p>Affiche <code>["deux"]</code>&#160;– à partir de l&#8217;index&#160;<code>1</code> et jusqu&#8217;à l&#8217;index&#160;<code>2</code> (non&#160;inclus).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Si les valeurs de début et/ou de fin sont <em>négatives</em>,
les index sont calculés <em>à partir de la fin</em> du tableau.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">array/slice-negative.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'un'</span><span class="token punctuation">,</span> <span class="token string">'deux'</span><span class="token punctuation">,</span> <span class="token string">'trois'</span><span class="token punctuation">,</span> <span class="token string">'quatre'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["quatre"]</code>&#160;– premier élément à partir de la&#160;fin.</p>
</li>
<li>
<p>Affiche <code>["deux", "trois", "quatre"]</code>&#160;– les trois premiers éléments à partir de la&#160;fin.</p>
</li>
<li>
<p>Affiche <code>["un", "deux", "trois"]</code>&#160;– jusqu&#8217;au dernier élément à partir de la fin (non&#160;inclus).</p>
</li>
<li>
<p>Affiche <code>["un"]</code>&#160;– jusqu&#8217;au troisième élément à partir de la fin (non&#160;inclus).</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="object">8. Représenter des structures d&#8217;objet et y accéder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les structures d&#8217;objet servent à lister des éléments de tout type
au sein d&#8217;une même variable.
L&#8217;indexation se fait <em>comme dans un dictionnaire</em>,
avec un identifiant unique pour chaque valeur.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>first_name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>

francine<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>                <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Francine"</code>.</p>
</li>
<li>
<p>On affecte une valeur numérique à l&#8217;index <code>age</code> une fois l&#8217;objet&#160;créé.</p>
</li>
<li>
<p>Affiche&#160;``25`&#160;– la valeur numérique précédemment affectée.</p>
</li>
<li>
<p>Affiche&#160;``undefined`&#160;– aucune valeur n&#8217;est affectée pour cette&#160;clé.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Une autre syntaxe existe pour créer des valeurs et y accéder en utilisant
des variables en guise d&#8217;identifiant d&#8217;index.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/dynamic.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token constant">SOCIAL_NETWORK</span> <span class="token operator">=</span> <span class="token string">'twitter'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token constant">SOCIAL_NETWORK</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">'@FrancineDu26'</span><span class="token punctuation">,</span>    <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">[</span><span class="token constant">SOCIAL_NETWORK</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token comment">// manières équivalentes, sans utilisation de variable</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">[</span><span class="token string">'twitter'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affecte la chaîne <code>@FrancineDu26</code> dans l&#8217;index correspondant à la valeur de la variable <code>SOCIAL_NETWORK</code>.</p>
</li>
<li>
<p>Affiche <code>"@FrancineDu26"</code>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="object-destructuring">8.1. Décomposition d&#8217;objet (<em>destructuring</em>)</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>L&#8217;affectation par décomposition (<em>destructuring</em>) est une manière
élégante de piocher des valeurs dans un <a href="#object">objet</a>.
Ce mécanisme existe aussi pour les <a href="#array-destructuring">tableaux</a>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/destructuring.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
  twitter<span class="token punctuation">:</span> <span class="token string">'@FrancineDu26'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>location<span class="token punctuation">,</span>twitter<span class="token punctuation">}</span> <span class="token operator">=</span> francine<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>first_name<span class="token punctuation">:</span>prenom<span class="token punctuation">}</span> <span class="token operator">=</span> francine<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prenom<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>is_admin<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">=</span> francine<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>is_admin<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Drôme"</code>&#160;– on a décomposé la clé <code>location</code>.</p>
</li>
<li>
<p>Affiche <code>"Francine"</code>&#160;– on a décomposé puis renommé la clé <code>first_name</code> en une nouvelle variable&#160;: <code>prenom</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;– on a décomposé la clé <code>is_admin</code> et, comme elle n&#8217;existe pas, on a spécifié la valeur par défaut <code>false</code>, au lieu de <code>undefined</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La décomposition se combine agréablement avec l&#8217;opérateur <code>&#8230;&#8203;</code> (<em>spread</em>).
Il accumule <em>le reste</em> des éléments dans une variable, sous forme d&#8217;objet.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/destructuring-rest.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
  twitter<span class="token punctuation">:</span> <span class="token string">'@FrancineDu26'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>first_name<span class="token punctuation">,</span> <span class="token operator">...</span>metadata<span class="token punctuation">}</span> <span class="token operator">=</span> francine<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>first_name<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Francine"</code>.</p>
</li>
<li>
<p>Affiche <code>{ location: "Drôme", twitter: "@FrancineDu26" }</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="object.assign">8.2. Combiner des objets</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p><code>Object.assign()</code> est une méthode qui sert à étendre et combiner plusieurs objets.
On a le choix d&#8217;intégrer les nouveaux éléments à un objet existant
ou bien d&#8217;en créer un nouveau.
Les objets sont combinés dans le premier paramètre de la fonction.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/assign.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> o2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> o<span class="token punctuation">,</span> <span class="token punctuation">{</span>location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// <b class="conum">(2)</b></span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>o2<span class="token punctuation">,</span> <span class="token punctuation">{</span>location<span class="token punctuation">:</span> <span class="token string">'Paris'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>location<span class="token punctuation">:</span> <span class="token string">'Ardèche'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>{ first_name: "Francine", location: "Drôme" }</code>&#160;– la nouvelle variable contient nos deux objets combinés.</p>
</li>
<li>
<p>Affiche <code>{ first_name: "Francine" }</code>&#160;– ce sont les valeurs originelles de notre objet.</p>
</li>
<li>
<p>Affiche <code>{ first_name: "Francine", location: 'Ardèche' }</code>&#160;– l&#8217;objet&#160;<code>o2</code> a reçu la nouvelle propriété <code>location</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notez que les affectations se font de <em>gauche à droite</em>.
Toute clé existante est remplacée.</p>
</div>
<div class="paragraph">
<p>La <a href="#object-destructuring">décomposition d&#8217;objet</a> sert également à combiner
des objets entre&#160;eux.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/destructuring-spread.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> francine26 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>francine<span class="token punctuation">,</span> location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine26<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>{ first_name: "Francine", location: "Drôme" }</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="itérer_sur_des_objets">8.3. Itérer sur des objets</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>La méthode <code>Object.entries()</code> est probablement la plus adaptée pour itérer à la
fois sur les <em>clés</em> et sur les <em>valeurs</em> d&#8217;un objet.
Elle retourne un tableau qui contient autant de paires de <code>[clé, valeur]</code> qu&#8217;il y a
d&#8217;éléments dans l&#8217;objet.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/entries.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>[[ "first_name", "Francine" ], [ "location", "Drôme" ]]</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Nous sommes libres d'<a href="#array.forEach">itérer sur les valeurs</a>
et d&#8217;utiliser la <a href="#array-destructuring">décomposition de tableaux</a>
pour rendre notre code explicite&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/entries-loop.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`francine.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> vaut </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// même résultat, autre méthode</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`francine.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> vaut </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche successivement <code>"francine.first_name vaut Francine"</code> puis <code>"francine.location vaut Drôme"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Deux autres méthodes récupèrent soit <em>la liste des clés</em> d&#8217;un objet (<code>Object.keys()</code>)
soit <em>la liste de ses valeurs</em> (<code>Object.values()</code>).
Dans les deux cas, les résultats sont retournés sous forme d&#8217;un <a href="#array">tableau</a>.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/keys.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>francine<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>["first_name", "location"]</code>.</p>
</li>
<li>
<p>Affiche <code>["Francine", "Drôme"]</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="identifier_des_valeurs">8.4. Identifier des valeurs</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Il y a trois manières d&#8217;identifier si un objet contient une valeur
associée à une&#160;clé.</p>
</div>
<div class="paragraph">
<p>Le plus simple est d&#8217;utiliser la méthode <code>hasOwnProperty()</code>.
Elle prend en argument le nom de la clé à tester et
retourne un <a href="#boolean">booléen</a>.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/has-own-property.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'location'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'twitter'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;– cette clé n&#8217;existe pas dans cet objet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La seconde manière est d&#8217;utiliser l&#8217;opérateur&#160;<code>in</code>.
On l&#8217;aura déjà rencontré lors des <a href="#array.forEach">boucles</a>&#160;;
ici, on l&#8217;utilise une seule&#160;fois.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/key-in.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'location'</span> <span class="token keyword">in</span> francine<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'twitter'</span> <span class="token keyword">in</span> francine<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;– cette clé n&#8217;existe pas dans cet objet.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Enfin, on peut tester la valeur associée avec la syntaxe standard <code>objet.clé</code>.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/key.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>true</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Attention toutefois&#160;: cette méthode <em>teste uniquement la valeur</em>.
Si la clé existe et contient <code>undefined</code>, vous ne verrez pas la différence.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">object/key-undefined.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> francine <span class="token operator">=</span> <span class="token punctuation">{</span>
  first_name<span class="token punctuation">:</span> <span class="token string">'Francine'</span><span class="token punctuation">,</span>
  location<span class="token punctuation">:</span> <span class="token string">'Drôme'</span><span class="token punctuation">,</span>
  twitter<span class="token punctuation">:</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span>twitter <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>francine<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'twitter'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'twitter'</span> <span class="token keyword">in</span> francine<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;– la valeur <code>undefined</code> est convertie en <code>false</code>.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;– la clé existe bien, mais elle contient la valeur <code>undefined</code>.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;– le test se fait sur l&#8217;existence de la&#160;clé.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;– idem.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="json">9. Lire et écrire des données au format JSON</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>JSON (<span class="URL"><a href="http://json.org" class="bare">json.org</a></span>) est un format de données textuel standardisé.
Son but est de représenter des données informatiques de manière
interopérable entre différents langages.</p>
</div>
<div class="listingblock prismjs highlight-prismjs">
<div class="title">json/base.json</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token punctuation">{</span>
  <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"Node.js"</span><span class="token punctuation">,</span>
  <span class="token string">"price_tag"</span><span class="token punctuation">:</span> <span class="token number">32</span><span class="token punctuation">,</span>
  <span class="token string">"keywords"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">"JavaScript"</span><span class="token punctuation">,</span>
    <span class="token string">"Node.js"</span><span class="token punctuation">,</span>
    <span class="token string">"Apprendre par l'exemple"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Le format JSON ressemble beaucoup à une structure d'<a href="#object">objet</a> ECMAScript.
La représentation est plus stricte car <em>toute donnée</em> doit être représentée
de manière textuelle.
Ainsi, toutes les clés sont entourées de <em>guillemets doubles</em>.</p>
</div>
<div class="paragraph">
<p>Les types de données autorisés sont les nombres, les chaînes de caractères,
les booléens, les tableaux, les objets et la valeur <code>null</code>.
On ne peut donc pas représenter de <a href="#function">fonction</a>,
d'<a href="#class">instance d&#8217;objet</a> ni même la valeur <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>ECMAScript embarque le nécessaire pour <em>parser</em> depuis et <em>convertir</em> en JSON.
Cela se fait respectivement avec les fonctions <code>JSON.parse()</code> et <code>JSON.stringify()</code>.</p>
</div>
<div class="paragraph">
<p>La fonction <code>JSON.parse()</code> consomme du texte.
Elle retourne une représentation ECMAScript ou lance une <a href="#error">erreur</a>
en cas de problème.
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/parse.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> json_object <span class="token operator">=</span> <span class="token string">'{ "title": "Node.js", "price_tag": 32 }'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json_string <span class="token operator">=</span> <span class="token string">'"Hello World!"'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json_number <span class="token operator">=</span> <span class="token string">'32'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json_string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json_number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>json_object<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"Hello World!"</code>.</p>
</li>
<li>
<p>Affiche&#160;<code>32</code>.</p>
</li>
<li>
<p>Affiche <code>{price_tag: 32, title: "Node.js"}</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>À l&#8217;inverse, la fonction <code>JSON.stringify()</code> convertit une structure ECMAScript
en chaîne de caractères au format&#160;JSON&#160;:
</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/stringify.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token punctuation">{</span>
  lat<span class="token punctuation">:</span> <span class="token number">48.8503439</span><span class="token punctuation">,</span>
  lon<span class="token punctuation">:</span> <span class="token number">2.34658949</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"{\"lat\":48.8503439,\"lon\":2.34658949}"</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La fonction <code>JSON.stringify()</code> parcourt tous les éléments
pour les sérialiser en forme textuelle.
Quand elle rencontre la la clé spéciale <code>toJSON()</code>,
elle l&#8217;utilise pour effectuer la conversion&#160;:

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/to-json.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token punctuation">{</span>
  lat<span class="token punctuation">:</span> <span class="token number">48.8503439</span><span class="token punctuation">,</span>
  lon<span class="token punctuation">:</span> <span class="token number">2.34658949</span><span class="token punctuation">,</span>
  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`geo=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lat<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lon<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">delete</span> location<span class="token punctuation">.</span>toJSON<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"\"geo=48.8503439,2.34658949\""</code>&#160;– c&#8217;est la sérialisation définie par notre fonction <code>toJSON</code>.</p>
</li>
<li>
<p>Affiche <code>"{\"lat\":48.8503439,\"lon\":2.34658949}"</code>&#160;– sans la clé <code>toJSON</code>, notre objet initial est sérialisé tel&#160;quel.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notre implémentation contenue dans la fonction <code>toJSON()</code> est
responsable de renvoyer du texte seulement et de choisir les clés
à sérialiser.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">json/to-json-extra.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token punctuation">{</span>
  lat<span class="token punctuation">:</span> <span class="token number">48.8503439</span><span class="token punctuation">,</span>
  lon<span class="token punctuation">:</span> <span class="token number">2.34658949</span><span class="token punctuation">,</span>
  city<span class="token punctuation">:</span> <span class="token string">'Paris'</span><span class="token punctuation">,</span>
  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`geo=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lat<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lon<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(1)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>"\"geo=48.8503439,2.34658949\""</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Dans cette variante d&#8217;exemple, la clé <code>city</code> n&#8217;a pas été sérialisée
car notre fonction <code>toJSON()</code> se préoccupait seulement des clés <code>lat</code> et&#160;`lon`.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> JSON</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur JSON.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/JSON" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/JSON</a>

</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="date">10. Interagir avec des dates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les calculs de date s&#8217;effectuent à l&#8217;aide des objets <code>Date</code>.
Chaque instance représente un moment dans le temps, à un jour
et à une heure donnée.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> past <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04 10:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(1)</b></span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">getUTCFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">getUTCFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On initialise l&#8217;objet date <code>past</code> au 04&#160;décembre&#160;2013.</p>
</li>
<li>
<p>Affiche <code>2013</code>&#160;– l&#8217;année liée à l&#8217;objet&#160;<code>past</code>.</p>
</li>
<li>
<p>Affiche <code>2019</code>&#160;– l&#8217;année liée à l&#8217;objet&#160;<code>now</code> (date du jour).
</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Un certain nombre de méthodes retournent différents éléments de la date
contenue dans l&#8217;objet&#160;: année, secondes, jour de la semaine, etc.
Il en existe tout autant pour modifier ces éléments de date.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/set.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> past <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04 10:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

past<span class="token punctuation">.</span><span class="token function">setUTCFullYear</span><span class="token punctuation">(</span><span class="token string">'2015'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(2)</b></span>

past<span class="token punctuation">.</span><span class="token function">setUTCMonth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Change la date vers l&#8217;année&#160;<code>2015</code>.</p>
</li>
<li>
<p>Affiche <code>"2015-12-04T10:00:00.000Z"</code>.</p>
</li>
<li>
<p>Change la date vers le mois&#160;<code>1</code>.</p>
</li>
<li>
<p>Affiche <code>"2015-02-04T10:00:00.000Z"</code>&#160;– pourquoi le mois de février&#160;??


</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple précédent illustre l&#8217;ambiguïté de la notion de mois.
Il s&#8217;agit en réalité de l'<em>index du mois</em>&#160;:
0&#160;correspond à janvier, 1 à février, etc.</p>
</div>
<div class="paragraph">
<p>Les méthodes natives font pour la plupart référence à l&#8217;anglais.
Elles offrent peu de confort de manipulation&#160;– on aimerait pouvoir
compter facilement le nombre de jours entre deux dates, ou retirer 30&#160;jours.</p>
</div>
<div class="paragraph">
<p>Quand nous utiliserons <a href="#../chapter-04/index.adoc">Node</a> et
<a href="#../chapter-05/index.adoc">npm</a>, nous verrons que nous aurons
à disposition des bibliothèques facilitant les manipulations de dates.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Date</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Date.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date</a>

</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="intl.datetimeformat">10.1. Formatage internationalisé (Intl.DateTimeFormat)</h3>
<div class="paragraph">
<p>


</p>
</div>
<div class="paragraph">
<p>La spécification <em>ECMA&#160;Intl</em> a été conçue pour ajouter des
fonctionnalités relatives aux langues.
Cette spécification est complémentaire.
Son comportement varie en fonction du système d&#8217;exploitation
– mode d&#8217;installation de Node et/ou version du navigateur&#160;web.</p>
</div>
<div class="paragraph">
<p>Les méthodes <code>toLocaleString()</code>, <code>toLocaleDateString()</code> et
<code>toLocaleTimeString()</code> renvoient respectivement une version localisée
d&#8217;une date complète, d&#8217;une date et d&#8217;une heure.


</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/to-locale-date.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> past <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04 10:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// <b class="conum">(1)</b></span>

<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> month<span class="token punctuation">:</span> <span class="token string">'long'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>past<span class="token punctuation">.</span><span class="token function">toLocaleDateString</span><span class="token punctuation">(</span><span class="token string">'fr-FR'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>04/12/2013</code>.</p>
</li>
<li>
<p>Affiche <code>décembre</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">⚠️</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Attention</span> M01,&#160;M02,&#160;etc. ?</div>
<div class="paragraph">
<p>Si, en formatant une date, les caractères <code>M01</code>, <code>M02</code> ou autre s&#8217;affichent,
c&#8217;est que le système n&#8217;est pas configuré avec les libellés de la langue
demandée.</p>
</div>
<div class="paragraph">
<p>La langue par défaut est l&#8217;anglais.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Date/toLocaleDateString</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur Date/toLocaleDateString.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString</a>

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une version plus verbeuse consiste à créer un formateur avec
<code>Intl.DateTimeFormat</code>.
Ce formateur se réutilise pour transformer plusieurs fois
des dates différentes avec les mêmes réglages
ou une même date avec des formatages différents.

</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">date/intl.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> past <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04 10:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  year<span class="token punctuation">:</span> <span class="token string">'numeric'</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> <span class="token string">'short'</span><span class="token punctuation">,</span> day<span class="token punctuation">:</span> <span class="token string">'numeric'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> longOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  year<span class="token punctuation">:</span> <span class="token string">'numeric'</span><span class="token punctuation">,</span> month<span class="token punctuation">:</span> <span class="token string">'long'</span><span class="token punctuation">,</span> day<span class="token punctuation">:</span> <span class="token string">'numeric'</span><span class="token punctuation">,</span>
  weekday<span class="token punctuation">:</span> <span class="token string">'long'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>DateTimeFormat</span><span class="token punctuation">(</span><span class="token string">'fr-FR'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> frLong <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>DateTimeFormat</span><span class="token punctuation">(</span><span class="token string">'fr-FR'</span><span class="token punctuation">,</span> longOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fr<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>past<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>frLong<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>past<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// <b class="conum">(2)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>4 déc. 2013</code>.</p>
</li>
<li>
<p>Affiche <code>mercredi 4 décembre 2013</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> DateTimeFormat</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur DateTimeFormat.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/DateTimeFormat" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/DateTimeFormat</a>

</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="class">11. Partager une logique avec des objets de même nature (Class)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph">
<p>Une classe est une structure qui partage des propriétés
et des méthodes entre les objets qui y font appel.
Une instance de classe est créée en préfixant un appel de fonction
par l&#8217;opérateur&#160;`new`.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> date2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2013-12-04'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nos deux variables sont des objets issus de la classe <a href="#date">Date</a>.
Chacune des variables bénéficie des méthodes définies par cette classe.</p>
</div>
<div class="paragraph">
<p>Autrement dit, si les <a href="#object">structures d&#8217;objet</a> définissent des données,
les classes définissent des comportements partagés.


</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> ean13 <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment">// <b class="conum">(1)</b></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>               <span class="token comment">// <b class="conum">(2)</b></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ean13 <span class="token operator">=</span> ean13<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                          <span class="token comment">// <b class="conum">(3)</b></span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>title<span class="token punctuation">,</span> ean13<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>title<span class="token punctuation">,</span> ean13<span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">isbn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        <span class="token comment">// <b class="conum">(4)</b></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ean13<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">clean</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>               <span class="token comment">// <b class="conum">(5)</b></span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\D/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Le constructeur reçoit un ou plusieurs argument(s) lors de l&#8217;instanciation de la classe.</p>
</li>
<li>
<p><code>this</code> fait référence à <em>ce contexte</em>, c&#8217;est-à-dire à <em>cette instance de classe</em>&#160;; deux instances peuvent être initialisées avec des données différentes.</p>
</li>
<li>
<p><code>toJSON()</code> est une méthode de la classe.</p>
</li>
<li>
<p><code>isbn()</code> est un accesseur (préfixe <code>get</code>)&#160;– une propriété dont la valeur est calculée à chaque fois qu&#8217;elle est appelée.</p>
</li>
<li>
<p><code>clean()</code> est une méthode dite <em>statique</em>&#160;– elle est appelée en dehors d&#8217;une instance.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Nous développerons cet exemple dans les sections qui suivent.
On peut d&#8217;ores et déjà noter que la structure d&#8217;une classe
se décompose en plusieurs parties&#160;:





</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">La définition</dt>
<dd>
<p>Définit le nom de la classe que l&#8217;on pourra instancier.</p>
</dd>
<dt class="hdlist1">Le constructeur</dt>
<dd>
<p>Partie exécutée lorsque la classe est instanciée.
On y met le moins de choses possibles.
En général, on copie les données passées en argument.</p>
</dd>
<dt class="hdlist1">Les méthodes</dt>
<dd>
<p>Fonctions partagées entre toutes les instances de la classe.</p>
</dd>
<dt class="hdlist1">Les méthodes statiques</dt>
<dd>
<p>Fonctions partagées sans avoir à instancier la classe.</p>
</dd>
<dt class="hdlist1">Les accesseurs et mutateurs</dt>
<dd>
<p>Fonctions qui définissent le comportement de propriétés dynamiques.</p>
</dd>
<dt class="hdlist1">Le contexte (<code>this</code>)</dt>
<dd>
<p>On peut s&#8217;y référer dans les méthodes de la classe pour dire
<em>je fais référence à cet objet</em> et, donc,
appeler les données et méthodes attenantes.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Classes</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les classes.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes</a>

</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="class.method">11.1. Méthodes d&#8217;instance</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Les méthodes définissent des comportements partagés entre chaque instance
de la classe.
Elles servent à retourner ou transformer des valeurs rattachées à l&#8217;objet.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/methods.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">isPublished</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>is_published <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>is_published <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> book1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book1<span class="token punctuation">.</span><span class="token function">isPublished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(1)</b></span>
book1<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book1<span class="token punctuation">.</span><span class="token function">isPublished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>

<span class="token keyword">const</span> book2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'CSS maintenables'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book2<span class="token punctuation">.</span><span class="token function">isPublished</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>false</code>&#160;– la propriété n&#8217;existe pas.</p>
</li>
<li>
<p>Affiche <code>true</code>&#160;– la propriété <code>is_published</code> a été changée à la ligne précédente.</p>
</li>
<li>
<p>Affiche <code>false</code>&#160;– les données sont étanches entre chaque instance.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="class.static">11.2. Méthodes statiques</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p>Les méthodes statiques sont pratiques pour mettre à disposition du code
métier de manière organisée.
Elles se caractérisent par le mot-clé <code>static</code> devant un nom de fonction.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/static.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> title<span class="token punctuation">,</span> ean13 <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ean13 <span class="token operator">=</span> ean13<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token function">clean</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\D/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> nodebook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  ean13<span class="token punctuation">:</span> Book<span class="token punctuation">.</span><span class="token function">clean</span><span class="token punctuation">(</span><span class="token string">'978-2212139938'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// <b class="conum">(1)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nodebook<span class="token punctuation">.</span>ean13<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nodebook<span class="token punctuation">.</span>clean<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On appelle la méthode statique <code>Book.clean()</code> pour nettoyer le code EAN13.</p>
</li>
<li>
<p>Affiche <code>"9782212139938"</code>&#160;– la valeur a bien été nettoyée.</p>
</li>
<li>
<p>Affiche <code>undefined</code>&#160;– les méthodes statiques ne sont pas accessibles depuis l&#8217;instance de classe.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On verra dans le <a href="#../chapter-04/index.adoc">chapitre sur Node</a>
qu&#8217;on peut se baser sur les modules pour partager du code
sans avoir à l&#8217;affecter à une classe.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Méthodes statiques</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les méthodes statiques.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes/static" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Classes/static</a>

</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="object-getset">11.3. Accesseurs et mutateurs</h3>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph">
<p>Ce type de méthode définit des attributs dont la lecture ou l&#8217;écriture
sont dynamiques.</p>
</div>
<div class="paragraph">
<p>L&#8217;accesseur est une fonction préfixée par le mot-clé <code>get</code>&#160;; elle retourne
la valeur d&#8217;un attribut.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">getters.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  ean13<span class="token punctuation">:</span> <span class="token string">'9782212139938'</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token function">isbn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// <b class="conum">(1)</b></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ean13<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>ean13<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>isbn<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Définition de l&#8217;accesseur&#160;<code>isbn()</code>.</p>
</li>
<li>
<p>Affiche <code>"9782212139938"</code>&#160;– c&#8217;est une propriété de l&#8217;objet <code>nodebook</code>.</p>
</li>
<li>
<p>Affiche <code>"2212139938"</code>&#160;– <code>isbn()</code> s&#8217;utilise comme un attribut mais sa valeur est calculée à chaque fois qu&#8217;elle est appelée.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Le mutateur est une fonction préfixée par le mot-clé <code>set</code>&#160;; elle définit
la valeur d&#8217;un ou plusieurs attribut(s).</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">setters.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span> <span class="token function">ean13</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment">// <b class="conum">(1)</b></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>issn <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isbn <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

book<span class="token punctuation">.</span>ean13 <span class="token operator">=</span> <span class="token string">'9782212139938'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>issn<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(2)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>isbn<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// <b class="conum">(3)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>ean13<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Définition du mutateur <code>ean13()</code>&#160;– il accepte un seul argument.</p>
</li>
<li>
<p>Affiche <code>978</code>&#160;– l&#8217;attribut a été créé lors de l&#8217;appel du mutateur.</p>
</li>
<li>
<p>Affiche <code>2212139938</code>&#160;– idem.</p>
</li>
<li>
<p>Affiche <code>undefined</code>&#160;– il faudrait créer un accesseur <code>get ean13()</code> pour recomposer dynamiquement sa valeur.</p>
</li>
</ol>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Accesseurs</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les accesseurs.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/get" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/get</a>

</td>
</tr>
</table>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Mutateurs</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les mutateurs.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/set" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Functions/set</a>

</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="class.extends">11.4. Héritage</h3>
<div class="paragraph">
<p>


</p>
</div>
<div class="paragraph">
<p>L&#8217;héritage est un mécanisme d&#8217;extension de classe.
C&#8217;est une pratique peu employée en JavaScript,
principalement en raison de sa nature modulaire et fonctionnelle.</p>
</div>
<div class="paragraph">
<p>L&#8217;héritage se caractérise par l&#8217;usage du mot-clé <code>extends</code> lors de la
définition de la classe et aussi par l&#8217;utilisation de l&#8217;opérateur <code>super()</code>
dans le constructeur.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">class/extends.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">class</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>               <span class="token comment">// <b class="conum">(1)</b></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">'Sans titre'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token keyword">extends</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>  <span class="token comment">// <b class="conum">(2)</b></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> options<span class="token punctuation">.</span>title<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// <b class="conum">(3)</b></span>

<span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Node.js'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <b class="conum">(4)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La classe <code>Product</code> affecte un titre par défaut lorsqu&#8217;un nouvel objet est initialisé.</p>
</li>
<li>
<p>La classe <code>Book</code> affecte un titre donné en argument et, sinon, se base sur la valeur par défaut de la classe <code>Product</code>.</p>
</li>
<li>
<p>Affiche <code>'Node.js'</code>.</p>
</li>
<li>
<p>Affiche <code>'Sans titre'</code>&#160;– la propriété <code>title</code> ne se définit pas dans le constructeur (cf.&#160;<code>class Product</code>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>En pratique, c&#8217;est comme si on empilait les classes les unes sur les autres.
On lègue des méthodes aux classes qui héritent.
Si une méthode porte le même nom, la méthode &#8220;en haut de la pile&#8221; a la priorité.</p>
</div>
<div class="paragraph">
<p>L&#8217;appel à la fonction <code>super()</code> <em>appelle le constructeur de la classe étendue</em>.
Si on ne l&#8217;appelle pas, le constructeur de la classe parente ne sera pas invoqué.</p>
</div>
<div class="paragraph">
<p>On reparlera de l&#8217;héritage dans le <a href="#../chapter-09/index.adoc">chapitre 9</a>
avec un exemple populaire d&#8217;héritage appliqué aux composants visuels avec
la bibliothèque React.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="promise">12. Coordonner des actions asynchrones (Promise)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>


</p>
</div>
<div class="paragraph">
<p>Une promesse est <strong>un objet retourné immédiatement</strong> mais dont le
<strong>résultat est obtenu plus tard</strong>, de manière asynchrone.
Cette résolution est soit <em>positive</em> soit <em>négative</em>.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/base.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'promesse tenue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>                           <span class="token comment">// <b class="conum">(1)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'un'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">// <b class="conum">(2)</b></span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">message</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// <b class="conum">(4)</b></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'deux'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Affiche <code>Promise</code>&#160;– ce n&#8217;est pas le résultat que l&#8217;on voit, mais l&#8217;objet avec lequel interagir pour être prévenu de la mise à disposition du résultat.</p>
</li>
<li>
<p>Affiche <code>"un"</code>.</p>
</li>
<li>
<p>Affiche <code>"deux"</code>&#160;– c&#8217;est parce que la ligne d&#8217;avant a mis en attente la <a href="#anonymous-function">fonction anonyme</a>.</p>
</li>
<li>
<p>Affiche <code>"promesse tenue"</code> en dernier.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">💬</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Design Pattern</span> Executor</div>
<div class="paragraph">
<p>Le fait qu&#8217;une fonction nous passe d&#8217;autres fonctions pour commander
un résultat s&#8217;appelle le <em>pattern Executor</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Une <code>Promise</code> s&#8217;orchestre en deux temps&#160;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;initialisation<br>
On décide de la manière dont le traitement asynchrone sera effectué.</p>
</li>
<li>
<p>La résolution<br>
<em>Positive</em> en appelant <code>resolve()</code> ou <em>négative</em>, en appelant <code>reject()</code>.
Le résultat passé à <code>resolve()</code> sera transmis au premier argument de <code>then()</code>.
Le résultat passé à <code>reject()</code> sera transmis au deuxième argument de <code>then()</code>,
mais aussi au premier argument de <code>catch()</code>.



</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Une instance de <code>Promise</code> expose plusieurs méthodes pour propager
le statut de son exécution&#160;:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>then(onSuccess[, onError])</code></dt>
<dd>
<p>Fonction acceptant un <em>callback</em> de résolution et
un autre de rejet (facultatif).</p>
</dd>
<dt class="hdlist1"><code>catch(onError)</code></dt>
<dd>
<p>Fonction acceptant un <em>callback</em> de rejet.</p>
</dd>
</dl>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/then-catch.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">oddTime</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">parseInt</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span>                 <span class="token comment">// <b class="conum">(1)</b></span>
      <span class="token operator">?</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'le nombre de secondes est impair :-)'</span><span class="token punctuation">)</span>
      <span class="token punctuation">:</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'le nombre de secondes n\'est pas impair :-('</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">oddTime</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span>                                            <span class="token comment">// <b class="conum">(2)</b></span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">msg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token parameter">msg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">oddTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                 <span class="token comment">// <b class="conum">(3)</b></span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">msg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token comment">// <b class="conum">(4)</b></span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">msg</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span>                     <span class="token comment">// <b class="conum">(5)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>La fonction <code>oddTime()</code> accepte un argument de type &lt;&lt;date,Date&gt;. Elle résout la promesse <em>positivement</em> (<code>resolve()</code>) si le nombre de secondes est impair et <em>négativement</em> (<code>reject</code>) sinon.</p>
</li>
<li>
<p>Utilisation de la forme compacte de <code>then()</code> avec deux <em>callbacks</em>&#160;: un de succès (associé à <code>resolve()</code>) et un d&#8217;échec (associé à <code>reject()</code>).</p>
</li>
<li>
<p>On crée une nouvelle promesse, avec une date calée une seconde plus tard.</p>
</li>
<li>
<p>Affiche <code>"le nombre de secondes est impair&#160;:-)"</code> puisque la résolution est positive.</p>
</li>
<li>
<p>Affiche <code>"le nombre de secondes n&#8217;est pas impair&#160;:-("</code> puisque la résolution est négative.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">💬</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Histoire</span> Standard <code>Promise/A+</code></div>
<div class="paragraph">
<p>


Historiquement, de nombreuses bibliothèques ont proposé leur propre implémentation de promesses.
Elles avaient le défaut de ne pas être interopérables.
La spécification <em>Promise/A+</em> (<span class="URL"><a href="https://github.com/promises-aplus/promises-spec" class="bare">github.com/promises-aplus/promises-spec</a></span>)
a émergé pour établir un standard de compatibilité.</p>
</div>
<div class="paragraph">
<p>ECMAScript&#160;2015 introduit nativement cette API.
Il n&#8217;y a donc plus besoin de <em>polyfill</em> ou de bibliothèque pour en bénéficier.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>En général, on utilise les promesses <strong>pour aller plus vite</strong>,
parce qu&#8217;on peut continuer à traiter d&#8217;autres actions en attendant
l&#8217;arrivée du résultat.</p>
</div>
<div class="paragraph">
<p>C&#8217;est comme quand on se rend au restaurant&#160;:
les personnes en cuisine traitent des commandes
(actions longues) tandis que les personnes au service gèrent
des interactions plus courtes mais plus fréquentes.
Au final, le ticket de commande contient la liste des promesses dont
on attend la résolution.</p>
</div>
<div class="paragraph">
<p>Nous verrons d&#8217;autres utilisations des promesses
dans le reste de l&#8217;ouvrage, plus particulièrement
avec <a href="../chapter-09/index.html#io-fetch">fetch()</a> au chapitre&#160;9
ainsi qu&#8217;avec <a href="../chapter-04/index.html#util.promisify">promisify</a> au chapitre&#160;4.</p>
</div>
<div class="admonitionblock note info">
<table>
<tr>
<td class="icon">
<div class="title">📖</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Documentation</span> Promise</div>

Rendez-vous sur <em>MDN web docs</em> pour en savoir plus sur les promesses.<br>
<a href="https://developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Promise" class="bare URL" target="_blank" rel="noopener">developer.mozilla.org/docs/fr/Web/JavaScript/Reference/Global_Objects/Promise</a>

</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">💡</div>
</td>
<td class="content">
<div class="title"><span class="RemarquePreTitre">Lien</span> Guide des promesses</div>
<div class="paragraph">
<p>Le guide <span class="URL"><a href="https://www.w3.org/2001/tag/doc/promises-guide" class="bare">www.w3.org/2001/tag/doc/promises-guide</a></span> est <em>très</em> complet.
Il est en anglais ainsi qu&#8217;en libre consultation sur le site du&#160;W3C.</p>
</div>
<div class="paragraph">
<p>Son dépôt GitHub <span class="URL"><a href="https://github.com/w3ctag/promises-guide" class="bare">github.com/w3ctag/promises-guide</a></span> permet
d&#8217;y contribuer.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="promise.all">12.1. Collection de promesses</h3>
<div class="paragraph">
<p>
</p>
</div>
<div class="paragraph">
<p><code>Promise.all()</code> est une <a href="#class.static">méthode statique</a> de la class <em>Promise</em>.
Elle accepte un <a href="#array">tableau</a> de promesses et en retourne elle-même une promesse.
Cette dernière est résolue positivement si toutes les promesses réussissent
et négativement dès que l'<em>une d&#8217;entre elles</em> échoue.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/all.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">const</span> <span class="token function-variable function">asyncRandom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  <span class="token comment">// <b class="conum">(1)</b></span>
  <span class="token keyword">const</span> timing <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`résolu en </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timing<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> timing<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> all <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>                             <span class="token comment">// <b class="conum">(2)</b></span>
  <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

all<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">messages</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>messages<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// <b class="conum">(3)</b></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Cette fonction résout la promesse après un délai aléatoire compris entre&#160;0 et 2000&#160;millisecondes.</p>
</li>
<li>
<p>On passe trois promesses à <code>Promise.all()</code>.</p>
</li>
<li>
<p>La résolution est déclenchée dès que les trois promesses sont résolues&#160;– l&#8217;argument contient un tableau listant les résultats <em>dans l&#8217;ordre initial</em> des promesses.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>L&#8217;exemple précédent illustre la <strong>parallélisation des actions</strong>.
Si la promesse la plus longue est résolue en une seconde,
alors le temps d&#8217;attente pour la résolution de <em>toutes les promesses</em>
est de une seconde.<br>
Si on avait été dans un enchaînement séquentiel, le temps d&#8217;attente
final aurait été l&#8217;accumulation des temps d&#8217;attente de la résolution
de chacune des promesses.</p>
</div>
<div class="paragraph">
<p>Les promesses sont un des meilleurs moyens à notre disposition pour
<strong>modulariser</strong>, <strong>linéariser</strong> et <strong>clarifier le sens</strong> du flot de notre code.</p>
</div>
</div>
<div class="sect2">
<h3 id="async-await">12.2. async/await</h3>
<div class="paragraph">
<p>

</p>
</div>
<div class="paragraph">
<p>Les opérateurs <code>async</code> et <code>await</code> aident à mettre en pause
l&#8217;interpréteur ECMAScript, en attendant le résultat d&#8217;une
fonction asynchrone (préfixée par <code>async</code>).
Les <a href="#promise">promesses</a> sont implicitement compatibles.
On peut donc les mettre à plat pour obtenir un résultat
sans avoir à utiliser <code>then()</code> ni&#160;`catch()`.</p>
</div>
<div class="paragraph">
<p>Transformons l&#8217;exemple de la <a href="#promise.all">section précédente</a>
pour comprendre l&#8217;impact de <code>async</code> et de&#160;`await`.</p>
</div>
<div class="listingblock prismjs highlight-prismjs interactive interactive--javascript interactive--runtime--node-v10">
<div class="title">promise/async-await.js</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript"><span class="token keyword">function</span> <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> timing <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`résolu en </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timing<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> timing<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>                  <span class="token comment">// <b class="conum">(1)</b></span>
  <span class="token keyword">const</span> all <span class="token operator">=</span> <span class="token punctuation">[</span>                 <span class="token comment">// <b class="conum">(2)</b></span>
    <span class="token keyword">await</span> <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">await</span> <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">await</span> <span class="token function">asyncRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>all<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// <b class="conum">(3)</b></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>On crée une <em>fonction asynchrone auto-invoquée</em>&#160;– parce qu&#8217;on ne peut pas encore utiliser de fonction asynchrone directement au niveau principal d&#8217;un script.</p>
</li>
<li>
<p>Chaque utilisation de <code>await</code> met l&#8217;interpréteur en pause.</p>
</li>
<li>
<p>L&#8217;affichage du temps d&#8217;exécution de chaque promesse se fait lorsque les trois promesses sont résolues.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>On gagne en lisibilité, mais on perd en vitesse.
Les promesses sont exécutées séquentiellement et non en parallèle.
Il est important d&#8217;arbitrer les choix de conception et d&#8217;éviter de bloquer
l&#8217;exécution de vos scripts sans raison explicite.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conclusion">13. Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ECMAScript est un langage bien plus riche, complet et élégant qu&#8217;il n&#8217;y paraît.</p>
</div>
<div class="paragraph">
<p>Ce chapitre nous a <strong>appris les différentes structures de langage</strong>
communes à tous les environnements comprenant ECMAScript.
Cela s&#8217;applique aussi bien à Node qu&#8217;aux navigateurs web.<br>
Je vous invite à revenir à ce chapitre pour vous rafraîchir la mémoire,
mais aussi pour jouer avec les exemples afin de confirmer votre compréhension
du langage.</p>
</div>
<div class="paragraph">
<p>Dans le <a href="#../chapter-04/index.adoc">chapitre suivant</a>, nous allons
<strong>relier ces apprentissages avec Node</strong>&#160;– notre interpréteur et environnement
d&#8217;exécution JavaScript.</p>
</div>
</div>
</div>
</div>
<section class="next">
  <a href="#top">Haut de page</a> ou
  <a href="https://oncletom.io/node.js/#apprendre-node-js-en-ligne" class="read-more">retour au sommaire</a>.
</section>
</body>
</html>